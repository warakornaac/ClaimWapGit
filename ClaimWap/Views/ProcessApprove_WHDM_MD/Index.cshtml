@{
    ViewBag.Title = "Approve DM BY MD";
    Layout = "~/Views/Shared/_Layoutindex.cshtml";
    var user = ViewBag.UserId;
    var usertype = ViewBag.UserType;
}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Process Claim Document</title>
    <link href="~/Content/css/sb-admin-A.css" rel="stylesheet" />

    <link href="~/Scripts/JSautocomplete/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/JSautocomplete/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/JSautocomplete/jquery-ui.js"></script>
    <script src="~/Content/fixed-table-master/fixed-table.js"></script>
    <link href="~/Content/fixed-table-master/fixed-table.css" rel="stylesheet" />

    <style>
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modalx {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Modal Content (Image) */
        .modal-contentx {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1200px;
        }

        /* Caption of Modal Image (Image Text) - Same Width as the Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation - Zoom in the Modal */
        .modal-content, #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        /* The Close Button */
        .close {
            position: absolute;
            top: 56px;
            right: 20px;
            color: #f1f1f1;
            font-size: 57px;
            font-weight: bold;
            /* transition: 0.3s; */
            left: 1656px;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        .preserveLineBreaks {
            white-space: pre-line; /*or pre-wrap*/
        }

        input[type="file"] {
            display: block;
        }

        input[type="text"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="date"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="checkbox"] {
            width: 35px;
            zoom: 2;
            padding: 2px;
            -webkit-appearance: checkbox;
        }

        .imageThumb {
            max-height: 75px;
            border: 2px solid;
            padding: 1px;
            cursor: pointer;
        }

        .pip1 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove1 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove1:hover {
                background: white;
                color: black;
            }

        .pip2 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove2 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove2:hover {
                background: white;
                color: black;
            }

        .pip3 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove3 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove3:hover {
                background: white;
                color: black;
            }

        .pip4 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove4 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove4:hover {
                background: white;
                color: black;
            }

        .gi-4x {
            font-size: 2em;
        }
    </style>


    <style>
        /* The container */
        .container_check {
            display: block;
            position: relative;
            padding-left: 35px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 22px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

            /* Hide the browser's default checkbox */
            .container_check input {
                position: absolute;
                opacity: 0;
                cursor: pointer;
                height: 0;
                width: 0;
            }

        /* Create a custom checkbox */
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: #eee;
        }

        /* On mouse-over, add a grey background color */
        .container_check:hover input ~ .checkmark {
            background-color: #ccc;
        }

        /* When the checkbox is checked, add a blue background */
        .container_check input:checked ~ .checkmark {
            background-color: #2196F3;
        }

        /* Create the checkmark/indicator (hidden when not checked) */
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        /* Show the checkmark when checked */
        .container_check input:checked ~ .checkmark:after {
            display: block;
        }

        /* Style the checkmark/indicator */
        .container_check .checkmark:after {
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        .closefunction {
            display: none;
        }
    </style>
</head>

<body>
    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg" style=" max-width: 1200px;">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Invoice History</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" @*style="overflow-x:scroll"*@>
                    <table id="_tbinvoicehiscx">
                        <thead>
                            <tr>
                                <th style=" min-width: 115px; height: 60px; border: 1px solid #222;">Invoice No</th>
                                @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style=" min-width: 85px; height: 60px; border: 1px solid #222;">Invoice Date</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Item No.</th>
                                <th style=" min-width: 200px; height: 60px; border: 1px solid #222;">Description</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">UOM</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Stock<br />Group</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Qty</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Unit Price</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Discount %</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />discount Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sale Man</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Customer</th>

                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModalimage" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Image</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="overflow-x:scroll">
                    <table id="_tbimage">
                        <thead>
                            <tr>
                                <th style="min-width: 645px;height: 60px;border: 1px solid #222;text-align: center;">Image</th>
                                @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style="min-width: 134px;height: 60px;border: 1px solid #222;text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Trigger the modal with a button -->
    <!-- ModalWarning -->
    <div id="myModalWarning" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog" role="document">

            <div class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong>
                <div class="modal-body">
                    <div id="textAlertWarning">Some text in the modal.</div>
                </div>

            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Succes</strong>
                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <div class="card mb-12">
        <div class="card-header">
            <i class="fa fa-table"></i>รายการสินค้า Damage<li id="clickmeheader" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
        </div>
        <div class="card-body" id="myDIVheader">

            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> Head of PM:</span>
                            <span>
                                <select class="bar" id="_buhead"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> Product Manager:</span>
                            <span>
                                <select class="bar" id="_PM"></select>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="group" style=" margin-bottom: 22px;">
                            <span> <i class="fa fa-user"></i> Company:</span>
                            <select class="bar" id="_company">
                                <option value="0" disabled>Choose option</option>
                                <option value="TAC">TAC</option>
                                <option value="AAC">AAC</option>
                                <option value="OMP">OMP</option>
                                <option value="ALL" selected>ALL</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>PM Request start date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_statdate"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>PM Request end date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_enddate"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Stk Group.:</span>
                            <span><select id="_stkgrp"></select></span>
                        </div>
                    </div>

                </div>
                <div class="row" style="display:none">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Customer Request start date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_statdatecus"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Customer Request end date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_enddatecus"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Status.:</span>
                            <span>
                                <select id="_statusbu" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Item No.:</span>
                            <span><input type="text" required id="_itemnosearch"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <button type="button" class="btn btn-success" id="_btnsearch">Search</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="input-group">
                            <span>
                                <i class="fa fa-pencil"></i>Search Claim No.:
                            </span>
                            <input class="form-control" type="text" id="searchclaimno">

                            <span class="input-group-btn">
                                <button class="btn btn-primary" type="button" id="_btnsearchclaimno">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>

            </div>
            <div id="fixed-table-container-2" class="fixed-table-container" style="z-index:1">
                <table>
                    <thead>
                        <tr>

                            <th style="width: 134px">line no</th>
                            <th>Ref No.</th>
                            <th>Item No.</th>
                            <th>UOM</th>
                            <th>Stock <br />group</th>
                            <th>จำนวน<br />PM ขออนุมัติโอนเข้า <br />Damang</th>
                            <th>Unit cost</th>
                            <th>Amount</th>
                            <th>Request By</th>
                            <th>Request Date</th>
                            <th>Tech<br />1</th>
                            <th>Tech<br />2</th>
                            <th>PM</th>
                            <th>BU Head</th>
                            <th>MD</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>


        <div class="card mb-12">
            <div class="card-header">
                <i class="fa fa-table"></i>รายละเอียดสินค้า Damage <li id="clickme" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV">
                <div class="col-md-12">
                    <div><span id="Nospankey" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div><span id="subNospan" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Item No.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_itemno"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Description:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_description"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">

                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Uom:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_uom"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Stock Group:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_stkgup"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Stock Group Name:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="stkgrpnam"></span>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>แผนก Dep :</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimsec"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Product Name</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="prdnam"></span>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> จำนวนขออนุมัติโอนย้ายเข้า Damage:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Unit Cost:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimcnitcost"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>มูลค่ารวมของสินค้า:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimtotcost"></span>
                            </div>
                        </div>
                        <div class="closefunction">
                            <div class="col-md-4" style="display:none">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> จำนวนรับเคลมSupplier:</span>
                                    <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimsupqty"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i>จำนวนของเสีย(เคลมSupplierไม่ได้):</span>
                                    <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimnosupqty"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> จำนวนของดี(สินค้าใช้งานได้):</span>
                                    <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimgoodqty"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-clock-o"></i>Location</span>
                                    <span style="color: blue;text-decoration: underline;font-weight: bold" id="_location"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                </div>
                            </div>
                            <div class="row">

                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <span> <i class="fa fa-pencil"></i> สาเหตุการ:</span>
                                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="causeclaim"></span>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-sm-6" style="display:none">
                                    <div class="form-group">
                                        <span> <i class="fa fa-pencil"></i> ดำเนินการ:</span>
                                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="_proceedto"></span>

                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <span> <i class="fa fa-pencil"></i> สถานะรับสินค้า:</span>
                                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="_statusclaim"></span>

                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="form-group">

                                </div>
                            </div>
                        </div>
                    </div>


                </div>


                <div class="col-xs-6">
                    <div class="form-group">

                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="form-group">

                    </div>
                </div>
                <div class="col-md-12">
                    <div class="row">
                        @*<div class="col-md-6">
                                <div class="form-group">
                                    <span class="fa fa-image">Video By Sales:</span>
                                    <div class="py-4" id="appvideosales">


                                    </div>
                                </div>
                            </div>*@
                        <div class="col-md-6">
                            <div class="form-group">
                                <span class="fa fa-image">Video By Technic:</span>
                                <div class="py-4" id="appvideotech">


                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                @*<div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span class="fa fa-image">Image By Sales:</span>

                                </div>
                            </div>
                        </div>
                        <div class="row" id="boximage">

                        </div>
                    </div>*@
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="fa fa-image">Image By Technic:</span>

                            </div>
                        </div>
                    </div>
                    <div class="row" id="boximagetechnic">

                    </div>
                </div>

            </div>
             <div id="sidmd">
                                <div class="card-header">
                                    <i class="fa fa-table"></i>พิจารณา โอนย้ายสินค้าเข้า Damage <li id="clickme6" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                                </div>
                                <div class="col-md-12" id="myDIV6" style="display:block">

                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <span> <i class="fa fa-pencil"></i>จำนวนขออนุมัติโอนย้ายเข้า Damage</span>
                                                <span>

                                                    <input type="number" id="_dmqty_md" disabled="disabled" />
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">

                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                    </div>

                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <span> <i class="fa fa-sort-down"></i>เลือกสถานะ โอนย้ายเข้า Damage</span>
                                                <span>
                                                    <select class="bar" id="_butstus_md"></select>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-8" style="display:none" id="displaydatebu">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <span> <i class="fa fa-pencil"></i> วันที่อนุมัติ โอนย้ายเข้า Damage: </span>
                                                    <span id="mdappdate"> </span>


                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <span> <i class="fa fa-pencil"></i> ผู้อนุมัติ โอนย้ายเข้า Damage: </span>
                                                    <span id="mdappuser"> </span>


                                                </div>
                                            </div>
                                        </div>


                                    </div>


                                    <div class="row">
                                        <div class="col-md-6">
                                            <span> <i class="fa fa-pencil"></i> หมายเหตุเพิ่มเติม(รับได้500ตัวอักษร) :</span>
                                            <div class="form-group">

                                                <span><textarea class="form-control" rows="6" cols="100" id="remakemd" maxlength="500" placeholder="หมายเหตุ"></textarea></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">

                                                <button class="btn-info" id="_btnsaveapprove_md">บันทึกผล</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
            </div>
            <div class="card-header" id="headerme5">
                <i class="fa fa-table"></i>Head of PM พิจารณา โอนย้ายสินค้าเข้า Damage <li id="clickme5" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="col-md-12" id="myDIV5" style="display:block">

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>จำนวนขออนุมัติโอนย้ายเข้า Damage</span>
                            <span>

                                <input type="number" id="_dmqty" disabled="disabled" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>

                <div class="row">
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-sort-down"></i>เลือกสถานะ โอนย้ายเข้า Damage</span>
                            <span>
                                <select class="bar" id="_butstus"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-8" style="display:block" id="displaydatebu">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> วันที่อนุมัติ โอนย้ายเข้า Damage: </span>
                                <span id="buappdate"> </span>


                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> ผู้อนุมัติ โอนย้ายเข้า Damage: </span>
                                <span id="buappuser"> </span>


                            </div>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>ต้องให้คลังดำเนินการ:</span>
                            <span>
                                <input type="text" id="_pmafterapp" maxlength="200" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> เปลี่ยนสินค้าเบอร์ใหม่ทดแทน P/N :</span>
                            <span>
                                <input type="text" id="_pmnewpn" />
                            </span>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-6">
                        <span> <i class="fa fa-pencil"></i> หมายเหตุเพิ่มเติม(รับได้500ตัวอักษร) :</span>
                        <div class="form-group">

                            <span><textarea class="form-control" rows="6" cols="100" id="remakebu" maxlength="500" placeholder="หมายเหตุ"></textarea></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsaveapprovebu">บันทึกผล</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-header">
                <i class="fa fa-table"></i>ผลการพิจารณา (Product Manage)<li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="col-md-12" id="myDIV1" style="display:block">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-sort-down"></i>ผลการพิจารณา</span>
                            <span>
                                <select class="bar" id="_pmtstus"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่PM พิจารณา:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_pmdate" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>ต้องให้คลังดำเนินการ:</span>
                            <span>
                                <input type="text" id="_pmafterapp" maxlength="200" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> เปลี่ยนสินค้าเบอร์ใหม่ทดแทน P/N :</span>
                            <span>
                                <input type="text" id="_pmnewpn" />
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row" style="display:none">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>จำนวนที่รับเคลม</span>
                            <span>

                                <input type="number" id="_pmqty" disabled="disabled" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row" style="display:none">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์ WR,WE,WF:</span>
                            <span>
                                <select class="bar" id="_anlysstatustecpm"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม:</span>
                            <span>
                                <select class="bar" id="_anlysafterprotecpm"></select>
                            </span>
                        </div>
                    </div>
                    <div id="displpm" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                            <span>
                                @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                <input type="text" id="_scrapdatetecpm" />
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                </div>


                <div class="row" style="display:none">
                    <span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                    <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="a">Specific<br>
                                <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="c">Good Will<br>

                            </form>

                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="b">Manufacturing Defect<br>
                                <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="d">Wrong Using<br>

                            </form>

                        </div>
                    </div>

                    <div class="col-md-2">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="e">Handing Damage<br>
                                <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="f">Other<br>

                            </form>

                        </div>
                    </div>
                    <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                </div>




                <div class="col-md-12">
                    <span> <i class="fa fa-pencil"></i> ต้องให้คลังดำเนินการ :</span>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="checkbox" name="optionpm1" value="1" style="zoom: 2.5;margin-left: -10px;" id="optionpm1">
                                <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนไปขายได้ปกติ</span>
                            </div>
                            <div class="col-md-6">
                                <span>ระบุจำนวนโอนเข้าพื้นที่ขายปกติ(Ready for Sale)</span> <input type="number" name="vehicle" min="0" id="optionpmtext1" disabled="disabled">
                            </div>

                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="checkbox" name="optionpm2" value="2" style="zoom: 2.5;margin-left: -10px;" id="optionpm2">
                                <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนไปขายตามสภาพ</span>
                            </div>
                            <div class="col-md-6">
                                <span>ระบุจำนวน โอนเข้า Clearance</span> <input type="number" name="vehicle" min="0" id="optionpmtext2" disabled="disabled">
                            </div>

                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="checkbox" name="optionpm3" value="3" style="zoom: 2.5;margin-left: -10px;" id="optionpm3">
                                <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนออกไปซ่อม</span>
                            </div>
                            <div class="col-md-6">
                                <span>ระบุจำนวน โอนเข้า Rework</span>  <input type="number" name="vehicle" min="0" id="optionpmtext3" disabled="disabled">
                            </div>

                        </div>

                    </div>

                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="checkbox" name="optionpm4" value="4" style="zoom: 2.5;margin-left: -10px;" id="optionpm4">
                                <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนออกไปรอทำลาย</span>
                            </div>
                            <div class="col-md-4">
                                <span>ระบุจำนวน โอนเข้า DM</span>  <input type="number" name="vehicle" min="0" id="optionpmtext4" disabled="disabled">
                            </div>

                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="checkbox" name="optionpm5" value="5" style="zoom: 2.5;margin-left: -10px;" id="optionpm5">
                                <span style="margin: -30px 41px 32px;position: absolute;">อื่นๆ</span>
                            </div>
                            <div class="col-md-6">
                                <span>ระบุสิ่งที่ต้องการ(รับได้50ตัวอักษร)</span>   <input type="text" name="vehicle" id="optionpmtext5" maxlength="50" disabled="disabled">
                            </div>

                        </div>

                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <span> <i class="fa fa-pencil"></i> หมายเหตุจาก PM :</span>
                        <div class="form-group">

                            <span><textarea class="form-control" rows="6" cols="100" id="remakepm" maxlength="500" placeholder="หมายเหตุ"></textarea></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsaveapprove">บันทึกผล</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card-header">
                <i class="fa fa-table"></i>ผลการพิจารณา (Technic 2) <li id="clickme2" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV2" style="display:none">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class='fa fa-user'></i> รับรองการตรวจสอบโดย:</span>

                                <span>
                                    <input type="text" id="_name2tec" disabled="disabled" style="background: border-box border-box; color: blue;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่เทคนิคพิจารณา:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_appdatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะ:</span>
                                <span>
                                    <select class="bar" id="_apprvststus"></select>
                                </span>
                            </div>
                        </div>
                    </div>
                    <span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                    <div class="row">

                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="atech">Specific<br>
                                    <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="ctech">Good Will<br>

                                </form>

                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="btech">Manufacturing Defect<br>
                                    <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="dtech">Wrong Using<br>

                                </form>

                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="etech">Handing Damage<br>
                                    <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="ftech">Other<br>

                                </form>

                            </div>
                        </div>
                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustectech"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotectech"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displtech" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                                <span>
                                    @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                    <input type="text" id="_scrapdatetectech" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea class="form-control" rows="6" cols="100" id="remaketec2" placeholder="หมายเหตุ"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <button class="btn-info" id="_btnsaveconsider" style="display:none">บัททึกผลการพิจารณา</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-header">
                <i class="fa fa-table"></i>ผลการพิจารณา (Technic 1) <li id="clickme3" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV3" style="display:none">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> ช่างที่รับผิดชอบ:</span>
                            <span>
                                <input class="bar" id="_tecwork">
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Shelf Location:</span>
                            <span>
                                <input type="text" id="_shelfloctec" />
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> บันทึกโดย:</span>
                            <span>
                                <input type="text" id="_nametec1" disabled="disabled" style="background: border-box border-box; color: blue;" />
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่วิเคราะห์ปัญหา:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_anlysdatetec1" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> ดำเนินการ:</span>
                            <span>
                                <select class="bar" id="_perfromtec1"></select>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    @*<div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์ WR,WE,WF:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustec1"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotec1"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displ" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่ทำลาย:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />
                                </span>
                            </div>
                        </div>*@
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <span><textarea class="form-control" rows="6" cols="100" id="remaketec1" placeholder="ผลการตรวจสอบ"></textarea></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsavecheck" style="display:none">บันทึกผลการตรวจสอบ & วิเคาระห์</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="card-header" style="display:none">
                <i class="fa fa-table"></i>Tech รับสินค้า เข้าK08 <li id="clickme4" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV4" style="display:none">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการรับสินค้า:</span>
                                <span>
                                    <select class="bar" id="_proceedtotec"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ผู้รับสินค้า:</span>
                                <span>
                                    <input type="text" id="_rcvbyte" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่รับสินค้า:</span>
                                <span>

                                    <input type="date" id="_rcvdatetec" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> จำนวนที่รับ:</span>
                                <span>

                                    <input type="text" id="_rvqtytec" />
                                </span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Claim date:</span>
                                <span>
                                    <input type="text" id="_clmdatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Due date:</span>
                                <span>
                                    <input type="text" id="_duedatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                @*<span> <i class="fa fa-pencil"></i> UOM:</span>
                                    <span>
                                        <input type="text" id="_rcuom" />
                                    </span>*@
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea class="form-control" rows="6" cols="100" id="causeclaimtec" placeholder="หมายเหตุ"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> Admin:</span>
                                <span>
                                    <input type="text" id="_admintec" style="background: border-box border-box; color: blue;" disabled="disabled">
                                </span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                @*<span> <i class="fa fa-calendar"></i> วันที่ตรวจสอบ:</span>
                                                    <span>
                                        <input type="date" data-date-format="dd/mm/yy" id="_datechecktec" />
                                    </span>*@
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                @*<button class="btn-info" id="_btnsavecheck">บัททึกการตรวจสอบ</button>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="myModalzoom" class="modalx" style="z-index: 11;">

        <!-- The Close Button -->
        @*<span class="close">&times;</span>*@

        <!-- Modal Content (The Image) -->
        <img class="modal-contentx" id="img01">
        <div class="modal-contentx" id="img01" style="background-color: #191919;"><button class="btn btn-secondary" type="button" data-dismiss="modal" id="closeimg" style="margin-left: 91%;">Close</button></div>
        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>

    </div>
    <input type="text" hidden id="_hqty" />
    <input type="text" hidden id="_cmnosub" />
    <input type="hidden" id="_uderlogin" value="@user" />
    <input type="hidden" id="_udertype" value="usertype" />
    <input type="hidden" id="_t1" />
    <input type="hidden" id="_t2" />
    <input type="hidden" id="_t3" />
    <input type="hidden" id="_clmsendpm" />
    <!-- Modal -->
    <!-- Modal -->
    <div class="modal fade" id="myModalWarning" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content " id="ColorboxError">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" style="color:black;">Message Error</h4>
                </div>
                <div class="modal-body">
                    <div id="textAlertWarning">Some text in the modal.</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
    <!-- EndModal -->


    <script type="text/javascript">
    $("#_itemnosearch").autocomplete({
        selectFirst: true,
        autoFocus: true,
        timeout: 100000,
        source: function (request, response) {
            var param = {
                Name: $('#_itemnosearch').val(),
                XvalCompany: $('#_company').val()
            };

            $.ajax({
                url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                data: JSON.stringify(param),
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function (data) { return data; },
                success: function (data) {
                    response($.map(data.slice(0, 20), function (item) {
                        return {
                            value: item
                        }
                    }))
                },
                error: function (XMLhttpsRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });

        },
        minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
    });
    $("#_pmnewpn").autocomplete({
        selectFirst: true,
        autoFocus: true,
        timeout: 100000,
        source: function (request, response) {
            var param = {
                Name: $('#_pmnewpn').val(),
                XvalCompany: $('#_company').val()
            };
            $.ajax({
                url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                data: JSON.stringify(param),
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataFilter: function (data) { return data; },
                success: function (data) {
                    response($.map(data.slice(0, 20), function (item) {
                        return {
                            value: item
                        }
                    }))
                },
                error: function (XMLhttpsRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });


        },

        minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
    });
    $(document).ready(function () {
        function commaSeparateNumber(val) {
            while (/(\d+)(\d{3})/.test(val.toString())) {
                val = val.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
            }
            return val;
        }

        var udertype = $("#_udertype").val();
        var Userlogin = $("#_uderlogin").val();
        if (udertype == "3") {
            $.ajax({
                url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                data: {
                    Usertype: udertype,
                    // Userlogin: Userlogin
                    Userlogin: Userlogin
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    $("#tile").text(data.Getdata[0].val.Status)
                    $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                    //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                    $("#counttec1").css("display", "none");
                }
            });
        }
        // getdate()
        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 38
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {

                var select = $("#_statusbu");
                select.children().remove();
                var selectmd = $("#_butstus_md");
                selectmd.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));


                });

                $(data).each(function (index, item) {


                    selectmd.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));

                });
                $("#_statusbu").val("3")

                var select = $("#_butstus");
                select.children().remove();

                var selectmd = $("#_butstus_md");
                selectmd.children().remove();


                $(data).each(function (index, item) {
                    if (item.CODE != "3") {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));

                    }
                });
                $(data).each(function (index, item) {
                    if (item.CODE != "3") {

                        selectmd.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    }
                });
            }
        });
        $.ajax({
            url: '@Url.Action("GetdataBuManager", "ProcessApprove_WHDM_MD")',
            data: {
                UserId: Userlogin
                // UserId: "thuzzphonn"
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                console.log(data)
                var select = $("#_buhead");
                select.children().remove();

                $(data).each(function (index, item) {

                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                });

            }
        });
        $.ajax({
            url: '@Url.Action("GetdataBuStkgroup", "ProcessApprove_WHDM_MD")',
            data: {
                UserId: Userlogin
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                console.log(data)

                var select = $("#_stkgrp");
                select.children().remove();
                select.append($("<option>").val("ALL").text("ALL"));
                $(data).each(function (index, item) {

                    select.append($("<option>").val(item.STKGRP).text(item.STKGRP + "/" + item.GRPNAM));
                });
            }
        });
        $('#SrcProcessApprovewhbu').css("background-color", "rgb(9, 183, 9)");
        $('#SrcInvoiceHistory_Sc').css("background-color", "");

        function addDays(theDate, days) {
            return new Date(theDate.getTime() + days * 24 * 60 * 60 * 1000);
        }
        var newDate = addDays(new Date(), 15);
        $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
        $("#_duedatetec").attr("disabled", "disabled");
        $("#_clmdatetec").attr("disabled", "disabled");
        $("#_clmdatetec").css({ "background": "border-box", "color": "blue" });
        $("#_duedatetec").css({ "background": "border-box", "color": "blue" });

        var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
        n = new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();
        if (d < 10) {
            d = "0" + d;
        }
        if (m < 10) {
            m = "0" + m;
        }
        $("#_clmdatetec").val(d + "/" + m + "/" + y);

        ///fa fa-calendar///
        var today = new Date();

        $('#_rcvdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));

        $('#_anlysdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
        $('#_scrapdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
        $('#_appdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
        $('#_pmdate').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));


        function getdate() {
            var tt = document.getElementById('_clmdatetec').value;

            var date = new Date(tt);
            var newdate = new Date(date);

            newdate.setDate(newdate.getDate() + 15);

            var dd = newdate.getDate();
            var mm = newdate.getMonth() + 1;
            var y = newdate.getFullYear();

            var someFormattedDate = d + '/' + m + '/' + y;
            document.getElementById('_duedatetec').value = someFormattedDate;
        }

        CheckUsrClmStaff()
        function CheckUsrClmStaff() {
            var userlog = $("#_uderlogin").val();
            $.ajax({
                url: '@Url.Action("CheckUsrClmStaff", "GetdataCenter")',
                data: {
                    Name: userlog
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    $("#_udertype").val(data.UsrClmStaff);

                    var type = $("#_udertype").val();

                    if (type == "3") {

                        // alert(type)
                        $("#_statusbu").val("3");

                        var UserId = $("#_uderlogin").val();
                        $.ajax({
                            url: '@Url.Action("GetProductdata", "GetdataCenter")',
                            data: {
                                UserId: UserId
                                // UserId: "thuzzphonn"
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_PM");
                                select.children().remove();
                                select.append($("<option>").val('').text('ALL PM'));
                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                });



                                var valbu = $("#_buhead").val();
                                var valpm = $("#_PM").val();
                                var valststus = $("#_statusbu").val();
                                var valDoc = $("#searchclaimno").val();
                                var valcom = $("#_company").val();
                                var valstkgrp = $("#_stkgrp").val();
                                var valstatdate = $("#_statdate").val();
                                var valenddate = $("#_enddate").val();
                                var valstatdatecus = $("#_statdate").val();
                                var valenddatecus = $("#_enddate").val();
                                var itemno = $("#_itemnosearch").val();
                                if (itemno != "") {
                                    itemno = splitval(itemno);
                                } else {
                                    itemno = "";
                                }
                                GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdate, valenddate)
                                //Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp)
                            }
                        });

                        $.ajax({
                            url: '@Url.Action("GetdataBuManager", "ProcessApprove_WHDM_MD")',
                            data: {
                                UserId: UserId
                                // UserId: "thuzzphonn"
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_buhead");
                                select.children().remove();

                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                });

                                //var valpm = $("#_PM").val();
                                //var valststus = $("#_status").val();
                                //var valDoc = $("#searchclaimno").val();
                                //var valcom = $("#_company").val();
                                //var valstkgrp = $("#_stkgrp").val();
                                //var valstatdate = $("#_statdate").val();
                                //var valenddate = $("#_enddate").val();
                                //var valstatdatecus = $("#_statdate").val();
                                //var valenddatecus = $("#_enddate").val();
                                //var itemno = $("#_itemnosearch").val();
                                //if (itemno != "") {
                                //    itemno = splitval(itemno);
                                //} else {
                                //    itemno = "";
                                //}
                                //GetclmiApproveDM(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdate, valenddate)
                                //Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp)
                            }
                        });
                    }
                    if (data.UsrClmStaff != "3") {
                        $("#_admintec").val(userlog);
                        $("#_nametec1").val(userlog);
                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                        $("#_btnsaveconsider").attr("disabled", "disabled");

                        $("#_PM").attr("disabled", "disabled");  // Product Manager
                        $("#_pmdate").attr("disabled", "disabled"); //วันที่PM พิจารณา
                        $("#_pmtstus").attr("disabled", "disabled"); //สถานะอนุมัติ
                        $("#remakepm").attr("disabled", "disabled");
                        $("#_pmnewpn").attr("disabled", "disabled");

                        $("#_btnsaveapprove").attr("disabled", "disabled");
                        $("#_btnsavecheck").removeAttr('disabled');



                        //alert(data.UsrClmStaff)
                        ///ตรวจสอบรับสินค้าเคลม////
                        $("#_btnsavecheck").attr("disabled", "disabled");
                        $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                        $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                        $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                        $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                        // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                        $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                        $("#_duedatetec").attr("disabled", "disabled"); //Due date
                        $("#_admintec").attr("disabled", "disabled");//Admin:
                        //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                        $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                        $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                        $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                        ///Technic 1 : วิเคราะห์สินค้าเคลม///

                        $("#_nametec1").attr("disabled", "disabled");//ตรวจสอบโดย
                        $("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                        $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                        $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                        $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                        $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ
                        $("#_scrapdatetec1").attr("disabled", "disabled");//วันที่ทำลาย
                        $("#_btnsavecheck").attr("disabled", "disabled");
                        ///Technic 2 : ผลการพิจารณา///
                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                        $("#_btnsaveconsider").attr("disabled", "disabled");
                    }
                    else if (data.UsrClmStaff == "3") {
                        $("#_PM").removeAttr('disabled');  // Product Manager
                        $("#_pmdate").removeAttr('disabled'); //วันที่PM พิจารณา
                        $("#_pmtstus").removeAttr('disabled'); //สถานะอนุมัติ
                        $("#remakepm").removeAttr('disabled');
                        $("#_pmnewpn").removeAttr('disabled');

                        $("#_btnsaveapprove").removeAttr('disabled');
                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                        $("#_btnsaveconsider").attr("disabled", "disabled");
                        $("#_btnsavecheck").removeAttr('disabled');



                        //alert(data.UsrClmStaff)
                        ///ตรวจสอบรับสินค้าเคลม////
                        $("#_btnsavecheck").attr("disabled", "disabled");
                        $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                        $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                        $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                        $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                        // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                        $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                        $("#_duedatetec").attr("disabled", "disabled"); //Due date
                        $("#_admintec").attr("disabled", "disabled");//Admin:
                        //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                        $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                        $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                        $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                        ///Technic 1 : วิเคราะห์สินค้าเคลม///

                        $("#_nametec1").attr("disabled", "disabled");//ตรวจสอบโดย
                        $("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                        $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                        $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                        $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                        $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ
                        $("#_scrapdatetec1").attr("disabled", "disabled");//วันที่ทำลาย
                        $("#_btnsavecheck").attr("disabled", "disabled");
                        ///Technic 2 : ผลการพิจารณา///
                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                        $("#_btnsaveconsider").attr("disabled", "disabled");

                    }
                }
            });



        }

        $("#clickmeheader").on("click", function (e) {

            myFunctionheader();
        });
        function myFunctionheader() {
            var x = document.getElementById("myDIVheader");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $("#clickme").on("click", function (e) {

            myFunction();
        });
        function myFunction() {
            var x = document.getElementById("myDIV");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $("#clickme1").on("click", function (e) {

            myFunction1();
        });
        function myFunction1() {
            var x = document.getElementById("myDIV1");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $("#clickme2").on("click", function (e) {

            myFunction2();
        });
        function myFunction2() {
            var x = document.getElementById("myDIV2");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $('#_itemnosearch').on("click", function (e) {
            var com = $('#_company').val();
            if (com == 'ALL') {
                alert("กรุณาเลือก Company ก่อนค้นหา item");
                $('#_itemnosearch').val("");
                return false;
            }

        });
        $('#_itemnosearch').on("keyup", function (e) {
            var com = $('#_company').val();
            if (com == 'ALL') {
                alert("กรุณาเลือก Company ก่อนค้นหา item");
                $('#_itemnosearch').val("");
                return false;
            }

        });
        $("#clickme3").on("click", function (e) {

            myFunction3();
        });
        function myFunction3() {
            var x = document.getElementById("myDIV3");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $("#clickme4").on("click", function (e) {

            myFunction4();
        });
        $("#clickme5").on("click", function (e) {

            myFunction5();
        });
        function myFunction5() {
            var x = document.getElementById("myDIV5");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        function myFunction4() {
            var x = document.getElementById("myDIV4");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        $("#clickme6").on("click", function (e) {

            myFunction6();
        });
        function myFunction6() {
            var x = document.getElementById("myDIV6");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
        function splitval(_val) {
            var _splito = "";
            _splito = _val.split('|');

            return _splito[0];
        }
        function addCommas(nStr) {
            nStr += '';
            x = nStr.split('.');
            x1 = x[0];
            x2 = x.length > 1 ? '.' + x[1] : '';
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + ',' + '$2');
            }
            return x1 + x2;
        }
        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 1
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                var select = $("#_perfromtec1");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {
                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                //  var CUSCODt = $("#CUSCOD option:selected").text();
            }
        });
        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 2
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                var select = $("#_proceedtotec");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {
                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                //  var CUSCODt = $("#CUSCOD option:selected").text();
            }
        });


        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 32
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {

                var select = $("#_anlysstatustec1");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });


                var select = $("#_anlysstatustecpm");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                var select = $("#_anlysstatustectech");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                //  var CUSCODt = $("#CUSCOD option:selected").text();
            }
        });


        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 33
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                console.log(data)
                var select = $("#_anlysafterprotec1");

                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });

                var select = $("#_anlysafterprotecpm");

                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));

                $(data).each(function (index, item) {
                    if (item.CODE != "4") {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    }
                });

                var select = $("#_anlysafterprotectech");

                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
            }
        });

        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 35
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {

                var select = $("#_pmtstus");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                //  var CUSCODt = $("#CUSCOD option:selected").text();
            }
        });
        $.ajax({
            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
            data: {
                Name: 9
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {

                var select = $("#_apprvststus");
                select.children().remove();
                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                });
                //  var CUSCODt = $("#CUSCOD option:selected").text();
            }
        });
        function splitval(_val) {
            var _splito = "";
            _splito = _val.split('|');

            return _splito[0];
        }
        $("#_btnsearch").on("click", function () {
            //var valpm = $("#_PM").val();
            //  var valststus = $("#_status").val();
            var valbu = $("#_buhead").val();
            var valpm = $("#_PM").val();
            var valststus = $("#_statusbu").val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            //  GetClimtemp(claimnokey)
            var valstkgrp = $("#_stkgrp").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();

            var valstatdatecus = $("#_statdatecus").val();
            var valenddatecus = $("#_enddatecus").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
        });
        $("#_btnsearchclaimno").on("click", function () {
            //var claimnokey = $(this).val();
            var valbu = $("#_buhead").val();
            var valpm = $("#_PM").val();
            var valststus = $("#_statusbu").val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            //  GetClimtemp(claimnokey)
            var valstkgrp = $("#_stkgrp").val();
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp)
        });

        $("#searchclaimno").on("keyup", function (e) {
            //var claimnokey = $(this).val();
            var valbu = $("#_buhead").val();
            var valpm = $("#_PM").val();
            var valststus = $("#_statusbu").val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            var valstkgrp = $("#_stkgrp").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();
            var valstatdatecus = $("#_statdatecus").val();
            var valenddatecus = $("#_enddatecus").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }

            if (e.keyCode == 13) {
                GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
                //Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp)
                // GetClimtemp(claimnokey)
            }
        });

        $("#_PM").on("change", function (e) {

            $("#Nospankey").text("");
            $("#subNospan").text("");
            $("#_cusno").text("");
            $("#_cusname").text("");
            $("#slmcod").text("");
            $("#sslmnam").text("");
            $("#_itemno").text("");
            $("#_description").text("");
            $("#_uom").text("");
            $("#_invoiceno").text("");
            $("#_psdate").text("");
            $("#_invoiceqty").text("");
            $("#_invoicelineamt").text("");
            $("#_invoicelinedis").text("");
            $("#_invoicelinedisamt").text("");
            $("#_stkgup").text("");
            $("#requestby").text("");
            $("#requestdate").text("");
            $("#boximage").html("");
            ////Get input display ///////
            $("#_claimqty").text("");//Qty//
            $("#_workda").text("");//ระยะใช้งาน//
            $("#causeclaim").text("");//เหตุผลเคลม//
            $("#_proceedto").text("");//ดำเนินการ//
            $("#_statusclaim").text(""); //Status///
            $("#_claimnosub").text("");
            $("#_claimsupqty").text("");
            $("#_claimcnitcost").text("");
            $("#_claimtotcost").text("");
            $("#_claimnosupqty").text("");
            $("#_claimgoodqty").text("");
            //Admin//
            $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
            $("#_rcvbyte").val("");      //ผู้รับสินค้าเคลม
            $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
            $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
            $("#_clmdatetec").val("");//Claim date:
            $("#_duedatetec").val(""); //Due date
            $("#_admintec").val("");//Admin:
            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
            $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
            //Tech1//
            $("#_nametec1").val("");//ตรวจสอบโดย
            $("#_anlysdatetec1").val("");     //วันที่วิเคราะห์ปัญหา
            $("#_perfromtec1").val(""); //ดำเนินการ
            $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
            $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
            $("#_scrapdatetec1").val("");
            $("#_shelfloctec").val("");//Shelf Location
            $("#_tecwork").val("");//ช่างที่รับผิดชอบ:
            $("#remaketec1").val("");
            //Tech2//
            $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
            $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
            $("#_apprvststus").val("0"); // สถานะ
            $("#remaketec2").val("");   //หมายเหตุ
            $("#_pmdate").val("");  //วันที่PM พิจารณา
            $("#_pmtstus").val("0"); //สถานะอนุมัติ
            $("#remakepm").val("");
            $("#_pmnewpn").val("");
            //PM//
            $("#optionpm1").attr('checked', true);
            $("#optionpmtext1").val("");
            $("#optionpmtext1").attr("disabled", "disabled");

            $("#optionpm2").attr('checked', false);
            $("#optionpmtext2").val("");
            $("#optionpmtext2").attr("disabled", "disabled");

            $("#optionpm3").attr('checked', false);
            $("#optionpmtext3").val("");
            $("#optionpmtext3").attr("disabled", "disabled");

            $("#optionpm4").attr('checked', false);
            $("#optionpmtext4").val("");
            $("#optionpmtext4").attr("disabled", "disabled");

            $("#optionpm5").attr('checked', false);
            $("#optionpmtext5").val("");
            $("#optionpmtext5").attr("disabled", "disabled");


            var valbu = $("#_buhead").val();
            var valpm = $(this).val();
            var valststus = $("#_statusbu").val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            var valstkgrp = $("#_stkgrp").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();
            var valstatdatecus = $("#_statdate").val();
            var valenddatecus = $("#_enddate").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
        });
        $("#_company").on("change", function (e) {
            var valbu = $("#_buhead").val();
            var valpm = $("#_PM").val();
            var valstkgrp = $("#_stkgrp").val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            var valststus = $("#_statusbu").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();
            var valstatdatecus = $("#_statdate").val();
            var valenddatecus = $("#_enddate").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
        });
        $("#_stkgrp").on("change", function (e) {
            var valbu = $("#_buhead").val();
            var valpm = $("#_PM").val();
            var valstkgrp = $(this).val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            var valststus = $("#_statusbu").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();
            var valstatdatecus = $("#_statdate").val();
            var valenddatecus = $("#_enddate").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
        });
        $("#_statusbu").on("change", function (e) {
            var valpm = $("#_PM").val();
            var valststus = $(this).val();
            var valDoc = $("#searchclaimno").val();
            var valcom = $("#_company").val();
            var valstkgrp = $("#_stkgrp").val();
            var valstatdate = $("#_statdate").val();
            var valenddate = $("#_enddate").val();
            var valstatdatecus = $("#_statdate").val();
            var valenddatecus = $("#_enddate").val();
            var itemno = $("#_itemnosearch").val();
            if (itemno != "") {
                itemno = splitval(itemno);
            } else {
                itemno = "";
            }
            var valbu = $("#_buhead").val();
            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
        });
        function GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus) {
            clearval()

            if (valststus == null) {
                valststus = "3";
            }
            if (valststus == "undefined") {
                valststus = "3";
            }
            if (valstkgrp == null) {
                valstkgrp = "ALL";
            }
            if (valstkgrp == "undefined") {
                valstkgrp = "ALL";
            }
            var userlogin = $("#_uderlogin").val();
            $.ajax({
                url: '@Url.Action("GetClimWHdataApproveDM_MD", "GetdataCenter")',
                data: {
                    inBUCODE: userlogin,
                    inPM: valpm,
                    inDOC: valDoc,
                    inCOM: valcom,
                    inSTATS: valststus,
                    instkgrp: valstkgrp,
                    instatdate: valstatdate,
                    inenddate: valenddate,
                    instatdatecus: valstatdatecus,
                    inenddatecus: valenddatecus,
                    initem: itemno
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    // console.log(data);
                    $('#fixed-table-container-2  tbody:last-child').html("");
                    if (data.Getdata.length > 0) {

                        var SubmithtmlPage = '';
                        var ADMIN_ANLYS_STATUS = '';
                        var TECH1_PROCESS_STATUS = '';
                        var TECH2_PROCESS_STATUS = '';
                        var TECH2_ANLYS_STATUS = '';
                        var PM_PROCESS_STATUS = '';
                        var CLM_STATUS = '';
                        var _BtnApp = '';
                        var BU_APPRV_STATUS = '';
                        var MD_APPRV_STATUS = '';
                        for (var i = 0; i < data.Getdata.length; i++) {
                            ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                            TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                            TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                            TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                            PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                            CLM_STATUS = data.Getdata[i].val.CLM_STATUS;
                            var qtydm = data.Getdata[i].val.PM_Optiontext4;
                            var BU_Ref = data.Getdata[i].val.CLM_BU_Ref;
                            _BtnApp = data.Getdata[i].val.F_BtnApp;
                            BU_APPRV_STATUS = data.Getdata[i].val.BU_APPRV_STATUS;
                            MD_APPRV_STATUS = data.Getdata[i].val.MD_APPRV_STATUS;
                            var totcost = data.Getdata[i].val.totcost;
                            var pmcode =data.Getdata[i].val.PMCODE;
                            //alert(BU_APPRV_STATUS)
                            SubmithtmlPage = '<tr   fax="1"   cmno="' + data.Getdata[i].val.CLM_ID + '"  foc="' + data.Getdata[i].val.CLM_FOC + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">';
                            if (_BtnApp == "2") {
                                SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1" cmno="' + data.Getdata[i].val.CLM_ID + '" foc="' + data.Getdata[i].val.CLM_FOC + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" rcvdate= "' + data.Getdata[i].val.CLM_RCVDATE + '"rcvby= "' + data.Getdata[i].val.CLM_RCVBY + '">' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                            } else {
                                // SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1" cmno="' + data.Getdata[i].val.CLM_ID + '" foc="' + data.Getdata[i].val.CLM_FOC + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" rcvdate= "' + data.Getdata[i].val.CLM_RCVDATE + '"rcvby= "' + data.Getdata[i].val.CLM_RCVBY + '">' + data.Getdata[i].val.CLM_NO_SUB + '   <span class="fa fa-edit gi-3x"></span></td>';
                                SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1" cmno="' + data.Getdata[i].val.CLM_ID + '" foc="' + data.Getdata[i].val.CLM_FOC + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" rcvdate= "' + data.Getdata[i].val.CLM_RCVDATE + '"rcvby= "' + data.Getdata[i].val.CLM_RCVBY + '">' + data.Getdata[i].val.CLM_NO_SUB + '  </td>';
                            }
                            // SubmithtmlPage += '<td><button type="reset" id="delclmtemp" style="min-width: 50px;"  clmID="' + data.Getdata[0].val.CLM_ID + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '">X</button></td>';
                            SubmithtmlPage += '<td>' + BU_Ref + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + "<br>" + data.Getdata[i].val.STKDES + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + '</td>';

                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_REQQTY + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_BY + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_Dep_BY + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_DATE + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_TECH1_QTY + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_TECH2_QTY + '</td>';
                            SubmithtmlPage += '<td>' + qtydm + '</td>';
                            SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.UNITCOST) + '</td>';
                            SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.totcost) + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.PM_NAME + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.PM_APPRV_DATE + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_CAUSE + '</td>';
                            //SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                            //  alert(PM_PROCESS_STATUS)
                            if (CLM_STATUS != "8") {
                                // SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                //if (ADMIN_ANLYS_STATUS == "0") {
                                //    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                //} else if (ADMIN_ANLYS_STATUS == "1") {
                                //    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                //}
                                if (TECH1_PROCESS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                } else if (TECH1_PROCESS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                }
                                if (TECH2_ANLYS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                } else if (TECH2_ANLYS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                }
                                else if (TECH2_ANLYS_STATUS == "2") {
                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                }
                                else if (TECH2_ANLYS_STATUS == "3") {
                                    SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                }
                                if (PM_PROCESS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติ เคลม Supplier"></span></td>';
                                } else if (PM_PROCESS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติ เคลม Supplierเรียบร้อย"></span></td>';

                                } else if (PM_PROCESS_STATUS == "2") {
                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ เคลม Supplier"></span></td>';
                                }
                                else if (PM_PROCESS_STATUS == "3") {
                                    SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ส่งตรวจสอบใหม่"></span></td>';
                                }
                                if (BU_APPRV_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติโอนเข้า Damage"></span></td>';
                                } else if (BU_APPRV_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติโอนเข้า Damageเรียบร้อย"></span></td>';

                                } else if (BU_APPRV_STATUS == "2") {
                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติโอนเข้า Damage"></span></td>';
                                }
                                if (pmcode != 'OES' || pmcode != 'BT' || pmcode != 'CP' || pmcode != 'NC' || pmcode != 'PM133' || pmcode != 'PPT' || pmcode != 'TPC' || pmcode != 'UC' || pmcode != 'VR') {
                                    if (parseInt(totcost) > 10000) {
                                        if (MD_APPRV_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติโอนเข้า Damage"></span></td>';
                                        } else if (MD_APPRV_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติโอนเข้า Damageเรียบร้อย"></span></td>';

                                        } else if (MD_APPRV_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติโอนเข้า Damage"></span></td>';
                                        }
                                    } else {
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                    }

                                } else {

                                    if (parseInt(totcost) > 10000) {
                                        if (MD_APPRV_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติโอนเข้า Damage"></span></td>';
                                        } else if (MD_APPRV_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติโอนเข้า Damageเรียบร้อย"></span></td>';

                                        } else if (MD_APPRV_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติโอนเข้า Damage"></span></td>';
                                        }
                                    } else {
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                    }
                                }
                              
                              
                            }
                            else {

                                SubmithtmlPage += '<td style="color:red;">ยกเลิกการเคลม</td>';
                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                //SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                            }
                            SubmithtmlPage += '</tr>';
                            //$('table #_tbclmline  tbody:last-child').append(SubmithtmlPage);
                            // $('#_tbclmline  tbody:last-child').append(SubmithtmlPage);



                            SubmithtmlPage += '</tr>';
                            $('#fixed-table-container-2  tbody:last-child').append(SubmithtmlPage);
                        }
                    } else {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("ไม่มีรายการที่ต้องการค้นหา");
                        $("#myModalWarning").modal();
                        //  location.reload();
                    }
                    var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                }
            });
        }

        $('#_anlysafterprotecpm').change(function () {
            var _val = $(this).val();
            if (_val == "1") {
                $('#displpm').css("display", "block");
                var newDate = addDays(new Date(), 90);
                $("#_scrapdatetecpm").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //วันที่ทำลาย
                $("#_scrapdatetecpm").attr("disabled", "disabled");
            } else {
                $('#displ').css("display", "none");
                $("#_scrapdatetecpm").val("");
                $("#_scrapdatetecpm").attr("disabled", "disabled");
            }
        });

        $('#_anlysafterprotec1').change(function () {
            var _val = $(this).val();
            if (_val == "1") {
                $('#displ').css("display", "block");
            } else {
                $('#displ').css("display", "none");
            }
        });

        $('#_anlysafterprotecpm').change(function () {
            var _val = $(this).val();
            if (_val == "1") {
                $('#displpm').css("display", "block");
            } else {
                $('#displpm').css("display", "none");
            }
        });
        $("table").on("click", "tr #xxx", function () {
            clearval()
            var cusno = $("#_cusno").text();
            var nokey = $(this).attr('cmno');
            // $("#_company").attr('disabled', 'disabled');
            $("#slmcod").attr('disabled', 'disabled');
            $("#requestby").attr('disabled', 'disabled');
            $("#requestdate").attr('disabled', 'disabled');
            $("#_cusno").attr('disabled', 'disabled');
            var comup = $(this).attr('comup');
            var clmnoup = $(this).attr('clmnoup');
            var clmno = $(this).attr('clmno');
            var itemup = $(this).attr('itemup');
            var rcvby = $(this).attr('rcvby');
            var rcvdate = $(this).attr('rcvdate');
            var invoicenoeup = $(this).attr('invoicenoeup');
            var proceedtoup = $(this).attr('proceedtoup');
            var statusclaimup = $(this).attr('statusclaimup');
            var worktimeup = $(this).attr('worktimeup');
            var claimqtyup = $(this).attr('claimqtyup');
            var causeclaimup = $(this).attr('causeclaimup'); //เหตุผลเคลม//
            var proceedtoupdes = $(this).attr('perfromdes');
            var statusclaimupdes = $(this).attr('recstades');
            var fax = $(this).attr('fax');
            var foc = $(this).attr('foc');
            var tec1status = $(this).attr('tec1status');
            var tec2status = $(this).attr('tec2status');
            var pmstatus = $(this).attr('pmstatus');
            $("#Nospankey").text(nokey);
            $("#subNospan").text(clmnoup);
            $("#_t1").val(tec1status);
            $("#_t2").val(tec2status);
            $("#_t3").val(pmstatus);

            var CUSCOD = $(this).attr('cuscod');
            var CUSNAM = $(this).attr('cusnam');
            var SLMCOD = $(this).attr('slmcod');
            var SLMNAM = $(this).attr('slmnam');
            //var CLM_RCVBY = $(this).attr('itemup');
            //var CLM_RCVDATE = $(this).attr('itemup');
            $("#_cusno").text(CUSCOD);
            $("#_cusname").text(CUSNAM);
            $("#slmcod").text(SLMCOD);
            $("#sslmnam").text(SLMNAM);
            //$("#requestby").text(data.Getdata[0].val.CLM_RCVBY);
            // $("#requestdate").text(data.Getdata[0].val.CLM_RCVDATE);
            if (fax == "1") {


                var nokey = $(this).attr('cmno');
                var nosubkey = $("#subNospan").text();
                $.ajax({
                    url: '@Url.Action("GetClimwhdata", "GetdataCenter")',
                    data: {
                        inCLM_ID: nokey,
                        inCLM_SUB: nosubkey
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if (data.Getdata.length > 0) {
                            $("#_itemno").text(data.Getdata[0].val.STKCOD);
                            $("#_description").text(data.Getdata[0].val.STKDES);
                            $("#_uom").text(data.Getdata[0].val.CLM_UOM);


                            $("#_stkgup").text(data.Getdata[0].val.CLM_STKGRP);
                            $("#prdnam").text(data.Getdata[0].val.PROD + "/" + data.Getdata[0].val.PRODNAM);
                            $("#stkgrpnam").text(data.Getdata[0].val.GRPNAM);

                            $("#_claimsec").text(data.Getdata[0].val.SEC + "/" + data.Getdata[0].val.DEPNAM);
                            ////Get input display ///////
                            $("#_claimcnitcost").text(commaSeparateNumber(data.Getdata[0].val.UNITCOST));//cost//
                            $("#_claimtotcost").text(commaSeparateNumber(data.Getdata[0].val.TOTALCOST));//totalcost//
                            // $("#_claimqty").text(data.Getdata[0].val.CLM_REQ_QTY);//Qty//
                            $("#_claimqty").text(data.Getdata[0].val.PM_Optiontext4);//Qty DM//
                            $("#_claimsupqty").text(data.Getdata[0].val.CLM_TECH2_QTY);//Qty//
                            $("#_claimnosupqty").text(data.Getdata[0].val.CLM_TECH2_WASTE_QTY);//Qty//
                            $("#_claimgoodqty").text(data.Getdata[0].val.CLM_TECH2_GOOD_QTY);//Qty//
                            //$("#_workda").text(worktimeup);//ระยะใช้งาน//
                            $("#causeclaim").text(causeclaimup);//เหตุผลเคลม//
                            $("#_proceedto").text(proceedtoupdes);//ดำเนินการ//
                            $("#_statusclaim").text(statusclaimupdes); //Status///
                            $("#_claimnosub").text(clmnoup);
                            $("#_proceedtotec").val(statusclaimup);  ///สถานะการรับสินค้า
                            $("#_location").text(data.Getdata[0].val.CLM_SHELF_LOCATION);
                            $("#_perfromtec1").val(proceedtoup);  ///ดำเนินการ:


                            var _cktype = $("#_udertype").val();
                            var _ckuser = $("#_uderlogin").val();
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                            $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);
                            var tyclom = data.Getdata[0].val.Clmtype;
                            var today = new Date();

                            //  alert(_ckuser)
                            var _tec1Proststus = data.Getdata[0].val.TECH1_PROCESS_STATUS;
                            var _AdminProststus = data.Getdata[0].val.ADMIN_ANLYS_STATUS;
                            $("#_tecrevqty").val(data.Getdata[0].val.CLM_TECH1_QTY)



                            var _tec1Proststus = data.Getdata[0].val.TECH1_PROCESS_STATUS;
                            if (_tec1Proststus != "0") {
                                //console.log(anlysafterprotec1)
                                ///Technic 1 : วิเคราะห์สินค้าเคลม///
                                $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//ตรวจสอบโดย
                                $("#_anlysdatetec1").val(data.Getdata[0].val.TECH1_ANLYS_DATE);    //วันที่วิเคราะห์ปัญหา
                                $("#_perfromtec1").val(data.Getdata[0].val.CLM_PERFORM); //ดำเนินการ
                                $("#_anlysstatustec1").val(data.Getdata[0].val.TECH1_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotec1").val(data.Getdata[0].val.ANLYS_AFTERPROCESS); //หลังเสร็จสิ้นกระบวนการเคลม
                                var anlysafterprotec1 = data.Getdata[0].val.ANLYS_AFTERPROCESS;

                                if (anlysafterprotec1 == "1") {
                                    $("#displ").css("display", "block")
                                    $("#_scrapdatetec1").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                } else {
                                    crapdatetec1 = null;
                                    $("#displ").css("display", "none")
                                }



                                $("#_shelfloctec").val(data.Getdata[0].val.CLM_SHELF_LOCATION);//Shelf Location
                                $("#_tecwork").val(data.Getdata[0].val.TECH1NAME);//ช่างที่รับผิดชอบ:
                                $("#remaketec1").val(data.Getdata[0].val.TECH1_ANLYS_RESULT);  //ผลการตรวจสอบ

                            } else if (_tec1Proststus == "0") {
                                ///ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม////
                                // alert("ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม1");
                                //Tech1//
                                $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//ตรวจสอบโดย
                                $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                $("#_perfromtec1").val(proceedtoup); //ดำเนินการ
                                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                $("#_shelfloctec").val("");//Shelf Location
                                $("#_tecwork").val(data.Getdata[0].val.TECH1NAME);//ช่างที่รับผิดชอบ:
                                $("#remaketec1").val("");

                            }
                            var _tec2Process = data.Getdata[0].val.TECH2_PROCESS_STATUS;
                            var _tec2Proststus = data.Getdata[0].val.TECH2_ANLYS_STATUS
                            if (_tec2Process != "0") {

                                $("#_anlysstatustectech").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotectech").val(data.Getdata[0].val.TEC_PROCESS_STATUS); //หลังเสร็จสิ้นกระบวนการเคลม
                                var anlysafterprotecpm = $("#_anlysafterprotectech").val();
                                if (anlysafterprotecpm == "1") {
                                    $("#displtech").css("display", "block")
                                    $("#_scrapdatetectech").val(data.Getdata[0].val.TEC_ANLYS_AFTERPROCESS);     //วันที่ทำลาย:
                                } else {
                                    crapdatetec1 = null;
                                    $("#displtech").css("display", "none")
                                }
                                // var tyclom = data.Getdata[0].val.Process_Tech;

                                var tyclom = data.Getdata[0].val.Process_Tech;
                                $("#_clmsendpm").val(tyclom);
                                if (tyclom == "1") {
                                    $("#atech").attr('checked', true);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);

                                } else if (tyclom == "2") {
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', true);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);
                                } else if (tyclom == "3") {
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', true);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);
                                } else if (tyclom == "4") {
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', true);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);
                                } else if (tyclom == "5") {
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', true);
                                    $("#ftech").attr('checked', false);
                                } else if (tyclom == "6") {
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', true);
                                    $("#ftech").attr("disabled", "disabled");
                                }

                                if (_tec2Proststus == "1") {
                                    ///Technic 2 : ผลการพิจารณา///
                                    //alert("Technic 2 : ผ่าน");
                                    $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                    $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                    $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                    $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                    $("#_btnsaveconsider").attr("disabled", "disabled");

                                } else if (_tec2Proststus == "2") {//ปฎิเสธ
                                    //alert("Technic 2 : ปฎิเสธ");
                                    $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                    $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                    $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                    $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                    $("#_btnsaveconsider").attr("disabled", "disabled");

                                    $("#_btnsaveconsider").attr("disabled", "disabled");

                                } else if (_tec2Proststus == "3") {//รอ
                                    // alert("Technic 2 : รอsup");
                                    $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                    $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                    $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                    $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                    // $("#_btnsaveapprove").attr("disabled", "disabled");
                                    // $("#_btnsaveapprove").css("display","none")

                                } else if (_tec2Process == "0") {
                                    // alert("ยังไม่ผ่านTech2");
                                    //Tech2//
                                    $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                    $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
                                    $("#_apprvststus").val("0"); // สถานะ
                                    $("#remaketec2").val("");   //หมายเหตุ

                                    $("#_pmdate").attr("disabled", "disabled");
                                    $("#_pmtstus").attr("disabled", "disabled");
                                    $("#remakepm").attr("disabled", "disabled");
                                    $("#_pmnewpn").attr("disabled", "disabled");
                                    $("#_btnsaveapprove").css("display", "none");


                                    $("#_anlysstatustectech").attr("disabled", "disabled");
                                    $("#_anlysafterprotectech").attr("disabled", "disabled");
                                    $("#_scrapdatetectech").attr("disabled", "disabled");
                                    $("#atech").attr("disabled", "disabled");
                                    $("#btech").attr("disabled", "disabled");
                                    $("#ctech").attr("disabled", "disabled");
                                    $("#dtech").attr("disabled", "disabled");
                                    $("#etech").attr("disabled", "disabled");
                                    $("#ftech").attr("disabled", "disabled");
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);
                                }
                            } else if (_tec2Process == "0") {
                                // alert("ยังไม่ผ่านTech2");
                                //Tech2//
                                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
                                $("#_apprvststus").val("0"); // สถานะ
                                $("#remaketec2").val("");   //หมายเหตุ
                                $("#_pmdate").attr("disabled", "disabled");
                                $("#_pmtstus").attr("disabled", "disabled");
                                $("#remakepm").attr("disabled", "disabled");
                                $("#_pmnewpn").attr("disabled", "disabled");
                                $("#_btnsaveapprove").css("display", "none");

                                $("#_anlysstatustectech").attr("disabled", "disabled");
                                $("#_anlysafterprotectech").attr("disabled", "disabled");
                                $("#_scrapdatetectech").attr("disabled", "disabled");
                                $("#atech").attr("disabled", "disabled");
                                $("#btech").attr("disabled", "disabled");
                                $("#ctech").attr("disabled", "disabled");
                                $("#dtech").attr("disabled", "disabled");
                                $("#etech").attr("disabled", "disabled");
                                $("#ftech").attr("disabled", "disabled");
                                $("#atech").attr('checked', false);
                                $("#btech").attr('checked', false);
                                $("#ctech").attr('checked', false);
                                $("#dtech").attr('checked', false);
                                $("#etech").attr('checked', false);
                                $("#ftech").attr('checked', false);

                            }
                            var _PMProststus = data.Getdata[0].val.PM_PROCESS_STATUS;
                            var _PMProappdate = data.Getdata[0].val.PM_APPRV_DATE;
                            var f_BtnApp = data.Getdata[0].val.F_BtnApp;


                            // Option 5 by PM//
                            var optionpm1 = data.Getdata[0].val.PM_Option1;
                            var optionpm2 = data.Getdata[0].val.PM_Option2;
                            var optionpm3 = data.Getdata[0].val.PM_Option3;
                            var optionpm4 = data.Getdata[0].val.PM_Option4;
                            var optionpm5 = data.Getdata[0].val.PM_Option5;

                            var optionpmtext1 = data.Getdata[0].val.PM_Optiontext1;
                            var optionpmtext2 = data.Getdata[0].val.PM_Optiontext2;
                            var optionpmtext3 = data.Getdata[0].val.PM_Optiontext3;
                            var optionpmtext4 = data.Getdata[0].val.PM_Optiontext4;
                            var optionpmtext5 = data.Getdata[0].val.PM_Optiontext5;




                            var BU_Head = data.Getdata[0].val.BU_Head;
                            var BU_APPRV_DATE = data.Getdata[0].val.BU_APPRV_DATE;
                            var BU_APPRV_STATUS = data.Getdata[0].val.BU_APPRV_STATUS;
                            var BU_REMARK = data.Getdata[0].val.BU_REMARK;
                            var CLM_BU_QTY = data.Getdata[0].val.CLM_BU_QTY;
                            var CLM_BU_Ref = data.Getdata[0].val.CLM_BU_Ref;
                            var TOTALCOST = data.Getdata[0].val.TOTALCOST;


                            var MD_Head = data.Getdata[0].val.MD_Head;
                            var MD_APPRV_DATE = data.Getdata[0].val.MD_APPRV_DATE;
                            var MD_APPRV_STATUS = data.Getdata[0].val.MD_APPRV_STATUS;
                            var MD_REMARK = data.Getdata[0].val.MD_REMARK;
                            var CLM_MD_QTY = data.Getdata[0].val.CLM_MD_QTY;
                            var CLM_MD_Ref = data.Getdata[0].val.CLM_MD_Ref;
                            if (_PMProststus != "0") {
                                ///Product Manager Approval///
                                // alert(data.Getdata[0].val.PM_NAME);
                                var newDate = addDays(new Date(), 15);
                                // $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                //$("#_PM").val(data.Getdata[0].val.PM_NAME);  // Product Manager
                                if (_PMProappdate == "") {
                                    $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่PM พิจารณา
                                } else {
                                    $("#_pmdate").val(data.Getdata[0].val.PM_APPRV_DATE); //วันที่PM พิจารณา
                                }
                                $("#_pmtstus").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ
                                $("#remakepm").val(data.Getdata[0].val.PM_REMARK);
                                $("#_pmnewpn").val(data.Getdata[0].val.PM_Replacemen);
                                $("#_pmqty").val(data.Getdata[0].val.CLM_PM_QTY);
                                $("#_pmafterapp").val(data.Getdata[0].val.PM_AFTER_APPRV); //ต้องให้คลังดำเนินการ
                                ///ยกมาเป็นส่วนของ PM////

                                $("#_anlysafterprotecpm").val(data.Getdata[0].val.PM_PROCESS_STATUS_ANLYS); //หลังเสร็จสิ้นกระบวนการเคลม
                                var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                                if (anlysafterprotecpm == "1") {
                                    $("#displpm").css("display", "block")
                                    $("#_scrapdatetecpm").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                } else {
                                    crapdatetec1 = null;
                                    $("#displpm").css("display", "none");
                                }
                                var tyclom = data.Getdata[0].val.Clmtype;

                                if (_PMProststus == "2") {
                                    $.ajax({
                                        url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                                        data: {
                                            Name: 32
                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {

                                            var select = $("#_anlysstatustecpm");
                                            select.children().remove();
                                            // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                            $(data).each(function (index, item) {
                                                if (item.CODE == 2 || item.CODE == 4) {
                                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                                }
                                            });

                                        }
                                    });

                                    if (BU_APPRV_STATUS == "2" || BU_APPRV_STATUS == "1") {
                                      
                                        if (CLM_BU_Ref == '') {
                                            //alert(BU_APPRV_STATUS)
                                            $("#_dmqty").val(CLM_BU_QTY);
                                            $("#remakebu").val(BU_REMARK);
                                            $("#_budate").val(BU_APPRV_DATE);
                                            $("#_butstus").val(BU_APPRV_STATUS);

                                            $("#_dmqty").attr("disabled", "disabled");
                                            $("#remakebu").attr("disabled", "disabled");
                                            $("#_budate").attr("disabled", "disabled");
                                            $("#_butstus").attr("disabled", "disabled");

                                            $("#_btnsaveapprovebu").css("display", "none");
                                            $("#buappdate").text(BU_APPRV_DATE);
                                            $("#buappuser").text(BU_Head);

                                            $("#_dmqty_md").val(CLM_BU_QTY);
                                            $("#myDIV5").css("display", "block");
                                            $("#headerme5").css("display", "block");
                                            $("#_btnsaveapprove_md").css("display", "block");
                                            $("#sidmd").css("display", "block");
                                        } else {
                                          
                                            if (parseInt(TOTALCOST) >= 10000) {
                                                $("#_dmqty").val(CLM_BU_QTY);
                                                $("#remakebu").val(BU_REMARK);
                                                $("#_budate").val(BU_APPRV_DATE);
                                                $("#_butstus").val(BU_APPRV_STATUS);

                                                $("#_dmqty").attr("disabled", "disabled");
                                                $("#remakebu").attr("disabled", "disabled");
                                                $("#_budate").attr("disabled", "disabled");
                                                $("#_butstus").attr("disabled", "disabled");

                                                $("#_btnsaveapprovebu").css("display", "none");
                                                $("#buappdate").text(BU_APPRV_DATE);
                                                $("#buappuser").text(BU_Head);

                                                $("#_dmqty").val(CLM_BU_QTY);
                                                $("#myDIV5").css("display", "block");
                                                $("#headerme5").css("display", "block");

                                                /////MD//////
                                                $("#_dmqtymd").val(CLM_MD_QTY);
                                                $("#remakemd").val(MD_REMARK);
                                                $("#_mddate").val(MD_APPRV_DATE);
                                                $("#_mdtstus").val(MD_APPRV_STATUS);

                                                $("#_dmqtymd").attr("disabled", "disabled");
                                                $("#remakemd").attr("disabled", "disabled");
                                                $("#_mddate").attr("disabled", "disabled");
                                                $("#_mdtstus").attr("disabled", "disabled");

                                                $("#_btnsaveapprove_md").css("display", "none");
                                                $("#mdappdate").text(MD_APPRV_DATE);
                                                $("#mdappuser").text(MD_Head);

                                                $("#_dmqtymd").val(CLM_MD_QTY);
                                                $("#myDIV6").css("display", "block");
                                                $("#headerme6").css("display", "block");
                                                $("#sidmd").css("display", "block");
                                                /////MD//////


                                            } else {
                                                $("#_dmqty").val(CLM_BU_QTY);
                                                $("#remakebu").val(BU_REMARK);
                                                $("#_budate").val(BU_APPRV_DATE);
                                                $("#_butstus").val(BU_APPRV_STATUS);

                                                $("#_dmqty").attr("disabled", "disabled");
                                                $("#remakebu").attr("disabled", "disabled");
                                                $("#_budate").attr("disabled", "disabled");
                                                $("#_butstus").attr("disabled", "disabled");

                                                $("#_btnsaveapprovebu").css("display", "none");
                                                $("#buappdate").text(BU_APPRV_DATE);
                                                $("#buappuser").text(BU_Head);

                                                $("#_dmqty_md").val(CLM_BU_QTY);
                                                $("#myDIV5").css("display", "block");
                                                $("#headerme5").css("display", "block");

                                                $("#myDIV6").css("display", "none");
                                                $("#headerme6").css("display", "none");
                                                $("#headerme6").css("display", "none");
                                                $("#sidmd").css("display", "none");
                                            }
                                        }
                                        
                                        if (MD_APPRV_STATUS == "2" || MD_APPRV_STATUS == "1") {
                                            $("#displaydatebu").css("display", "block");
                                           
                                        }
                                    } else {
                                        if (CLM_BU_Ref == '') {
                                            $("#remakemd").val("");
                                        } else {
                                            if (parseInt(TOTALCOST) >= 10000) {
                                                $("#remakemd").val(MD_REMARK);
                                            } else {
                                                $("#remakemd").val(BU_REMARK);
                                            }
                                        }
                                        $("#_butstus").val("0");
                                        // $("#_dmqty").val(CLM_BU_QTY);
                                        $("#_dmqty").attr("disabled", "disabled");
                                        $("#remakebu").val("");
                                        $("#_budate").val("");

                                        $("#remakebu").removeAttr('disabled');
                                        $("#_budate").removeAttr('disabled');
                                        $("#_butstus").removeAttr('disabled');
                                        $("#_btnsaveapprovebu").css("display", "none");
                                        $("#buappdate").text("");
                                        $("#buappuser").text("");
                                        $("#displaydatebu").css("display", "none");

                                        $("#myDIV5").css("display", "none");
                                        $("#headerme5").css("display", "none");
                                    }
                                }
                                $("#_anlysstatustecpm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                if (tyclom == "1") {
                                    $("#a").prop('checked', true);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#a").removeAttr('disabled');
                                } else if (tyclom == "2") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', true);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#b").removeAttr('disabled');
                                } else if (tyclom == "3") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', true);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#c").removeAttr('disabled');
                                } else if (tyclom == "4") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', true);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#d").removeAttr('disabled');
                                } else if (tyclom == "5") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', true);
                                    $("#f").prop('checked', false);
                                    $("#e").removeAttr('disabled');
                                } else if (tyclom == "6") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', true);
                                    $("#f").removeAttr('disabled');
                                }
                                else if (tyclom == "") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', true);
                                    $("#f").removeAttr('disabled');
                                }

                                if (optionpm1 == "Y") {
                                    $("#optionpm1").prop('checked', true);
                                    $("#optionpmtext1").val(optionpmtext1);
                                    $("#optionpm1").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm1").prop('checked', false);
                                    $("#optionpmtext1").val("");
                                    $("#optionpm1").attr("disabled", "disabled");
                                }
                                if (optionpm2 == "Y") {
                                    $("#optionpm2").prop('checked', true);
                                    $("#optionpmtext2").val(optionpmtext2);
                                    $("#optionpm2").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm2").prop('checked', false);
                                    $("#optionpmtext2").val("");
                                    $("#optionpm2").attr("disabled", "disabled");
                                }
                                if (optionpm3 == "Y") {
                                    $("#optionpm3").prop('checked', true);
                                    $("#optionpmtext3").val(optionpmtext3);
                                    $("#optionpm3").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm3").prop('checked', false);
                                    $("#optionpmtext3").val("");
                                    $("#optionpm3").attr("disabled", "disabled");
                                }
                                if (optionpm4 == "Y") {
                                    $("#optionpm4").prop('checked', true);
                                    $("#optionpmtext4").val(optionpmtext4);
                                    $("#optionpm4").attr("disabled", "disabled");
                                    $("#_dmqty").val(optionpmtext4);
                                    $("#_dmqty_md").val(optionpmtext4);
                                }
                                if (optionpm5 == "Y") {
                                    $("#optionpm5").prop('checked', true);
                                    $("#optionpmtext5").val(optionpmtext5);
                                    $("#optionpm5").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm5").prop('checked', false);
                                    $("#optionpmtext5").val("");
                                    $("#optionpm5").attr("disabled", "disabled");
                                }
                                if (f_BtnApp == "2") {
                                    $("#_btnsaveapprove").attr("disabled", "disabled");
                                    $("#_btnsaveapprove").css("display", "none");
                                    $("#_pmdate").attr("disabled", "disabled");
                                    $("#_pmtstus").attr("disabled", "disabled");
                                    $("#remakepm").attr("disabled", "disabled");
                                    $("#_pmnewpn").attr("disabled", "disabled");

                                    $("#_anlysstatustecpm").attr("disabled", "disabled");
                                    $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                    $("#displpm").attr("disabled", "disabled");
                                } else if (f_BtnApp == "1") {
                                    $("#_btnsaveapprove").removeAttr("disabled", "disabled");
                                    $("#_btnsaveapprove").css("display", "block");
                                    $("#_pmdate").removeAttr("disabled", "disabled");
                                    $("#_pmtstus").removeAttr("disabled", "disabled");
                                    $("#remakepm").removeAttr("disabled", "disabled");
                                    $("#_pmnewpn").removeAttr("disabled", "disabled");

                                    $("#_anlysstatustecpm").removeAttr("disabled", "disabled");
                                    $("#_anlysafterprotecpm").removeAttr("disabled", "disabled");
                                    $("#displpm").removeAttr("disabled", "disabled");
                                }


                            } else {

                                var tyclom = data.Getdata[0].val.Clmtype;
                                if (tyclom == "1") {
                                    $("#a").prop('checked', true);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#a").removeAttr('disabled');
                                } else if (tyclom == "2") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', true);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#b").removeAttr('disabled');
                                } else if (tyclom == "3") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', true);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#c").removeAttr('disabled');
                                } else if (tyclom == "4") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', true);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', false);
                                    $("#d").removeAttr('disabled');
                                } else if (tyclom == "5") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', true);
                                    $("#f").prop('checked', false);
                                    $("#e").removeAttr('disabled');
                                } else if (tyclom == "6") {
                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', true);
                                    $("#f").removeAttr('disabled');
                                }
                                else if (tyclom == "") {

                                    $("#a").prop('checked', false);
                                    $("#b").prop('checked', false);
                                    $("#c").prop('checked', false);
                                    $("#d").prop('checked', false);
                                    $("#e").prop('checked', false);
                                    $("#f").prop('checked', true);
                                    $("#f").removeAttr('disabled');
                                }

                                if (_tec2Process == "0") {
                                    $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่PM พิจารณา
                                    $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                    $("#remakepm").val("");
                                    $("#_pmnewpn").val("");

                                    ///ยกมาเป็นส่วนของ PM////
                                    $("#_anlysstatustecpm").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    $("#_anlysafterprotecpm").val(data.Getdata[0].val.ANLYS_AFTERPROCESS); //หลังเสร็จสิ้นกระบวนการเคลม
                                    var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                                    if (anlysafterprotecpm == "1") {
                                        $("#displpm").css("display", "block")
                                        $("#_scrapdatetecpm").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                    } else {
                                        crapdatetec1 = null;
                                        $("#displpm").css("display", "none")
                                    }
                                    $("#_pmqty").val(data.Getdata[0].val.CLM_PM_QTY);
                                    $("#_anlysstatustecpm").attr("disabled", "disabled");
                                    $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                    $("#_scrapdatetecpm").attr("disabled", "disabled");
                                    $("#displpm").attr("disabled", "disabled");

                                    $("#_pmdate").attr("disabled", "disabled");
                                    $("#_pmtstus").attr("disabled", "disabled");
                                    $("#remakepm").attr("disabled", "disabled");
                                    $("#_pmnewpn").attr("disabled", "disabled");
                                    $("#_btnsaveapprove").css("display", "none");

                                    if (optionpm1 == "Y") {
                                        $("#optionpm1").prop('checked', true);
                                        $("#optionpmtext1").val(optionpmtext1);
                                        $("#optionpm1").removeAttr("disabled", "disabled");
                                    } else {
                                        $("#optionpm1").prop('checked', false);
                                        $("#optionpmtext1").val("");
                                        $("#optionpm1").removeAttr("disabled", "disabled");
                                    }
                                    if (optionpm2 == "Y") {
                                        $("#optionpm2").prop('checked', true);
                                        $("#optionpmtext2").val(optionpmtext2);
                                        $("#optionpm2").removeAttr("disabled", "disabled");
                                    } else {
                                        $("#optionpm2").prop('checked', false);
                                        $("#optionpmtext2").val("");
                                        $("#optionpm2").removeAttr("disabled", "disabled");
                                    }
                                    if (optionpm3 == "Y") {
                                        $("#optionpm3").prop('checked', true);
                                        $("#optionpmtext3").val(optionpmtext3);
                                        $("#optionpm3").removeAttr("disabled", "disabled");
                                    } else {
                                        $("#optionpm3").prop('checked', false);
                                        $("#optionpmtext3").val("");
                                        $("#optionpm3").removeAttr("disabled", "disabled");
                                    }
                                    if (optionpm4 == "Y") {

                                        $("#optionpm4").prop('checked', true);
                                        $("#optionpmtext4").val(optionpmtext4);
                                        $("#optionpm4").removeAttr("disabled", "disabled");
                                    }
                                    if (optionpm5 == "Y") {
                                        $("#optionpm5").prop('checked', true);
                                        $("#optionpmtext5").val(optionpmtext5);
                                        $("#optionpm5").removeAttr("disabled", "disabled");
                                    } else {
                                        $("#optionpm5").prop('checked', false);
                                        $("#optionpmtext5").val("");
                                        $("#optionpm5").removeAttr("disabled", "disabled");
                                    }



                                } else {
                                    //alert(_tec2Proststus)
                                    if (_tec2Proststus == "3") {

                                        $("#_pmdate").removeAttr('disabled');
                                        $("#_pmtstus").removeAttr('disabled');
                                        $("#remakepm").removeAttr('disabled');
                                        $("#_pmnewpn").removeAttr('disabled');
                                        $("#_btnsaveapprove").removeAttr('disabled');
                                        $("#_btnsaveapprove").css("display", "block");
                                    }
                                    else {
                                        var tyclomtech = data.Getdata[0].val.Process_Tech;
                                        // alert(tyclomtech)
                                        if (tyclomtech == "1") {
                                            $("#atech").prop('checked', true);
                                            $("#btech").prop('checked', false);
                                            $("#ctech").prop('checked', false);
                                            $("#dtech").prop('checked', false);
                                            $("#etech").prop('checked', false);
                                            $("#ftech").prop('checked', false);

                                        } else if (tyclomtech == "2") {
                                            $("#atech").prop('checked', false);
                                            $("#btech").prop('checked', true);
                                            $("#ctech").prop('checked', false);
                                            $("#dtech").prop('checked', false);
                                            $("#etech").prop('checked', false);
                                            $("#ftech").prop('checked', false);
                                        } else if (tyclomtech == "3") {
                                            $("#atech").prop('checked', false);
                                            $("#btech").prop('checked', false);
                                            $("#ctech").prop('checked', true);
                                            $("#dtech").prop('checked', false);
                                            $("#etech").prop('checked', false);
                                            $("#ftech").prop('checked', false);
                                        } else if (tyclomtech == "4") {
                                            $("#atech").prop('checked', false);
                                            $("#btech").prop('checked', false);
                                            $("#ctech").prop('checked', false);
                                            $("#dtech").prop('checked', true);
                                            $("#etech").prop('checked', false);
                                            $("#ftech").prop('checked', false);
                                        } else if (tyclomtech == "5") {
                                            $("#atech").prop('checked', false);
                                            $("#btech").prop('checked', false);
                                            $("#ctech").prop('checked', false);
                                            $("#dtech").prop('checked', false);
                                            $("#etech").prop('checked', true);
                                            $("#ftech").prop('checked', false);
                                        } else if (tyclomtech == "6") {
                                            $("#atech").prop('checked', false);
                                            $("#btech").prop('checked', false);
                                            $("#ctech").prop('checked', false);
                                            $("#dtech").prop('checked', false);
                                            $("#etech").prop('checked', false);
                                            $("#ftech").prop('checked', true);
                                            $("#ftech").prop("disabled", "disabled");
                                            $("#ctech").prop("disabled", "disabled");
                                        }
                                        $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่PM พิจารณา
                                        $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                        $("#remakepm").val("");
                                        $("#_pmnewpn").val("");
                                        $("#_pmafterapp").val("");
                                        ///ยกมาเป็นส่วนของ PM////
                                        // alert(data.Getdata[0].val.TEC_ANLYS_AFTERPROCESS)

                                        $("#_anlysstatustecpm").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                        $("#_anlysafterprotecpm").val(data.Getdata[0].val.TEC_PROCESS_STATUS); //หลังเสร็จสิ้นกระบวนการเคลม
                                        var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                                        if (anlysafterprotecpm == "1") {
                                            $("#displpm").css("display", "block")
                                            $("#_scrapdatetecpm").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                        } else {
                                            crapdatetec1 = null;
                                            $("#displpm").css("display", "none")
                                        }

                                        //aps27/07/2021//
                                        var TECH2_GOOD_QTY_Val = data.Getdata[0].val.CLM_TECH2_GOOD_QTY //จำนวนของดี(สินค้าใช้งานได้) by tech2
                                        //if (TECH2_GOOD_QTY_Val != "0") {
                                        //    $("#optionpm1").prop('checked', true);
                                        //    $("#optionpmtext1").val(TECH2_GOOD_QTY_Val);
                                        //    $("#optionpmtext1").removeAttr('disabled');
                                        //    //$("#optionpm1").prop("disabled", "disabled");
                                        //} else {
                                        //    $("#optionpm1").prop('checked', false);
                                        //    $("#optionpmtext1").val("");
                                        //    $("#optionpmtext1").prop("disabled", "disabled");
                                        //    //$("#optionpm1").prop("disabled", "disabled");
                                        //}

                                        $("#_pmqty").val(data.Getdata[0].val.CLM_PM_QTY);
                                        $("#_anlysstatustecpm").removeAttr('disabled');
                                        $("#_anlysafterprotecpm").removeAttr('disabled');
                                        $("#_scrapdatetecpm").removeAttr('disabled');
                                        $("#displpm").removeAttr('disabled');


                                        $("#_pmdate").removeAttr('disabled');
                                        $("#_pmtstus").removeAttr('disabled');
                                        $("#remakepm").removeAttr('disabled');
                                        $("#_pmnewpn").removeAttr('disabled');
                                        $("#_btnsaveapprove").removeAttr('disabled');
                                        $("#_btnsaveapprove").css("display", "block");
                                    }

                                    //  $("#_btnsaveapprove").css("display", "block");
                                }
                            }
                        } else {

                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("ไม่มีรายการเคลม...");
                            $("#myModalWarning").modal();
                        }
                    }
                });

                $('#appvideosales').html("");
                $.ajax({
                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: nokey,
                        CLM_NO: nosubkey,
                        Im_No: "01"
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result.videolist)
                        if (result.videolist.length > 0) {
                            $('#appvideosales').html("");
                            for (var i = 0; i < result.videolist.length; i++) {
                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';
                                SubmithtmlPage += '</video>';
                                $('#appvideosales').append(SubmithtmlPage);
                                // HTMLbuilder = HTMLbuilder + imgHtml;
                            }
                        } else {

                        }
                    },
                });
                $('#appvideotech').html("");
                $.ajax({
                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: nokey,
                        CLM_NO: nosubkey,
                        Im_No: "TEC01"
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result.videolist)
                        if (result.videolist.length > 0) {
                            $('#appvideotech').html("");
                            for (var i = 0; i < result.videolist.length; i++) {
                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';

                                SubmithtmlPage += '</video>';
                                $('#appvideotech').append(SubmithtmlPage);
                                // HTMLbuilder = HTMLbuilder + imgHtml;
                            }


                        } else {

                        }


                    },
                });
                //Getimage//
                $("#boximage").html("");
                $.ajax({
                    url: '@Url.Action("GetPathImageWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: nokey,
                        CLM_NO: nosubkey
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result);
                        if (result.Getdata.length > 0) {
                            //$("#myModalimage").modal();
                            $('#boximage').html("");
                            if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var SubmithtmlPage = "";
                                for (var i = 0; i < resultObj.length; i++) {
                                    var str = resultObj[i].val.IMAGE_NO;
                                    var res = str.substring(0, 3);
                                    if (res != "TEC") {
                                        SubmithtmlPage = '<div class="col-sm-3">';
                                        SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                        SubmithtmlPage += '</div>';
                                        $('#boximage').append(SubmithtmlPage);
                                        // HTMLbuilder = HTMLbuilder + imgHtml;
                                    }
                                }
                            } else {

                                $("#myModalimage").modal();
                            }
                        }
                    }
                });
                $("#boximagetechnic").html("");
                $.ajax({
                    url: '@Url.Action("GetPathImageWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: nokey,
                        CLM_NO: nosubkey
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result);
                        if (result.Getdata.length > 0) {
                            //$("#myModalimage").modal();
                            $('#boximagetechnic').html("");
                            if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var SubmithtmlPage = "";
                                for (var i = 0; i < resultObj.length; i++) {
                                    var str = resultObj[i].val.IMAGE_NO;
                                    var res = str.substring(0, 3);
                                    if (res == "TEC") {
                                        SubmithtmlPage = '<div class="col-sm-3">';
                                        SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                        SubmithtmlPage += '</div>';
                                        $('#boximagetechnic').append(SubmithtmlPage);
                                    }
                                    // HTMLbuilder = HTMLbuilder + imgHtml;
                                }
                            } else {

                                //  $("#myModalimage").modal();
                            }
                        }
                    }
                });
            }

        });
        $(document).on('click', '#myImg', function () {
            var modal = document.getElementById('myModalzoom');
            var img = document.getElementById('myImg');
            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        });
        $(document).on('click', '.close', function () {
            var modal = document.getElementById('myModalzoom');
            modal.style.display = "none";
        });
        $(document).on('click', '#closeimg', function () {
            var modal = document.getElementById('myModalzoom');
            modal.style.display = "none";
        });
        $(document).on('click', '#myModalzoom div', function () {
            var modal = document.getElementById('myModalzoom');
            modal.style.display = "none";
        });

        $('#_anlysstatustecpm').change(function () {
            var _val = $(this).val();
            //alert(_val)
            if (_val == "2") {
                $("#a").attr('checked', false);
                $("#b").attr('checked', false);
                $("#c").attr('checked', true);
                $("#d").attr('checked', false);
                $("#e").attr('checked', false);
                $("#f").attr('checked', false);
                $("#c").removeAttr("disabled");
                $("#f").attr("disabled", "disabled");
            } else {
                $("#a").prop('checked', false);
                $("#b").prop('checked', false);
                $("#c").prop('checked', false);
                $("#d").prop('checked', false);
                $("#e").prop('checked', false);
                $("#f").prop('checked', true);
                $("#c").prop("disabled", "disabled");
                $("#f").removeAttr("disabled");
            }
        });
        $('#a').attr("disabled", "disabled");
        $('#b').attr("disabled", "disabled");
        $('#c').attr("disabled", "disabled");
        $('#d').attr("disabled", "disabled");
        $('#e').attr("disabled", "disabled");
        $('#a').click(function () {
            //aps///
            if ($(this).prop("checked") == true) {
                $('#b').attr("disabled", "disabled");
                $('#c').attr("disabled", "disabled");
                $('#d').attr("disabled", "disabled");
                $('#e').attr("disabled", "disabled");
                $('#f').attr("disabled", "disabled");
            }
            else if ($(this).prop("checked") == false) {
                $('#b').removeAttr('disabled');
                $('#c').removeAttr('disabled');
                $('#d').removeAttr('disabled');
                $('#e').removeAttr('disabled');
                $('#f').removeAttr('disabled');
            }

        });
        $('#b').click(function () {

            if ($(this).prop("checked") == true) {
                $('#a').attr("disabled", "disabled");
                $('#c').attr("disabled", "disabled");
                $('#d').attr("disabled", "disabled");
                $('#e').attr("disabled", "disabled");
                $('#f').attr("disabled", "disabled");
            }
            else if ($(this).prop("checked") == false) {
                $('#a').removeAttr('disabled');
                $('#c').removeAttr('disabled');
                $('#d').removeAttr('disabled');
                $('#e').removeAttr('disabled');
                $('#f').removeAttr('disabled');
            }
        });
        $('#c').click(function () {


            if ($(this).prop("checked") == true) {
                $('#a').attr("disabled", "disabled");
                $('#b').attr("disabled", "disabled");
                $('#d').attr("disabled", "disabled");
                $('#e').attr("disabled", "disabled");
                $('#f').attr("disabled", "disabled");
            }
            else if ($(this).prop("checked") == false) {
                $('#a').removeAttr('disabled');
                $('#b').removeAttr('disabled');
                $('#d').removeAttr('disabled');
                $('#e').removeAttr('disabled');
                $('#f').removeAttr('disabled');
            }
        });
        $('#d').click(function () {

            if ($(this).prop("checked") == true) {
                $('#a').attr("disabled", "disabled");
                $('#b').attr("disabled", "disabled");
                $('#c').attr("disabled", "disabled");
                $('#e').attr("disabled", "disabled");
                $('#f').attr("disabled", "disabled");

            }
            else if ($(this).prop("checked") == false) {
                $('#a').removeAttr('disabled');
                $('#b').removeAttr('disabled');
                $('#c').removeAttr('disabled');
                $('#e').removeAttr('disabled');
                $('#f').removeAttr('disabled');

            }
        });
        $('#e').click(function () {
            //aps//
            if ($(this).prop("checked") == true) {
                $('#a').attr("disabled", "disabled");
                $('#b').attr("disabled", "disabled");
                $('#c').attr("disabled", "disabled");
                $('#d').attr("disabled", "disabled");
                $('#f').attr("disabled", "disabled");

            }
            else if ($(this).prop("checked") == false) {
                $('#a').removeAttr('disabled');
                $('#b').removeAttr('disabled');
                $('#c').removeAttr('disabled');
                $('#d').removeAttr('disabled');
                $('#f').removeAttr('disabled');

            }
        });
        $('#f').click(function () {
            if ($(this).prop("checked") == true) {
                $('#a').attr("disabled", "disabled");
                $('#b').attr("disabled", "disabled");
                $('#c').attr("disabled", "disabled");
                $('#d').attr("disabled", "disabled");
                $('#e').attr("disabled", "disabled");
            }
            else if ($(this).prop("checked") == false) {
                $('#a').removeAttr('disabled');
                $('#b').removeAttr('disabled');
                $('#c').removeAttr('disabled');
                $('#d').removeAttr('disabled');
                $('#e').removeAttr('disabled');
            }
        });
        $('#optionpm1').change(function () {
            if ($(this).is(":checked")) {
                // var returnVal = confirm("กรุณาระบุจำนวน โอนเข้า K01");
                // $(this).attr("checked", returnVal);
                $('#optionpmtext1').attr("disabled", false);
                $("#optionpmtext1").css("border-bottom", "3px solid red");
            } else {
                $('#optionpmtext1').val("");
                $('#optionpmtext1').attr("disabled", true);
                $("#optionpmtext1").css("border-bottom", "1px solid #141415");
            }
            //$('#optionpmtext1').val($(this).is(':checked'));

        });
        $('#optionpm2').change(function () {
            if ($(this).is(":checked")) {
                //var returnVal = confirm("กรุณาระบุจำนวน โอนเข้า K01");
                //$(this).attr("checked", returnVal);
                $('#optionpmtext2').attr("disabled", false);
                $("#optionpmtext2").css("border-bottom", "3px solid red");
            } else {
                $('#optionpmtext2').val("");
                $('#optionpmtext2').attr("disabled", true);
                $("#optionpmtext2").css("border-bottom", "1px solid #141415");
            }
            //$('#optionpmtext1').val($(this).is(':checked'));

        });
        $('#optionpm3').change(function () {
            if ($(this).is(":checked")) {
                // var returnVal = confirm("กรุณาระบุจำนวน โอนเข้า K01");
                // $(this).attr("checked", returnVal);
                $('#optionpmtext3').attr("disabled", false);
                $("#optionpmtext3").css("border-bottom", "3px solid red");
            } else {
                $('#optionpmtext3').val("");
                $('#optionpmtext3').attr("disabled", true);
                $("#optionpmtext3").css("border-bottom", "1px solid #141415");
            }
            //$('#optionpmtext1').val($(this).is(':checked'));

        });
        $('#optionpm4').change(function () {
            if ($(this).is(":checked")) {
                //var returnVal = confirm("กรุณาระบุจำนวน โอนเข้า K01");
                // $(this).attr("checked", returnVal);
                $('#optionpmtext4').attr("disabled", false);
                $("#optionpmtext4").css("border-bottom", "3px solid red");
            } else {
                $('#optionpmtext4').val("");
                $('#optionpmtext4').attr("disabled", true);
                $("#optionpmtext4").css("border-bottom", "1px solid #141415");
            }
            //$('#optionpmtext1').val($(this).is(':checked'));

        });
        $('#optionpm5').change(function () {
            if ($(this).is(":checked")) {
                //var returnVal = confirm("กรุณาระบุจำนวน โอนเข้า K01");
                //$(this).attr("checked", returnVal);
                $('#optionpmtext5').attr("disabled", false);
                $("#optionpmtext5").css("border-bottom", "3px solid red");
            } else {
                $('#optionpmtext5').val("");
                $('#optionpmtext5').attr("disabled", true);
                $("#optionpmtext5").css("border-bottom", "1px solid #141415");
            }
            //$('#optionpmtext1').val($(this).is(':checked'));

        });
        $("#_btnsaveapprove").click(function () {
            var nokey = $("#Nospankey").text();
            var nosubkey = $("#subNospan").text();
            var pm = $("#_PM").val();  // Product Manager
            var pmdate = $("#_pmdate").val(); //วันที่PM พิจารณา
            var pmtstus = $("#_pmtstus").val(); //สถานะอนุมัติ
            var pmremake = $("#remakepm").val();
            var pmreplacpn = $("#_pmnewpn").val();
            var userlogin = $("#_uderlogin").val();
            var anlysstatustecpm = $("#_anlysstatustecpm").val();
            var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
            var scrapdatetecpm = $("#_scrapdatetecpm").val();
            var claimtypecke = $("input[name='vehicle']:checked").val();
            var pmafterapp = $("#_pmafterapp").val();
            var pmrevqty = $("#_pmqty").val();   //จำนวนรับเคลม
            var optionpm1;
            var optionpmtext1;

            var optionpm2;
            var optionpmtext2;

            var optionpm3;
            var optionpmtext3;

            var optionpm4;
            var optionpmtext4;

            var optionpm5;
            var optionpmtext5;

            var _valoptionpm1 = $("input[name='optionpm1").val();
            var _valoptionpm2 = $("input[name='optionpm2").val();
            var _valoptionpm3 = $("input[name='optionpm3").val();
            var _valoptionpm4 = $("input[name='optionpm4").val();
            var _valoptionpm5 = $("input[name='optionpm5").val();



            if (pmtstus == "1") {

                if (anlysstatustecpm == "4") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือก สถานะการวิเคราะห์ WR,WE,WF");
                    $("#myModalWarning").modal(); return false;
                }
                if (anlysafterprotecpm == "0") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือก หลังเสร็จสิ้นกระบวนการเคลม");
                    $("#myModalWarning").modal(); return false;
                }
                if (anlysafterprotecpm == "4") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือก หลังเสร็จสิ้นกระบวนการเคลม ใหม่");
                    $("#myModalWarning").modal(); return false;
                }
            }

            if (typeof claimtypecke === 'undefined' || claimtypecke === null) {
                //$("#textAlertWarning").empty();
                //$("#textAlertWarning").text("กรุณาเลือก Warranty Claim Type");
                //$("#myModalWarning").modal(); return false;
                claimtypecke = $("#_clmsendpm").val();
            }


            var ckt2 = $("#_t2").val();
            if (nokey == "" && nosubkey == "") {

                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("กรุณาเลือกรายการที่ต้องการบันทึกผลการพิจารณา");
                $("#myModalWarning").modal(); return false;
            }

            if (ckt2 == "0") {

                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("รอ ผลการพิจารณา.....");
                $("#myModalWarning").modal(); return false;
            }
            if (pmtstus == "0") {

                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("กรุณาเลือกStatusที่ท่านนต้องการบันทึก");
                $("#myModalWarning").modal(); return false;
            }

            var anlysstatustecpm = $("#_anlysstatustecpm").val();
            if (anlysstatustecpm == "0") {

                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("กรุณาเลือกสถานะการวิเคราะห์ WR,WE,WF");
                $("#myModalWarning").modal(); return false;
            }

            var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
            var scrapdatetecpm = $("#_scrapdatetecpm").val();
            if (anlysstatustecpm != "4") {
                if (pmrevqty == "") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาระบุ จำนวนรับเคลม");
                    $("#myModalWarning").modal(); return false;
                }
                if (pmrevqty == "0") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาระบุ จำนวนรับเคลม");
                    $("#myModalWarning").modal(); return false;
                }
                if (Number(pmrevqty) < 0) {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                    $("#myModalWarning").modal(); return false;
                }
            }
            if (pmtstus == "2") {
                //if (pmafterapp == "") {
                //    $("#textAlertWarning").empty();
                //    $("#textAlertWarning").text("กรุณาระบุ ช่องให้คลังดำเนินการ");
                //    $("#myModalWarning").modal(); return false;
                //}

                if ($("input[name='optionpm1").prop('checked') === true) {
                    optionpm1 = "Y"; optionpmtext1 = $("#optionpmtext1").val();
                    if (optionpmtext1 == "") {
                        $("#optionpmtext1").css("border-bottom", "3px solid red");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาระบุจำนวนโอนเข้าพื้นที่ขายปกติ(Ready for Sale)");
                        $("#myModalWarning").modal(); return false;
                    }
                } else {
                    optionpm1 = "N"; optionpmtext1 = "";
                    $("#optionpmtext1").css("border-bottom", "1px solid #141415");
                }
                if ($("input[name='optionpm2").prop('checked') === true) {
                    optionpm2 = "Y"; optionpmtext2 = $("#optionpmtext2").val();
                    if (optionpmtext2 == "") {
                        $("#optionpmtext2").css("border-bottom", "3px solid red");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาระบุจำนวน โอนเข้า Clearance");
                        $("#myModalWarning").modal(); return false;
                    }
                } else {
                    optionpm2 = "N"; optionpmtext2 = "";
                    $("#optionpmtext2").css("border-bottom", "1px solid #141415");
                }
                if ($("input[name='optionpm3").prop('checked') === true) {
                    optionpm3 = "Y"; optionpmtext3 = $("#optionpmtext3").val();
                    if (optionpmtext3 == "") {
                        $("#optionpmtext3").css("border-bottom", "3px solid red");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาระบุจำนวน โอนเข้า Rework");
                        $("#myModalWarning").modal(); return false;
                    }
                } else {
                    optionpm3 = "N"; optionpmtext3 = "";
                    $("#optionpmtext3").css("border-bottom", "1px solid #141415");
                }
                if ($("input[name='optionpm4").prop('checked') === true) {
                    optionpm4 = "Y"; optionpmtext4 = $("#optionpmtext4").val();
                    if (optionpmtext4 == "") {
                        $("#optionpmtext4").css("border-bottom", "3px solid red");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาระบุจำนวน โอนเข้า DM");
                        $("#myModalWarning").modal(); return false;
                    }
                } else {
                    optionpm4 = "N"; optionpmtext4 = "";
                    $("#optionpmtext4").css("border-bottom", "1px solid #141415");
                }
                if ($("input[name='optionpm5").prop('checked') === true) {
                    optionpm5 = "Y"; optionpmtext5 = $("#optionpmtext5").val();
                    if (optionpmtext5 == "") {
                        $("#optionpmtext5").css("border-bottom", "3px solid red");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาระบุสิ่งที่ต้องการ");
                        $("#myModalWarning").modal(); return false;
                    }
                } else {
                    optionpm5 = "N"; optionpmtext5 = "";
                    $("#optionpmtext5").css("border-bottom", "1px solid #141415");
                }

                var Concaten = optionpm1 + optionpm2 + optionpm3 + optionpm4 + optionpm5;
                if (Concaten == "NNNNN") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกวิธี ให้คลังดำเนินการสินค้าของท่าน");
                    $("#myModalWarning").modal(); return false;
                }
            }

            $.ajax({
                url: '@Url.Action("SaveProcessClaimDetailPM", "ProcessApproveWH")',
                data: {
                    aj_REQ_NO: nokey,
                    aj_CLM_NO_SUB: nosubkey,
                    aj_PM_NAME: pm,
                    aj_PM_APPRV_STATUS: pmtstus,
                    aj_PM_REMARK: pmremake,
                    aj_PM_APPRV_DATE: pmdate,
                    aj_PM_Replacement: pmreplacpn,
                    aj_userlogin: userlogin,
                    aj_anlysstatustecpm: anlysstatustecpm,
                    aj_anlysafterprotecpm: anlysafterprotecpm,
                    aj_scrapdatetecpm: scrapdatetecpm,
                    clamtyp: claimtypecke,
                    aj_PM_Qty: pmrevqty,
                    aj_PM_AFTER_APP: pmafterapp,
                    aj_PM_Option1: optionpm1,
                    aj_PM_Optiontext1: optionpmtext1,
                    aj_PM_Option2: optionpm2,
                    aj_PM_Optiontext2: optionpmtext2,
                    aj_PM_Option3: optionpm3,
                    aj_PM_Optiontext3: optionpmtext3,
                    aj_PM_Option4: optionpm4,
                    aj_PM_Optiontext4: optionpmtext4,
                    aj_PM_Option5: optionpm5,
                    aj_PM_Optiontext5: optionpmtext5,





                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data);
                    if (data.message == "true") {
                        //  waitingDialog.hide();
                        $("#textAlertSucces").empty();
                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                        $("#myModalSucces").modal();
                        //location.reload();
                        $("#myModalSucces").click(function () {
                            var valbu = $("#_buhead").val();
                            var valpm = $("#_PM").val();
                            var valststus = $("#_statusbu").val();
                            var valDoc = $("#searchclaimno").val();
                            var valcom = $("#_company").val();
                            var valstkgrp = $("#_stkgrp").val();
                            var valstatdate = $("#_statdate").val();
                            var valenddate = $("#_enddate").val();
                            var valstatdatecus = $("#_statdate").val();
                            var valenddatecus = $("#_enddate").val();
                            var itemno = $("#_itemnosearch").val();

                            if (itemno != "") {
                                itemno = splitval(itemno);
                            } else {
                                itemno = "";
                            }
                            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus)
                            // Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp)
                            // $("table tr #xxx").click();
                        });
                    } else {
                        //  waitingDialog.hide();
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text(data.message);
                        $("#myModalWarning").modal(); return false;
                    }
                }
            });
        });
        $("#_btnsaveapprove_md").click(function () {
            var nokey = $("#Nospankey").text();
            var nosubkey = $("#subNospan").text();
            if (nokey == "" && nosubkey == "") {
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("กรุณาเลือกรายการพิจารณา โอนย้ายเข้า Damage");
                $("#myModalWarning").modal(); return false;
            }
            var _vsrsta = "";
            var buhead = $("#_buhead").val();
            var dmqty = $("#_dmqty_md").val();
            var dmstatus = $("#_butstus_md").val();
            var dmremake = $("#remakemd").val();
            var userlogin = $("#_uderlogin").val();

            if (dmstatus == "0") {
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("กรุณาเลือกสถานะ โอนย้ายเข้า Damang");
                $("#myModalWarning").modal(); return false;
            }
            _vsrsta = dmstatus;
            $.ajax({
                url: '@Url.Action("SaveProcessClaimwhDamangeMD", "ProcessApprove_WHDM_MD")',
                data: {
                    aj_REQ_NO: nokey,
                    aj_CLM_NO_SUB: nosubkey,
                    aj_MD_NAME: buhead,
                    aj_MD_APPRV_STATUS: dmstatus,
                    aj_MD_REMARK: dmremake,
                    aj_MD_QTY: dmqty,
                    aj_MD_userlogin: userlogin
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data);
                    // waitingDialog.hide();
                    if (data.message == "true") {
                        var textaler = "";
                        if (_vsrsta == "2") {
                            textaler = " ส่งให้ PM พิจารณาใหม่";
                        } else {
                            textaler = " "
                        }
                        $("#textAlertSucces").empty();
                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ " + textaler);
                        $("#myModalSucces").modal();
                        $("#myModalSucces").click(function () {
                            var valbu = $("#_buhead").val();
                            var valpm = $("#_PM").val();
                            var valststus = $("#_statusbu").val();
                            var valDoc = $("#searchclaimno").val();
                            var valcom = $("#_company").val();
                            var valstkgrp = $("#_stkgrp").val();
                            var valstatdate = $("#_statdate").val();
                            var valenddate = $("#_enddate").val();
                            var valstatdatecus = $("#_statdate").val();
                            var valenddatecus = $("#_enddate").val();
                            var itemno = $("#_itemnosearch").val();
                            if (itemno != "") {
                                itemno = splitval(itemno);
                            } else {
                                itemno = "";
                            }
                            GetclmiApproveDM(valbu, valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdate, valenddate)
                        });
                    } else {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text(data.message);
                        $("#myModalWarning").modal(); return false;
                    }
                }
            });
        });
        function clearval() {
            $("#Nospankey").text("");
            $("#subNospan").text("");
            $("#_cusno").text("");
            $("#_cusname").text("");
            $("#requestby").text("");
            $("#slmcod").text("");
            $("#sslmnam").text("");
            $("#requestdate").text("");
            $("#_itemno").text("");
            $("#_description").text("");
            $("#_uom").text("");
            $("#_invoiceno").text("");
            $("#_psdate").text("");
            $("#_invoiceqty").text("");
            $("#_invoicelineamt").text("");
            $("#_invoicelinedis").text("");
            $("#_invoicelinedisamt").text("");
            $("#_foc").text("");
            $("#_stkgup").text("");
            $("#_workda").text("");
            $("#_claimqty").text("");
            $("#causeclaim").text("");
            $("#_proceedto").text("");
            $("#_statusclaim").text("");

            $("#stkgrpnam").text("");
            $("#prdnam").text("");
            $("#_claimsec").text("");
            $("#_location").text("");
            $("#_pmqty").val("");
            $("#_pmafterapp").text("");
            $('#appvideosales').html("");
            $('#appvideotech').html("");
            $("#boximage").html("");
            $("#boximagetechnic").html("");



            $("#_vemac").val("");
            $("#_moty").val("");
            $("#_modyear").val("");
            $("#_encod").val("");
            $("#_chno").val("");
            $("#_pump").val("");
            $("#_typpro").val("");
            $("#_warcarno").val("");
            $("#_milage").val("");
            $("#_datofdam").val("");
            $("#_batcod").val("");

            $("#causeclaim").val("");
            $("#_proceedto").val("0");
            $("#_statusclaim").val("2");
            $("#_workda").val("0"); //ระยะใช้งาน//
            $("#_workmonth").val("0"); //ระยะใช้งาน//
            $("#_workday").val("0");//ระยะใช้งาน//
            $("#_worktime").val("00:00");//ระยะใช้งาน//
            $("#_installdate").val("");
            $("#_claimcontacte").val("");
            $("#_contacte").val("");


            //Admin//
            $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
            $("#_rcvbyte").val("");      //ผู้รับสินค้าเคลม
            $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
            $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
            $("#_clmdatetec").val("");//Claim date:
            $("#_duedatetec").val(""); //Due date
            $("#_admintec").val("");//Admin:
            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
            $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
            //Tech1//
            $("#_nametec1").val("");//ตรวจสอบโดย
            $("#_anlysdatetec1").val("");     //วันที่วิเคราะห์ปัญหา
            $("#_perfromtec1").val(""); //ดำเนินการ
            $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
            $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
            $("#_scrapdatetec1").val("");
            $("#_shelfloctec").val("");//Shelf Location
            $("#_tecwork").val("");//ช่างที่รับผิดชอบ:
            $("#remaketec1").val("");

            //Tech2//
            $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
            $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
            $("#_apprvststus").val("0"); // สถานะ
            $("#remaketec2").val("");   //หมายเหตุ

            $("#_anlysstatustectech").val("");
            $("#_anlysafterprotectech").val("");
            $("#_scrapdatetectech").val("");// วันที่จะทำลาย:

            $("#_pmdate").attr("disabled", "disabled");
            $("#_pmtstus").attr("disabled", "disabled");
            $("#remakepm").attr("disabled", "disabled");
            $("#_pmnewpn").attr("disabled", "disabled");
            $("#_btnsaveapprove").css("display", "none");


            $("#_anlysstatustectech").attr("disabled", "disabled");
            $("#_anlysafterprotectech").attr("disabled", "disabled");
            $("#_scrapdatetectech").attr("disabled", "disabled");
            $("#atech").attr("disabled", "disabled");
            $("#btech").attr("disabled", "disabled");
            $("#ctech").attr("disabled", "disabled");
            $("#dtech").attr("disabled", "disabled");
            $("#etech").attr("disabled", "disabled");
            $("#ftech").attr("disabled", "disabled");
            $("#atech").attr('checked', false);
            $("#btech").attr('checked', false);
            $("#ctech").attr('checked', false);
            $("#dtech").attr('checked', false);
            $("#etech").attr('checked', false);
            $("#ftech").attr('checked', false);

            $("#_anlysstatustecpm").val("0");
            $("#_anlysafterprotecpm").val("0");
            $("#_pmdate").val("");
            $("#_pmtstus").val("0");
            $("#_pmnewpn").val("");
            $("#remakepm").val("");
            $("#a").attr('checked', false);
            $("#b").attr('checked', false);
            $("#c").attr('checked', false);
            $("#d").attr('checked', false);
            $("#e").attr('checked', false);
            $("#f").attr('checked', true);
            $("#f").removeAttr('disabled');

            $("#optionpm1").prop('checked', false);

            $("#optionpmtext1").val("");
            $("#optionpmtext1").attr("disabled", "disabled");
            $("#optionpmtext1").css("border-bottom", "1px solid #141415");

            $("#optionpm2").prop('checked', false);
            $("#optionpmtext2").val("");
            $("#optionpmtext2").attr("disabled", "disabled");
            $("#optionpmtext2").css("border-bottom", "1px solid #141415");

            $("#optionpm3").prop('checked', false);
            $("#optionpmtext3").val("");
            $("#optionpmtext3").attr("disabled", "disabled");
            $("#optionpmtext3").css("border-bottom", "1px solid #141415");

            $("#optionpm4").prop('checked', false);
            $("#optionpmtext4").val("");
            $("#optionpmtext4").attr("disabled", "disabled");
            $("#optionpmtext4").css("border-bottom", "1px solid #141415");
            $("#optionpm5").prop('checked', false);
            $("#optionpmtext5").val("");
            $("#optionpmtext5").attr("disabled", "disabled");
            $("#optionpmtext5").css("border-bottom", "1px solid #141415");
            $("#_claimcnitcost").text("");

            $("#_claimtotcost").text("");
            $("#_dmqty").val("");
            //$("#_butstus").val("0");
            $("#remakebu").val("");
            $("#buappdate").text("");
            $("#buappuser").text("");
            $("#displaydatebu").css("display", "none");

            $("#_dmqty_md").val("");
            $("#_butstus_md").val("0");
            $("#remakemd").val("");
        }
    });

</script>



</body>


</html>
