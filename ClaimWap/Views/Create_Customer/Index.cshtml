@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layoutindex.cshtml";
    var user = ViewBag.UserId;
    var userType = ViewBag.UserType;
    var claimno = ViewBag.Claimno;
    var usercode = ViewBag.UsrCode;
    var contact = ViewBag.Contact;
    var contactphone = ViewBag.ContactPhone;
}

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Create& Save Claim Document</title>
    <link href="~/Content/css/sb-admin-A.css" rel="stylesheet" />

    @*<link href="~/Content/css/TableFixedColandHeader.css" rel="stylesheet" />*@
    <link href="~/Scripts/JSautocomplete/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/JSautocomplete/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/JSautocomplete/jquery-ui.js"></script>
    <script src="~/Content/fixed-table-master/fixed-table.js"></script>
    <link href="~/Content/fixed-table-master/fixed-table.css" rel="stylesheet" />

    <style>
        .preserveLineBreaks {
            white-space: pre-line; /*or pre-wrap*/
        }

        input[type="file"] {
            display: block;
        }

        input[type="checkbox"] {
            width: 35px;
            zoom: 2;
            padding: 2px;
        }

        input[type="text"] {
            /*background: border-box border-box; */
            color: blue;
        }

        input[type="date"] {
            background: border-box border-box;
            color: blue;
        }

        .imageThumb {
            max-height: 75px;
            border: 2px solid;
            padding: 1px;
            cursor: pointer;
        }

        .removevideo {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .removevideo:hover {
                background: white;
                color: black;
            }

        .pip {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .pip1 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove1 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove1:hover {
                background: white;
                color: black;
            }

        .pip2 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove2 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove2:hover {
                background: white;
                color: black;
            }

        .pip3 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove3 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove3:hover {
                background: white;
                color: black;
            }

        .pip4 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .pip {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove4 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove4:hover {
                background: white;
                color: black;
            }
        /*#receclaim {
            position: relative;
            width: 700px;
            background-color: #aaa;
            overflow: hidden;
            border-collapse: collapse;
        }
        #receclaim tbody {
                position: relative;
                display: block;
                width: 1200px;
                height: 239px;
                overflow: scroll;
            }*/

        .zoom {
            transition: transform .2s; /* Animation */
            margin: 0 auto;
        }

            .zoom:hover {
                transform: scale(4.5); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
            }

        .video-frame {
            width: 100%;
            height: 195px;
            border: 4px solid #dc3545;
            box-shadow: 1px 2px 3px #dc3545;
            border-radius: 3px;
        }

        .title {
            font-weight: 500;
            font-size: 14px;
            text-align: center;
            margin-bottom: 10px;
            margin-top: 10px;
            background-color: #dc3545;
            color: white;
            box-shadow: 1px 2px 4px #dc3545;
        }
    </style>

</head>
<body>
    <!-- Modal -->

    <div id="myModal" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog modal-lg" style=" max-width: 1200px;">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Invoice History</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" @*style="overflow-x:scroll"*@>
                    <div id="modal-message"></div>
                    <div id="fixed-table-container-1" class="fixed-table-container">
                        <table id="_tbinvoicehiscx">
                            <thead>
                                <tr>
                                    <th style=" min-width: 115px; height: 60px; border: 1px solid #222;">Invoice No</th>
                                    @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Customer</th>
                                    <th style=" min-width: 85px; height: 60px; border: 1px solid #222;">Invoice Date</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Parts No.</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Parts No.Customer</th>
                                    <th style=" min-width: 200px; height: 60px; border: 1px solid #222;">Description</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Qty</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">จำนวน<br />ที่เคลมได้</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sale Man</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Po No.</th>
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Foc</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <!-- ModalShipping -->
    <div id="ModalShipping" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog modal-lg" style="overflow-y: scroll;height: 750px;">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Ship to code</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" @*style="overflow-x:scroll"*@>
                    <div id="modal-message"></div>
                    <div id="fixed-table-container-5" class="fixed-table-container" style="overflow: auto; position: relative; height: 300px;">
                        <table id="shipping">
                            <thead>
                                <tr>
                                    <th>Customer</th>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Name2</th>
                                    <th>Address</th>
                                    <th>Address2</th>
                                    <th>City</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="card mb-12">

                    <div id="openShipping" style="display:block;">
                        <div class="col-md-4">
                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">ระบุจำนวนกล่องที่จะให้รถไปรับ<span class="glyphicon glyphicon-hand-right"></span></span>
                                    <select id="qtybox" style="border-bottom: 1px solid #c51717;">
                                        <option>0</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                        <option>6</option>
                                        <option>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                        <option>10</option>
                                        <option>11</option>
                                        <option>12</option>
                                        <option>13</option>
                                        <option>14</option>
                                        <option>15</option>
                                        <option>16</option>
                                        <option>17</option>
                                        <option>18</option>
                                        <option>19</option>
                                        <option>20</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon">CustomerCode<span class="glyphicon glyphicon-hand-right"></span></span>
                                        <input type="text" id="CustomerShipping" class="form-control" disabled="disabled" /><span id="clval" style="background-color: #484343;font-size: x-large;color: white;width: 40px;border-bottom-right-radius: 50px;border-top-right-radius: 47px;text-align: center;cursor: pointer;">X</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <div class="input-group">
                                        @*<span class="input-group-addon" id="btnok" style="background-color: #7FC1A9;cursor: pointer;color: white;">Ship To Code<span class=" glyphicon glyphicon-hand-right"></span></span>*@
                                        <input type="button" id="btnok" class="btn-default" name="example" value="ส่งตรวจสอบ" style="background-color: aqua;">
                                        <span class="input-group-addon "><span id="scs" style="color: cyan;display:none"></span><span></span></span>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-6">

                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon">Name<span class="glyphicon glyphicon-hand-right"></span></span>
                                        <input type="text" id="NameShipping" class="form-control" disabled="disabled" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon">Code<span class="glyphicon glyphicon-hand-right"></span></span>
                                        <input type="text" id="codeShipping" class="form-control" disabled="disabled" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group">

                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon">Address<span class="glyphicon glyphicon-hand-right"></span></span>
                                        <input type="text" id="AddressShipping" class="form-control" disabled="disabled" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <textarea rows="4" cols="80" id="remakeclaim" placeholder="Comment สำหรับสั่งให้รถไปรับ"></textarea>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    @*<button type="button" class="btn btn-default" data-dismiss="modal">Cancel Ship To Code</button>*@
                </div>
            </div>
        </div>



    </div>

    <!-- EndModalShipping -->
    <!-- Modalconfirm-Shipto-->
    <div class="modal fade" id="confirm-Shipto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                </div>
                <div class="modal-body">
                    คุณต้องการเลือก Ship To Code หรือไม่  <i class="fa fa-truck fa-3x"></i> <i class="fa fa-truck fa-2x"></i>
                </div>
                <div class="modal-footer">



                    <button type="button" id="btnnext" class="btn btn-default" data-dismiss="modal">เลือก</button>
                    <button type="button" id="btnconfirm" class="btn btn-success btn-ok" data-dismiss="modal">ไม่เลือก ส่งตรวจสอบเลย</button>
                </div>
            </div>
        </div>

    </div>
    <!-- Modalconfirm-Shipto-->
    <div class="modal fade" id="myModalimage" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Image</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="overflow-x:scroll">
                    <table id="_tbimage">
                        <thead>
                            <tr>
                                <th style="min-width: 645px;height: 60px;border: 1px solid #222;text-align: center;">Image</th>
                                @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@

                                <th style="min-width: 134px;height: 60px;border: 1px solid #222;text-align: center;">Delete</th>


                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Trigger the modal with a button -->
    <div class="card mb-12">
        <div class="card-header">
            <div class="row">
                <div class="col-sm-3">
                    <i class="fa fa-table"></i> ค้นหารายการสินค้า <li id="clickmeheader" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>

            </div>
        </div>
        <div class="card-body" id="myDIVheader">

            <div class="row" style="margin-bottom: 15px;">

                <div class="col-sm-3">
                    <span> <i class="fa fa-pencil"></i>Company:</span>
                    <select class="bar" id="_company">
                        <option value="0" disabled>Choose option</option>
                        <option value="TAC" selected>TAC</option>
                        <option value="AAC">AAC</option>
                        <!-- <option value="ALL">ALL</option>-->

                    </select>
                </div>
                <div class="col-sm">

                </div>
            </div>

            <div class="row">

                <div class="col-md-4">
                    <span> <i class="fa fa-pencil"></i>Customer ID:</span>
                    <div class="input-group">

                        <input type="text" required id="_cusno" placeholder="Search Customer" value="@usercode" style="border-bottom: 5px solid #b33c0f;" disabled="disabled">

                    </div>
                    <div class="input-group-btn">
                        <span> <i class="fa fa-pencil"></i>Customer Name:</span>
                        <span class=" fa fa-user">Customer.:</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <span> <i class="fa fa-pencil"></i>Customer Name:</span>
                    <div class="input-group">

                        <input type="text" required id="_cusname" disabled="disabled" placeholder="Customer Name">
                    </div>
                    <div class="input-group-btn">
                        <span class=" fa fa-user">Customer.:</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Invoice No.:</span>
                        <span><input type="text" id="_invoiceno" /></span>
                    </div>
                </div>
                <div class="col-md-4" style="display:none">
                    <form>
                        <div class="group">

                            @*<label style="top: -20px;font-size: 14px;color: #5264AE;">SlmCod.</label>*@
                            <input type="text" id="slmcod" disabled="disabled">
                        </div>
                    </form>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Parts No.:</span>
                        <span><input type="text" id="_itemno" style="border-bottom: 5px solid #b33c0f;" /></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Parts No Cus.:</span>
                        <span><input type="text" id="_partnocus" style="border-bottom: 5px solid #b33c0f;" /></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Description:</span>
                        <span><input type="text" id="_description" disabled="disabled" /></span>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" id="btnmol" style="font-size: medium;padding-bottom: initial;">ค้นหาประวัติ</button>
                    </div>
                </div>

            </div>


        </div>
        <div class="card mb-12">
            <div class="card-header">
                <i class="fa fa-table"></i>รายละเอียดสินค้าเคลม <li id="clickme" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV">
                <div class="col-md-12">
                    <div class="row">

                    </div>
                    @*<div class="row">
                            <button type="button" class="btn btn-default" data-toggle="modal" data-target="#myModalmodelcar" id="btnmolcar" style="width: 20%;font-size: medium;padding-bottom: initial;">ข้อมูลเคลมสำหรับรุ่นรถ</button>
                        </div>*@
                    <div class="row">
                        <div class="col-md-6">

                            <div class="col-xs-4"><span id="_claimnosub"></span></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Customer Invoice.:</span>
                                <span><input type="text" id="_invcustomer" disabled="disabled" /></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Part No.:</span>
                                <span><input type="text" id="_itemnodes" disabled="disabled" /></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Description:</span>
                                <span><input type="text" id="_descriptiondes" disabled="disabled" /></span>
                            </div>
                        </div>


                    </div>
                    <div class="row">
                        <div class="col-md-1">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Uom:</span>
                                <span><input type="text" id="_uom" disabled="disabled"></span>
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Type:</span>
                                <span><input type="text" id="_focdis" disabled="disabled"></span>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">

                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Invoice No.:</span>
                                <span><input type="text" id="_invoicenodes" disabled="disabled" /></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Invoice Date:</span>
                                <span><input type="text" id="_psdate" disabled="disabled" /></span>
                            </div>
                        </div>

                    </div>
                    <div class="row">

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Pm.:</span>
                                <span><input type="text" id="_prd" disabled="disabled" /></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">

                                <span> <i class="fa fa-user"></i>Request by:</span>
                                <span><input type="text" id="requestby" disabled="disabled" /></span>

                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">

                                <span> <i class="fa fa-user"></i>Request Date:</span>
                                <span><input type="text" id="requestdate" disabled="disabled" /></span>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Claim Qty.:</span>
                                <span><input type="text" id="_claimqty" style="border-bottom: 5px solid #b33c0f;" /></span>
                            </div>
                        </div>





                    </div>


                    <div class="col-xs-6">
                        <div class="form-group">

                        </div>
                    </div>


                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                @*<span> <i class="fa fa-pencil"></i>Received by :</span>
                                    <span><input type="text" id="_receivedby1" /></span>*@
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                @*<span> <i class="fa fa-pencil"></i>Received date:</span>
                                    <span><input type="text" id="_receiveddate1" /></span>*@
                            </div>
                        </div>

                        <div class="col-xs-6">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mb-12">

                <div class="card-header">
                    <i class="fa fa-table"></i>ข้อมูลเคลมสำหรับเคลม <li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV1">
                    <div id="fixed-table-container-3" class="fixed-table-container" style="overflow-x: auto;">
                        <table id="_tbvehcar">

                            <tbody>
                                <tr>
                                    <td style="background: white;">1.สำหรับรถ Vehicle/Machine:<select id="_vemac" style="border-bottom: 5px solid #b33c0f;"></select>@*<input type="text" id="_vemac" style="border-bottom: 5px solid #b33c0f;" />*@</td>
                                    <td>2.รุ่น Model/Type:<input type="text" id="_moty" style="border-bottom: 5px solid #b33c0f;" /></td>
                                    <td>3.ปีผลิต Model Year:<input type="text" id="_modyear" /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">4.รหัสเครื่องยนต์ Engine Code:<input type="text" id="_encod" /></td>
                                    <td>5.หมายเลขตัวถังรถ Chassis No.:<input type="text" id="_chno" /></td>
                                    <td>6.รหัสปั้มเชื้อเพลิง Pump:<input type="text" id="_pump" /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">7.ประเภทสินค้า Type of Product:<input type="text" id="_typpro" disabled="disabled" /></td>
                                    <td>8.ใบรับประกันเลขที่เคลม Warranty Card No.:<input type="text" id="_warcarno" /></td>
                                    <td>9.ระยะทางการใช้งาน Milage(Km./Mile):<input type="text" id="_milage" @*style="border-bottom: 5px solid #b33c0f;"*@ /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">10.วันที่ชำรุด Date of Damage:<input type="date" id="_datofdam" style="border-bottom: 5px solid #b33c0f;" /></td>
                                    <td>
                                        11.ชั่วโมงการทำงาน Hour of Operation:<br />
                                        <div style="float: left;">
                                            ปี:<select id="_workda" style="width: 70px;border-bottom: 5px solid #b33c0f;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>

                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            เดือน:<select id="_workmonth" style="width: 70px;border-bottom: 5px solid #b33c0f;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>
                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            วัน:<select id="_workday" style="width: 70px;border-bottom: 5px solid #b33c0f;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>
                                                <option>13</option>
                                                <option>14</option>
                                                <option>15</option>
                                                <option>16</option>
                                                <option>17</option>
                                                <option>18</option>
                                                <option>19</option>
                                                <option>20</option>
                                                <option>21</option>
                                                <option>22</option>
                                                <option>23</option>
                                                <option>24</option>
                                                <option>25</option>
                                                <option>26</option>
                                                <option>27</option>
                                                <option>28</option>
                                                <option>29</option>
                                                <option>30</option>
                                                <option>31</option>
                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            ชม.:<input type="time" id="_worktime" style="width: 70px;height: 31px;border-bottom: 5px solid #b33c0f;" value="00:00" />
                                        </div>
                                    </td>
                                    <td>12.รหัสการผลิต Batch Code:<input type="text" id="_batcod" @*style="border-bottom: 5px solid #b33c0f;"*@ /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">13.วันที่ติดตั้ง: <input type="date" id="_installdate" style="border-bottom: 5px solid #b33c0f;" /></td>
                                    <td>14.ชื่อผู้ติดต่อรับสินค้าเคลม <input type="text" id="_claimcontact" style="border-bottom: 5px solid #b33c0f;" value="@contact" /></td>
                                    <td>15.เบอร์ติดต่อ <input type="text" id="_contact" style="border-bottom: 5px solid #b33c0f;" value="@contactphone" /></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card mb-12">

                <div class="card-header">
                    <i class="fa fa-table"></i>สาเหตุการเคลม <li id="clickme2" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV2">

                    <div class="col-md-12">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>สาเหตุการ Claim:</span>
                            <span><textarea rows="4" cols="80" id="causeclaim" style="border-bottom: 5px solid #b33c0f;"></textarea></span>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">

                                    <span>
                                        <select class="bar" id="_proceedto" style="border-bottom: 5px solid #b33c0f;"></select>
                                    </span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group">

                                    <span>
                                        <select class="bar" id="_statusclaim" style="border-bottom: 5px solid #b33c0f;"></select>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4" style=" color: blue;">
                                <div class="card-header bg-info text-white">
                                    <h6 class="text-uppercase">ติดต่อฝ่าย ขาย</h6>
                                </div>
                                1.คุณ ทศพล สุขสงวนทอง (เข้ม)  094-4651426 <br />
                                2.คุณ บุณฑริกา วงษ์อ่อน  (กุ๊กไก่)  089-4883069<br />

                                <div class="form-group">
                                    <button type="button" style="float: left;display:none;" id="_btnprint" class="badge-primary"><i class="fa fa-print"></i>  พิมพ์ใบสั่งรถไปรับของ</button>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card-header bg-info text-white">
                                    <h6 class="text-uppercase">Upload images ไม่เกิน 10MB</h6>
                                </div>
                                <input type='file' id="FileUpload1" accept="image/*" /><span id="ststus1" style="color: brown; font-size: larger;"></span>

                                <input type='file' id="FileUpload2" accept="image/*" /><span id="ststus2" style="color: brown; font-size: larger;"></span>
                                <input type="button" id="btnUpload1" value="Upload Files" style="display:none" />
                                <input type="button" id="btnUpload2" value="Upload Files" style="display:none" />
                                <input type='file' id="FileUpload3" accept="image/*" /><span id="ststus3" style="color: brown; font-size: larger;"></span>
                                <input type='file' id="FileUpload4" accept="image/*" /><span id="ststus4" style="color: brown; font-size: larger;"></span>
                                <input type="button" id="btnUpload3" value="Upload Files" style="display:none" />
                                <input type="button" id="btnUpload4" value="Upload Files" style="display:none" />
                            </div>
                            <div class="col-md-4">
                                <div id="appvideo">

                                    <div>
                                        <div class="card-header bg-info text-white">
                                            <h6 class="text-uppercase"> Upload video ไม่เกิน 50 MB</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="modal-body">

                                                    <div class="form-group">

                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input type="file" id="fileupload" name="fileupload" @*class="custom-file-input"*@ accept="video/*" />
                                                                <label class="custom-file-label"></label>
                                                            </div>
                                                            <div class="input-group-append">
                                                                <input type="submit" id="btnUpload" class="btn btn-secondary" value="Upload" style="display:none" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>


                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-4" style=" color: blue;">
                                <div class="card-header bg-info text-white">
                                    <h6 class="text-uppercase">ติดต่อฝ่าย เทคนิค</h6>
                                </div>
                                1.คุณ อภิชาติ  เป้าสาทร (อาจารย์ใบตอง หัวหน้า) 081-7141609<br />
                                2.คุณ นวภรณ์ งามวงษ์ (แอน แอดมิน) 089-5306134<br />
                                3.คุณ ณัฐปภัสร์ นิธิโชติจิราวุฒิ (กี้ แอดมิน) 084-3545514 <br />
                                4.คุณสุริยนต์ กุลอ่อน(อ๊อฟ แอดมิน) 061-3891539
                            </div>
                        </div>
                    </div>


                </div>

            </div>


            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <button type="button" style="float: right;" id="_btnsave">บันทึกลงตระกร้า</button>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <button type="button" style="width:45%;" id="_btnsenclim">ยืนยันส่งตรวจสอบ</button>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <button type="button" id="refresh" style="width:30%;">Refresh</button>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="col-sm-6">
                    <span class="input-group-btn">
                        Claim No
                    </span>
                    <input type="text" required id="_claimno" disabled="disabled" class="form-control">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" id="Gendoc" style="display:none">Gen Doc</button>
                    </span>
                </div>
                <div id="fixed-table-container-2" class="fixed-table-container">

                    <table id="receclaim">
                        <thead>
                            <tr>
                                <th style="background-color: antiquewhite;">X</th>
                                <th style="text-align:center">line no</th>
                                <th>Item No.</th>
                                <th style="text-align:center">Description.</th>
                                <th>Stock<br /> Group.</th>
                                <th>UOM</th>
                                <th>Claim<br /> Qty.</th>
                                <th style="text-align:center">ระยะ<br />การใช้งาน<br /> /Y/M/D/H</th>
                                <th style="text-align:center">Invoice No</th>
                                <th style="text-align:center">สาเหตุการเคลม</th>
                                <th style="text-align:center">ดำเนินการ</th>
                                @*<th>รูปภาพ</th>*@
                                <th>สถานะใบคำขอ</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Succes</strong>
                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <!-- EndModalsuccess -->
    <!-- ModalWarning -->
    <div id="myModalWarning" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog" role="document">

            <div class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong>
                <div class="modal-body">
                    <div id="textAlertWarningmes">Some text in the modal.</div>
                </div>

            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalShow" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong></strong>
                <div class="modal-body">
                    <div id="textAlertshow">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <!-- EndModalsuccess -->
    <input type="hidden" id="_cmno" value="@claimno" />
    <input type="hidden" id="_uderlogin" value="@user" />
    <input type="hidden" id="_udertype" value="@userType" />
    <input type="hidden" id="_udercode" value="@usercode" />
    <input type="text" hidden id="_hqty" />
    <input type="hidden" id="_tempreq" />
    <input type="hidden" id="sslmnam">
    <input type="hidden" id="_foc">
    <input type="hidden" id="_reminqty">

    @*<script src="~/Scripts/notview.js"></script>*@
    <script type="text/javascript">

        $("#_itemno").autocomplete({
            selectFirst: true,
            autoFocus: true,
            timeout: 100000,
            source: function (request, response) {
                var param = {
                    Name: $('#_itemno').val(),
                    XvalCompany: $('#_company').val()
                };
                $.ajax({
                    url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                    data: JSON.stringify(param),
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.slice(0, 20), function (item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function (XMLhttpsRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            select: function (event, ui) {
                var _val = ui.item.value;
                var _splito = "";
                _splito = _val.split('|');
                var splitval = _splito;
                $("#_description").val(_splito[1].trim());
                $("#_uom").val(_splito[2].trim());
                $("#_itemno").val(_splito[0].trim());
                var _itemno = _splito[0].trim();
                var _com = $("#_company").val();
                var _cusno = $("#_cusno").val();
                var _invoiceno = "";

                // getHisInvoice(_cusno, _itemno, _com, _invoiceno);

                getpastnocus(_com, _itemno, 3)
            },

            minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
        });
        $("#_partnocus").autocomplete({
            selectFirst: true,
            autoFocus: true,
            timeout: 100000,
            source: function (request, response) {
                var param = {
                    Name: $('#_partnocus').val(),
                    XvalCompany: $('#_company').val(),
                    XvalCus: $('#_cusno').val(),
                    fix: "1"
                };
                $.ajax({
                    url: '@Url.Action("GetdateitemCrossRef", "GetdataCenter")',
                    data: JSON.stringify(param),
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.slice(0, 20), function (item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function (XMLhttpsRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            select: function (event, ui) {
                var _val = ui.item.value;
                var _splito = "";
                _splito = _val.split('|');
                var splitval = _splito;
                $("#_description").val(_splito[1].trim());
                $("#_itemno").val(_splito[2].trim());
                $("#_partnocus").val(_splito[0].trim());
                var _itemno = _splito[0].trim();
                var _com = $("#_company").val();
                var _cusno = $("#_cusno").val();
                var _invoiceno = "";
                // getHisInvoice(_cusno, _itemno, _com, _invoiceno);

                //getpastnocus(_com, _itemno, 3)
            },

            minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
        });
        function getpastnocus(_com, _itemno, fix) {

            $.ajax({
                url: '@Url.Action("GetdateitemCrossRef", "GetdataCenter")',
                data: {
                    Name: _itemno,
                    XvalCompany: _com,
                    XvalCus: $('#_cusno').val(),
                    fix: fix
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    $("#_partnocus").val(data[0]);


                }
            });
        }
        $(document).ready(function () {
            $('#Sccreateclaim').css("background-color", "rgb(9, 183, 9)");
            function addCommas(nStr) {
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }


            var waitingDialog = waitingDialog || (function ($) {
                'use strict';

                // Creating modal dialog's DOM
                var $dialog = $(
                    '<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
                    '<div class="modal-dialog modal-m">' +
                    '<div class="modal-content">' +
                        '<div class="modal-header"><h3 style="margin:0;"></h3></div>' +
                        '<div class="modal-body">' +
                            '<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>' +
                        '</div>' +
                    '</div></div></div>');

                return {

                    show: function (message, options) {
                        // Assigning defaults
                        if (typeof options === 'undefined') {
                            options = {};
                        }
                        if (typeof message === 'undefined') {
                            message = 'Loading';
                        }
                        var settings = $.extend({
                            dialogSize: 'm',
                            progressType: '',
                            onHide: null // This callback runs after the dialog was hidden
                        }, options);

                        // Configuring dialog
                        $dialog.find('.modal-dialog').attr('class', 'modal-dialog').addClass('modal-' + settings.dialogSize);
                        $dialog.find('.progress-bar').attr('class', 'progress-bar');
                        if (settings.progressType) {
                            $dialog.find('.progress-bar').addClass('progress-bar-' + settings.progressType);
                        }
                        $dialog.find('h3').text(message);
                        // Adding callbacks
                        if (typeof settings.onHide === 'function') {
                            $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                                settings.onHide.call($dialog);
                            });
                        }
                        // Opening dialog
                        $dialog.modal();
                    },
                    /**
                     * Closes dialog
                     */
                    hide: function () {
                        $dialog.modal('hide');
                    }
                };

            })(jQuery);
            n = new Date();
            y = n.getFullYear();
            m = n.getMonth() + 1;
            mm = ("0" + (n.getMonth() + 1)).slice(-2);
            dd = ("0" + (n.getDate() + 1)).slice(-2);
            d = n.getDate();
            $("#_tempreq").val(d + "/" + m + "/" + y);
            $("#requestdate").val(d + "/" + m + "/" + y);
            $("#receiveddate").val(d + "/" + m + "/" + y);



            $("#_datofdam").val(y + "-" + mm + "-" + dd);
            $("#_installdate").val(y + "-" + mm + "-" + dd);

            function splitval(_val) {
                var _splito = "";
                _splito = _val.split('|');

                return _splito[0];
            }
            $("#_partnocus").click(function () { $(this).select(); });
            $("#_itemno").click(function () { $(this).select(); });
            $("#dxx").on("click", function () {
                waitingDialog.show('Custom message', { dialogSize: 'sm', progressType: 'warning' }); setTimeout(function () { waitingDialog.hide(); }, 2000);
            });
            var UserId = $("#_uderlogin").val();
            $("#requestby").val(UserId);
            var udercode = $("#_udercode").val();
            $.ajax({
                url: '@Url.Action("GetdateByCusCode", "GetdataCenter")',
                data: {
                    CusCode: udercode,
                    Slm: "ALL"
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    $("#_cusname").val(data.Cusname);
                    $("#slmcod").val(data.CusSlmcode);

                }
            });
            $.ajax({
                url: '@Url.Action("GetdataNVAttribute", "GetdataCenter")',

                data: {

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var select = $("#_vemac");
                    select.children().remove();
                    select.append($("<option>").val("").text("เลือกข้อมูลสำหรับรถ"));
                    $(data).each(function (index, item) {

                        select.append($("<option>").val(item.Description).text(item.Description));
                    });

                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 1
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_proceedto");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 15
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_statusclaim");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("สถานะรับของเคลม"));
                    $(data).each(function (index, item) {
                        if (item.CODE == "2" || item.CODE == "4") {
                            select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                        }
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                    //  $("#_statusclaim").val("2")
                }
            });
            $("#_claimqty").on("keyup", function (event) {

                var ids = $(this).val();
                // console.log(ids);


                //    $(this).keyup(function (event) {
                // alert(ids)
                if (event.which >= 37 && event.which <= 40) {
                    event.preventDefault();

                }
                $(this).val(function (index, value) {
                    return value
                                    .replace(/\D/g, "")
                                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",");

                });

                // });
            });
            $("#clickmeheader").on("click", function (e) {

                myFunctionheader();
            });
            function myFunctionheader() {
                var x = document.getElementById("myDIVheader");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme").on("click", function (e) {

                myFunction();
            });
            function myFunction() {
                var x = document.getElementById("myDIV");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme1").on("click", function (e) {

                myFunction1();
            });
            function myFunction1() {
                var x = document.getElementById("myDIV1");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme2").on("click", function (e) {

                myFunction2();
            });
            function myFunction2() {
                var x = document.getElementById("myDIV2");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#_claimqty").on("keyup", function () {

                var ids = $(this).val();
                // var _cqty = $('#_hqty').val();
                var _cqty = $('#_reminqty').val();
                if (parseInt(ids) > parseInt(_cqty)) {
                    $(this).val("");
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("จำนวนที่สามารถเคลมได้:" + _cqty);
                    $("#myModalWarning").modal();
                    // alert("ใส่จำนวนเกินจำนวนเปิดInvoice " + _cqty);
                    return false;
                }
            });

            $("#btnmol").on("click", function () {

                var _cusnosp = $("#_cusno").val();
                var _cusno = "";
                if (_cusnosp != "") {
                    _splito = _cusnosp.split('|');
                    var splitval = _splito;
                    _cusno = _splito[0].trim();
                } else {
                    _cusno = "";
                }
                if (_cusno == "") {

                    alert("กรุณาระบุลูกค้า");
                    return false;
                }
                var _itemno = $("#_itemno").val();
                if (_itemno == "") {

                    // alert("กรุณาระบุ P/N สำหรับการเคลม");
                    // return false;
                }
                var _invoiceno = $("#_invoiceno").val();
                var _com = $("#_company").val();

                // $("#_itemno").val("");
                //  $("#_description").val("");
                $("#_uom").val("");
                $("#_invoiceno").val("");
                $("#_psdate").val("");
                $("#_claimqty").val("");
                //$("#_workda").val(worktimeup);
                $("#causeclaim").val("");
                $("#_statusclaim").val("2");
                $("#_proceedto").val("");

                $("#_workda").val("0"); //ระยะใช้งาน//
                $("#_workmonth").val("0"); //ระยะใช้งาน//
                $("#_workday").val("0");//ระยะใช้งาน//
                $("#_worktime").val("00:00");//ระยะใช้งาน//
                //$("#_workda").val(worktimeup);//ระยะใช้งาน//
                $("#_vemac").val("");
                $("#_moty").val("");
                $("#_modyear").val("");
                $("#_encod").val("");
                $("#_chno").val("");
                $("#_pump").val("");
                $("#_typpro").val("");
                $("#_warcarno").val("");
                $("#_milage").val("");
                $("#_datofdam").val(y + "-" + mm + "-" + dd);
                $("#_installdate").val(y + "-" + mm + "-" + dd);
                $("#_batcod").val("");
                // waitingDialog.show();
                var _flength = $('#receclaim').find('tbody').find('tr').length
                // alert(_flength)

                $('#_tbinvoicehiscx > tbody:last-child').html("");
                getHisInvoice(_cusno, _itemno, _com, _invoiceno, _flength);
            });
            function getHisInvoice(_cusno, _itemno, _com, _invoiceno, _flength) {
                var _splito = "";
                _splito = _itemno.split('|');
                var splitval = _splito;
                var _itemnosp = _splito[0].trim();
                var _slmcod = $("#slmcod").val();
                // GetShipto()
                waitingDialog.show();
                // waitingDialog.hide();
                $.ajax({
                    url: '@Url.Action("GetdataInvoicestatud", "GetdataCenter")',
                    data: {
                        _cusno: _cusno,
                        _itemno: _itemnosp,
                        _invoiceno: _invoiceno,
                        _com: _com,
                        _statdate: "",
                        _enddate: "",
                        _foc: "",
                        _slmcod: _slmcod,
                        _flength: _flength
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        // console.log(data);
                        waitingDialog.hide();
                        $('#_tbinvoicehiscx > tbody:last-child').html("");
                        if (data.Getdata.length > 0) {

                            $("#modal-message").text("");
                            var SubmithtmlPage = '';
                            for (var i = 0; i < data.Getdata.length; i++) {
                                var xx = data.Getdata[i].val.STKDES;

                                SubmithtmlPage = '<tr style="cursor: pointer;" stkcod="' + data.Getdata[i].val.STKCOD + '" stkdes="' + data.Getdata[i].val.STKDES + '" uom="' + data.Getdata[i].val.Uom + '" people="' + data.Getdata[i].val.PEOPLE + "|" + data.Getdata[i].val.CUSNAM + '" docno="' + data.Getdata[i].val.DOCNUM + '" pstdat ="' + data.Getdata[i].val.PSTDAT + '" qtyinv ="' + data.Getdata[i].val.Qty + '">';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 115px;border: 1px solid #222;cursor: pointer;" id="clickno"  people="' + data.Getdata[i].val.PEOPLE + "|" + data.Getdata[i].val.CUSNAM + '" remainqty="' + data.Getdata[i].val.QTY_Remaining + '"  foc="' + data.Getdata[i].val.FOC + '" stkcod="' + data.Getdata[i].val.STKCOD + '" stkdes="' + data.Getdata[i].val.STKDES + '" uom="' + data.Getdata[i].val.Uom + '" docno="' + data.Getdata[i].val.DOCNUM + '" pstdat ="' + data.Getdata[i].val.PSTDAT + '" qtyinv ="' + data.Getdata[i].val.Qty + '" qtyinv ="' + data.Getdata[i].val.Qty + '"  GrpName="' + data.Getdata[i].val.GrpName + '" ProdName ="' + data.Getdata[i].val.ProdName + '" Prod ="' + data.Getdata[i].val.Prod + '">' + data.Getdata[i].val.DOCNUM + '</td>';
                                //   SubmithtmlPage += '<td style="text-align: -webkit-center;padding-top: 4px;background-color: #bbc;min-width: 80px;border: 1px solid #222;"><input type="checkbox" id="blahA" value="1"/></td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.PEOPLE + "<br>|" + data.Getdata[i].val.CUSNAM + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 85px;border: 1px solid #222;">' + data.Getdata[i].val.PSTDAT + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.STKCOD + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.CrRefNo + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 200px;border: 1px solid #222;"><div  class="preserveLineBreaks">' + data.Getdata[i].val.STKDES + '</div></td>';
                                //SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.Uom + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + addCommas(data.Getdata[i].val.Qty) + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;background-color: aqua;">' + addCommas(data.Getdata[i].val.QTY_Remaining) + '</td>';
                                // SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.Price).toFixed(2)) + '</td>';
                                // SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.Amt).toFixed(2)) + '</td>';
                                // SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.DiscountPer).toFixed(2)) + '</td>';
                                //SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.DiscountAmt).toFixed(2)) + '</td>';
                                // SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.Net_Price).toFixed(2)) + '</td>';
                                // SubmithtmlPage += '<td style="background-color: #bbc;border: 1px solid #222;">' + addCommas(parseFloat(data.Getdata[i].val.NetAmt).toFixed(2)) + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.SLMCOD + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.EXTDOC + '</td>';
                                SubmithtmlPage += '<td style="background-color: #bbc;min-width: 80px;border: 1px solid #222;">' + data.Getdata[i].val.FOC + '</td>';

                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.PEOPLE + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.CUSNAM + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.SLMCOD + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.SEC + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + '</td>';

                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.AsOf + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.LastClaimNo + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.LastClaimdate + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.ClaimStatus + '</td>';
                                //SubmithtmlPage += '<td>' + data.Getdata[i].val.COMP + '</td>';
                                SubmithtmlPage += '</tr>';
                                $('#_tbinvoicehiscx > tbody:last-child').append(SubmithtmlPage);

                            }
                            var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
                        } else {
                            $("#myModal").modal('hide');
                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text("No Data.....");
                            $("#myModalWarning").modal();
                            $("#_invcustomer").val("");
                            $("#_itemnodes").val("");
                            $("#_descriptiondes").val("");
                            $("#_uom").val("");
                            $("#_invoicenodes").val("");
                            $("#_psdate").val("");
                            $("#_prd").val("");
                            $("#_typpro").val("");
                            $("#_claimqty").val("");

                            $("#_vemac").val("");
                            $("#_moty").val("");
                            $("#_modyear").val("");
                            $("#_encod").val("");
                            $("#_chno").val("");
                            $("#_pump").val("");
                            $("#_typpro").val("");
                            $("#_warcarno").val("");
                            $("#_milage").val("");
                            $("#_datofdam").val("");
                            $("#_workda").val("0");
                            $("#_workmonth").val("0");
                            $("#_workmonth").val("0");
                            $("#_workday").val("0");
                            $("#_worktime").val("");
                            $("#_batcod").val("");

                            $("#causeclaim").val("");
                            $("#_proceedto").val("0");
                            $("#_statusclaim").val("2");
                            //waitingDialog.hide();
                            //$("#modal-message").empty();
                            //$("#modal-message").text("No Data.....");

                            //$("#myModal").modal();

                            //$("#myModal").on("click", function () {
                            //    alert("xxx")
                            //    $("#myModal").modal('hide');
                            //});
                        }
                    }
                });
            }
            $("#_tbinvoicehiscx").on("click", "tr #clickno", function () {
                $('#_invcustomer').val("");
                $('#_itemno').val("");
                $('#_description').val("");
                $('#_uom').val("");
                $('#_hqty').val("");
                $('#_invoiceno').val("");
                $('#_psdate').val("");
                $('#_claimqty').val("");
                $('#_workda').val("0");
                $('#causeclaim').val("");
                $('#_proceedto').val("0");
                $('#_statusclaim').val("2");
                var stkcod = $(this).attr('stkcod');
                var stkcdes = $(this).attr('stkdes');
                var uom = $(this).attr('uom');
                var docno = $(this).attr('docno');
                var pstdat = $(this).attr('pstdat');
                var qtyinv = $(this).attr('qtyinv');
                var grpname = $(this).attr('grpname');
                var prod = $(this).attr('prod');
                var prodname = $(this).attr('prodname');
                var foc = $(this).attr('foc');
                var people = $(this).attr('people');

                var remainqty = $(this).attr('remainqty');
                if (remainqty == "0") {

                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("จำนวนไม่เพียงพอ");
                    $("#myModalWarning").modal();
                    return false;
                }
                if (foc != '0') {
                    $('#_proceedto').val("2");
                    $('#_proceedto').attr("disabled", "disabled");
                    $('#_focdis').val("FOC");
                } else {
                    $('#_proceedto').val("0");
                    $('#_proceedto').removeAttr('disabled');
                    $('#_focdis').val("");
                }
                //$('#_cusno').val(people);
                $('#_invcustomer').val(people);
                $('#_reminqty').val(remainqty);
                $('#_foc').val(foc);
                $('#_itemno').val(stkcod);
                $('#_description').val(stkcdes);
                $('#_itemnodes').val(stkcod);
                $('#_descriptiondes').val(stkcdes);
                $('#_uom').val(uom);
                $('#_hqty').val(qtyinv);
                $('#_invoiceno').val(docno);
                $('#_psdate').val(pstdat);
                $('#_invoicenodes').val(docno);
                $('#_psdatedes').val(pstdat);
                $('#_typpro').val(grpname);
                $('#_prd').val(prod + "/" + prodname);
                $("#myModal").modal('hide');

            });


            $("#_btnsave").on("click", function (e) {

                var isValid = true;
                if (navigator.onLine) {
                    var xcusno = $("#_cusno").val();
                    if (xcusno == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุลูกค้า");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xitemno = $("#_itemno").val();
                    if (xitemno == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุเบอร์สินค้า กดค้นหาประวัติ เพื่อเลือกรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xinvoiceno = $("#_invoiceno").val();
                    if (xinvoiceno == "") {

                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุเลขที่ Invoice กดค้นหาประวัติ เพื่อเลือกรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var cusno = $("#_invcustomer").val();
                    var _splitocus = "";
                    if (cusno != "") {
                        _splitocus = cusno.split('|');
                        var splitvalcus = _splitocus;
                        var _splitocus = splitvalcus[0].trim();
                    } else {
                        _splitocus = "";
                    }
                    if (_splitocus == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อระบุรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    if (_splitocus == 'undefined') {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อระบุรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    };
                    if (_splitocus == null) {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อระบุรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    };
                    if (_splitocus == "null") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อระบุรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    };
                    var slmcod = $("#slmcod").val();

                    if (slmcod == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ SalesMan");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    if (slmcod == null) {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ SalesMan");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    if (slmcod == "null") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ SalesMan");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    if (slmcod == 'undefined') {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ SalesMan");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var _itemno = $("#_itemnodes").val();
                    if (_itemno == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อเลือกรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    if (_itemno == "null") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อเลือกรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var invoiceno = $("#_invoicenodes").val();
                    if (invoiceno == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อเลือกรายละเอียดสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xclaimqty = $("#_claimqty").val();
                    if (xclaimqty == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุจำนวนที่ต้องการเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }

                    var xvehicle = $("#_vemac").val();
                    if (xvehicle == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุข้อมูลสำหรับรถ Vehicle/Machine");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xmodeltype = $("#_moty").val();
                    if (xmodeltype == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุข้อมูล รุ่่น Model/Type");
                        $("#myModalWarning").modal();
                        return false;
                    }

                    var xdateofdamage = $("#_datofdam").val();
                    if (xdateofdamage == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุวันที่ชำรุด Date of Damage");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xyear = $("#_workda").val();
                    var xmonth = $("#_workmonth").val();
                    var xday = $("#_workday").val();
                    var xtime = $("#_worktime").val();
                    if (xyear == null) {
                        xyear = "0";
                    }
                    if (xmonth == null) {
                        xmonth = "0";
                    }
                    if (xday == null) {
                        xday = "0";
                    }
                    if (xtime == null) {
                        xtime = "00:00";
                    } else if (xtime == "") {
                        xtime = "00:00";
                    }

                    var xworktime = xyear + "/" + xmonth + "/" + xday + "/" + xtime;

                    if (xworktime == "0/0/0/00:00") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ ข้อมูลชั่วโมงการทำงาน Hour of Operation");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xinstalldate = $("#_installdate").val();
                    if (xinstalldate == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ วันที่ติดตั้ง");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xclaimcontact = $("#_claimcontact").val();
                    if (xclaimcontact == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ ชื่อผู้ติดต่อรับสินค้าเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xcontact = $("#_contact").val();

                    if (xcontact == ""){
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ เบอร์ติดต่อ");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xcauseclaim = $("#causeclaim").val();
                    if (xcauseclaim == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ สาเหตุการ Claim");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xproceedto = $("#_proceedto").val();
                    if (xproceedto == "0") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ ต้องการให้ดำเนินการ");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var xstatusclaim = $("#_statusclaim").val();
                    if (xstatusclaim == "0") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุ สถานะรับของเคลม");
                        $("#myModalWarning").modal();
                        return false;
                    }
                    var nokey = $("#_claimno").val();
                    if (nokey == "") {
                        var Gendoc;
                        var Clno = nokey;
                        var Com = $("#_company").val();
                        if (Com == "TAC") {
                            Gendoc = 'CMT';
                        } else {
                            Gendoc = 'CMA';
                        }
                        $.ajax({
                            url: '@Url.Action("Gendocno", "Createclaim_Sc")',
                            data: {
                                Gendoc: Gendoc,
                                Clno: Clno,
                                Com: Com
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                $("#_claimno").val(data.Docnocm);
                                var claimnokey = $("#_claimno").val();
                                if (claimnokey == "") {
                                    $("#textAlertWarningmes").empty();
                                    $("#textAlertWarningmes").text("กรุณากดสร้างรายการเคลมอีกรอบ");
                                    $("#myModalWarning").modal();
                                    return false;
                                } else {
                                    var claimno = $("#_claimno").val();
                                    var cusno = $("#_invcustomer").val();
                                    var _splitocus = "";
                                    if (cusno != "") {
                                        _splitocus = cusno.split('|');
                                        var splitvalcus = _splitocus;
                                        var _splitocus = splitvalcus[0].trim();
                                    } else {
                                        _splitocus = "";
                                    }

                                    var _itemno = $("#_itemnodes").val();
                                    var _splito = "";
                                    if (_itemno != "") {
                                        _splito = _itemno.split('|');
                                        var splitval = _splito;
                                        var _itemnosp = _splito[0].trim();
                                    } else {
                                        _itemnosp = "";
                                    }
                                    var com = $("#_company").val();
                                    var slmcod = $("#slmcod").val();


                                    var requestby = $("#_uderlogin").val();
                                    var requestdate = $("#requestdate").val();
                                    /////////////////////////////// //Line////////////////////////////////
                                    var itemnosp = _itemnosp;
                                    // var invoiceno = $("#_invoiceno").val();
                                    var invoiceno = $("#_invoicenodes").val();
                                    var uom = $("#_uom").val();
                                    var description = $("#_description").val();
                                    var claimqty = $("#_claimqty").val();

                                    var year = $("#_workda").val();
                                    var month = $("#_workmonth").val();
                                    var day = $("#_workday").val();
                                    var time = $("#_worktime").val();
                                    if (year == null) {
                                        year = "0";
                                    }
                                    if (month == null) {
                                        month = "0";
                                    }
                                    if (day == null) {
                                        day = "0";
                                    }
                                    if (time == null) {
                                        time = "0:00";
                                    }
                                    else if (time == "") {
                                        time = "0:00";

                                    }
                                    var worktime = year + "/" + month + "/" + day + "/" + time;

                                    var causeclaim = $("#causeclaim").val();
                                    var proceedto = $("#_proceedto").val();
                                    var proceedtotext = $("#_proceedto option:selected").text();
                                    var statusclaim = $("#_statusclaim").val();
                                    var statusclaimtext = $("#_statusclaim option:selected").text();
                                    var receivedby1 = $("#_receivedby1").val();
                                    var receiveddate1 = $("#_receiveddate1").val();
                                    var invoicedate = $("#_psdate").val();
                                    var requestby = $("#requestby").val();
                                    var requestdate = $("#requestdate").val();
                                    var count = 1;
                                    var count = $('#receclaim > tbody:last-child').children().length;
                                    var claimnosub = $("#_claimnosub").text();
                                    var vehicle = $("#_vemac").val();

                                    var modeltype = $("#_moty").val();

                                    var modelyear = $("#_modyear").val();
                                    var enginecode = $("#_encod").val();
                                    var chassisno = $("#_chno").val();
                                    var pump = $("#_pump").val();
                                    var typeofProduct = $("#_typpro").val();
                                    var warrantycardno = $("#_warcarno").val();
                                    var milage = $("#_milage").val();
                                    var dateofdamage = $("#_datofdam").val();

                                    var BatchCode = $("#_batcod").val();
                                    var _cqty = $('#_hqty').val();
                                    var valfoc = $('#_foc').val();
                                    var sefoc;
                                    if (valfoc != "0") {
                                        sefoc = "FOC";
                                    } else {
                                        sefoc = "";
                                    }
                                    var reminqtyold = $('#_reminqty').val();
                                    var reminqtynew = parseInt(reminqtyold) - parseInt(claimqty);
                                    var installdatecus = $("#_installdate").val();
                                    var claimcontactcus = $("#_claimcontact").val();
                                    var contactcus = $("#_contact").val();


                                    $.ajax({
                                        url: '@Url.Action("SaveClimtemp", "Create_Customer")',
                                        data: {
                                            inCLM_ID: claimno,
                                            CLM_NO: claimnosub,
                                            CUSCOD: _splitocus,
                                            inSTKCOD: _itemnosp,
                                            inSTKDES: description,
                                            inCLM_UOM: uom,
                                            inCLM_INVNO: invoiceno,
                                            inINV_QTY: _cqty,
                                            inCLM_INVDATE: invoicedate,
                                            inCLM_QTY: claimqty,
                                            inCLM_USEDAY: worktime,
                                            inCLM_CAUSE: causeclaim,
                                            inCLM_PERFORM: proceedto,
                                            inCLM_RCVSTATUS: statusclaim,
                                            inCLM_RCVBY: requestby,
                                            inCLM_RCVDATE: requestdate,
                                            InCom: com,
                                            vehicle: vehicle,
                                            modeltype: modeltype,
                                            modelyear: modelyear,
                                            enginecode: enginecode,
                                            chassisno: chassisno,
                                            pump: pump,
                                            typeofProduct: typeofProduct,
                                            warrantycardno: warrantycardno,
                                            milage: milage,
                                            dateofdamage: dateofdamage,
                                            BatchCode: BatchCode,
                                            infoc: sefoc,
                                            inreminqtynew: reminqtynew,
                                            incontactcus: contactcus,
                                            inclaimcontactcus: claimcontactcus,
                                            installdatecus: installdatecus
                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {
                                            console.log(data);
                                            //  alert(data.message)
                                            if (data.message == "true") {

                                                $("#_claimnosub").text(data.subno);

                                                $("#btnUpload1").click();
                                                $("#btnUpload2").click();
                                                $("#btnUpload3").click();
                                                $("#btnUpload4").click();
                                                $("#btnUpload").click();
                                                alert("สร้างรายการสำเร็จ")
                                                clearval()
                                                clearimage()
                                                 GetClimtemp(claimno)

                                            } else {
                                                $("#textAlertWarningmes").empty();
                                                $("#textAlertWarningmes").text(data.message);
                                                $("#myModalWarning").modal();
                                            }
                                        }
                                    });
                                }
                            }
                        });
                    } else {
                        var claimno = $("#_claimno").val();
                        var _itemno = $("#_itemnodes").val();
                        var _splito = "";
                        if (_itemno != "") {
                            _splito = _itemno.split('|');
                            var splitval = _splito;
                            var _itemnosp = _splito[0].trim();
                        } else {
                            _itemnosp = "";
                        }
                        var claimno = nokey;
                        var cusno = $("#_invcustomer").val();
                        var _splitocus = "";
                        if (cusno != "") {
                            _splitocus = cusno.split('|');
                            var splitvalcus = _splitocus;
                            var _splitocus = splitvalcus[0].trim();
                        } else {
                            _splitocus = "";
                        }
                        var com = $("#_company").val();
                        var slmcod = $("#slmcod").val();
                        //var requestby = $("#requestby").val();
                        var requestby = $("#_uderlogin").val();
                        var requestdate = $("#requestdate").val();
                        /////////////////////////////// //Line////////////////////////////////
                        var itemnosp = _itemnosp;
                        var invoiceno = $("#_invoicenodes").val();
                        var uom = $("#_uom").val();
                        var description = $("#_description").val();
                        var claimqty = $("#_claimqty").val();

                        var year = $("#_workda").val();
                        var month = $("#_workmonth").val();
                        var day = $("#_workday").val();
                        var time = $("#_worktime").val();
                        if (year == null) {
                            year = "0";
                        }
                        if (month == null) {
                            month = "0";
                        }
                        if (day == null) {
                            day = "0";
                        }
                        if (time == null) {
                            time = "0:00";
                        }
                        else if (time == "") {
                            time = "0:00";

                        }
                        var worktime = year + "/" + month + "/" + day + "/" + time;
                        // alert(worktime)
                        var causeclaim = $("#causeclaim").val();
                        var proceedto = $("#_proceedto").val();
                        var proceedtotext = $("#_proceedto option:selected").text();
                        var statusclaim = $("#_statusclaim").val();
                        var statusclaimtext = $("#_statusclaim option:selected").text();
                        var receivedby1 = $("#_receivedby1").val();
                        var receiveddate1 = $("#_receiveddate1").val();
                        var invoicedate = $("#_psdate").val();
                        var requestby = $("#requestby").val();
                        var requestdate = $("#requestdate").val();
                        var count = 1;
                        var count = $('#receclaim > tbody:last-child').children().length;
                        var claimnosub = $("#_claimnosub").text();
                        var vehicle = $("#_vemac").val();

                        var modeltype = $("#_moty").val();

                        var modelyear = $("#_modyear").val();
                        var enginecode = $("#_encod").val();
                        var chassisno = $("#_chno").val();
                        var pump = $("#_pump").val();
                        var typeofProduct = $("#_typpro").val();
                        var warrantycardno = $("#_warcarno").val();
                        var milage = $("#_milage").val();
                        var dateofdamage = $("#_datofdam").val();

                        var BatchCode = $("#_batcod").val();

                        var _cqty = $('#_hqty').val();
                        var valfoc = $('#_foc').val();
                        var sefoc;
                        if (valfoc != "0") {
                            sefoc = "FOC";
                        } else {
                            sefoc = "";
                        }
                        var reminqtyold = $('#_reminqty').val();
                        var reminqtynew = parseInt(reminqtyold) - parseInt(claimqty)
                        var installdatecus = $("#_installdate").val();
                        var claimcontactcus = $("#_claimcontact").val();
                        var contactcus = $("#_contact").val();
                        $.ajax({
                            url: '@Url.Action("SaveClimtemp", "Create_Customer")',
                            data: {
                                inCLM_ID: claimno,
                                CLM_NO: claimnosub,
                                CUSCOD: _splitocus,
                                inSTKCOD: _itemnosp,
                                inSTKDES: description,
                                inCLM_UOM: uom,
                                inCLM_INVNO: invoiceno,
                                inINV_QTY: _cqty,
                                inCLM_INVDATE: invoicedate,
                                inCLM_QTY: claimqty,
                                inCLM_USEDAY: worktime,
                                inCLM_CAUSE: causeclaim,
                                inCLM_PERFORM: proceedto,
                                inCLM_RCVSTATUS: statusclaim,
                                inCLM_RCVBY: requestby,
                                inCLM_RCVDATE: requestdate,
                                InCom: com,
                                vehicle: vehicle,
                                modeltype: modeltype,
                                modelyear: modelyear,
                                enginecode: enginecode,
                                chassisno: chassisno,
                                pump: pump,
                                typeofProduct: typeofProduct,
                                warrantycardno: warrantycardno,
                                milage: milage,
                                dateofdamage: dateofdamage,
                                BatchCode: BatchCode,
                                infoc: sefoc,
                                inreminqtynew: reminqtynew,
                                incontactcus: contactcus,
                                inclaimcontactcus: claimcontactcus,
                                installdatecus: installdatecus
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);

                                if (data.message == 'true') {

                                    $("#_claimnosub").text(data.subno);
                                    $("#btnUpload1").click();
                                    $("#btnUpload2").click();
                                    $("#btnUpload3").click();
                                    $("#btnUpload4").click();
                                    $("#btnUpload").click();
                                    alert("บีนทึกรายการสำเร็จ")
                                    clearval()
                                    clearimage()
                                    GetClimtemp(claimno)

                                } else {
                                    $("#textAlertWarningmes").empty();
                                    $("#textAlertWarningmes").text(data.message);
                                    $("#myModalWarning").modal();
                                    //$("#_claimno").val("");
                                }
                            }
                        });
                    }
                } else {
                    alert('Not connect to network...');
                    return false;
                }

            });
            $("#btnconfirm").on("click", function () {
                $("#btnok").click();
            });
            $("#btnok").on("click", function () {

                var claimno = $("#_claimno").val();
                var RCVBY = $("#_uderlogin").val();
                var data = $('#receclaim').find('tbody').find('tr').length
                var qtybox = $("#qtybox").val();
                var retur = $("#_statusclaim").val();
                if (retur == "2") {
                    if (qtybox == "0") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณาระบุจำนวนกล่องที่จะให้รถไปรับ");
                        $("#myModalWarning").modal();

                        return false;
                    }
                }
                if (data == "0") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("ไม่มีรายการสำหรับส่งตรวจสอบ");
                    $("#myModalWarning").modal();

                    return false;
                }
                var CusShipping = $('#CustomerShipping').val();
                var codeShipping = $('#codeShipping').val();
                var remakeclaim = $('#remakeclaim').val();
                $.ajax({
                    url: '@Url.Action("SaveClim", "Create_Customer")',
                    data: {
                        inCLM_ID: claimno,
                        inCLM_RCVBY: RCVBY,
                        inCusShipping: CusShipping,
                        incodeShipping: codeShipping,
                        inremakeclaim: remakeclaim,
                        inqtybox: qtybox
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                      
                        if (data.message == "true") {
                            $("#ModalShipping").hide();
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("ส่งตรวจสอบสำเร็จ");
                            $("#myModalSucces").modal();
                           
                            var valclim = claimno;
                            $.ajax({
                                url: '@Url.Action("GetClimdata", "GetdataCenter")',
                                data: {
                                    inCLM_ID: valclim
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    var udertype = 'SALES';
                                    console.log(data);
                                    for (var i = 0; i < data.Getdata.length; i++) {
                                        var claimno = data.Getdata[i].val.CLM_ID;
                                        var claimsubno = data.Getdata[i].val.CLM_NO_SUB;
                                        var wi = window.open("../Report/frmClaim.aspx?ClmNUM=" + btoa(claimno) + "/" + btoa(claimsubno) + "/" + btoa(udertype));
                                        wi.focus();
                                    }

                                    //for (var i = 0; i < data.Getdata.length; i++) {
                                    //    var claimno = data.Getdata[i].val.CLM_ID;
                                    //    var claimsubno = data.Getdata[i].val.CLM_NO_SUB;
                                    //    var wi = window.open("../Report/frmReceiveproduct.aspx?ClmNUM=" + btoa(claimno));
                                    //    wi.focus();
                                    //}
                                }
                            });


                            $("#receclaim > tbody").empty();
                            $("#_cusno").removeAttr('disabled');
                            // location.reload();
                            $("#_claimno").val("");

                            clearval();

                        } else {
                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text(data.message);
                            $("#myModalWarning").modal();
                        }
                    }
                });
            });
            $("#refresh").on("click", function () {
                location.reload();

            });
            $("#_btnsenclim").on("click", function () {

                var data = $('#receclaim').find('tbody').find('tr').length

                if (data == "0") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("ไม่มีรายการสำหรับส่งตรวจสอบ");
                    $("#myModalWarning").modal();

                    return false;
                }
                var cusno = $("#_invcustomer").val();
                var _splitocus = "";
                if (cusno != "") {
                    _splitocus = cusno.split('|');
                    var splitvalcus = _splitocus;
                    var _splitocus = splitvalcus[0].trim();
                } else {
                    _splitocus = "";
                }
                if (_splitocus == "") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อเลือก Ship-to");
                    $("#myModalWarning").modal();
                    return false;
                }

                //
                var _claimno = $("#_claimno").val();
                var _slmcod = $("#slmcod").val();


                $.ajax({
                    url: '@Url.Action("GetdataRcvStstus", "GetdataCenter")',
                    data: {
                        CM_NO: _claimno

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        var concm = data;

                        if (concm != "") {

                            $.ajax({
                                url: '@Url.Action("GetdataCusShipping", "GetdataCenter")',
                                data: {
                                    XXcus: _splitocus,
                                    XXslm: _slmcod,
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    var ck = data.Getdata.length;
                                    var cusship = $("#CustomerShipping").val();
                                    $("#btnnext").click();

                                }
                            });

                        } else {
                            $("#btnok").click();
                        }
                    }
                });
            });
            $(document).delegate('#btnnext', 'click', function () {
                //  $('#ClickShipping').trigger("click");
                // $("#ModalShipping").modal();


                // $(document).delegate('#ClickShipping', 'click', function () {
                var cusno = $("#_invcustomer").val();
                var _splitocus = "";
                if (cusno != "") {
                    _splitocus = cusno.split('|');
                    var splitvalcus = _splitocus;
                    var _splitocus = splitvalcus[0].trim();
                } else {
                    _splitocus = "";
                }
                if (_splitocus == "") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณากด ค้นหาประวัติ เพื่อเลือก Ship-to");
                    $("#myModalWarning").modal();
                    return false;
                }
                //
                var _slmcod = $("#slmcod").val();
                $.ajax({
                    url: '@Url.Action("GetdataCusShipping", "GetdataCenter")',
                    data: {
                        XXcus: _splitocus,
                        XXslm: _slmcod
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        $("#ModalShipping").modal();
                        $('#openShipping').css("display", "block");

                        $('#fixed-table-container-5 tbody:last-child').html("");
                        $("#scs").text(data.length)
                        var SubmithtmlPage = "";
                        var crt = "";
                        //for (var i = 0; i < data.length; i++) {
                        for (var i = 0; i < data.Getdata.length; i++) {
                            crt = data.Getdata[i].val.customer
                            SubmithtmlPage += '<tr style="cursor: pointer;" cus="' + data.Getdata[i].val.customer + '"  Code="' + data.Getdata[i].val.code + '"  Namecus="' + data.Getdata[i].val.name + '" Address="' + data.Getdata[i].val.address + '" Address_2="' + data.Getdata[i].val.address2 + '">';
                            if (_splitocus == crt) {
                                SubmithtmlPage += '<td style="background-color: red;color: bisque;">' + data.Getdata[i].val.customer + '</td>';
                            } else {
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.customer + '</td>';
                            }
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.code + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.name + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.name2 + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.address + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.address2 + '</td>';
                            SubmithtmlPage += '<td>' + data.Getdata[i].val.city + '</td>';
                            SubmithtmlPage += '</tr>';

                        }
                        $('#fixed-table-container-5  tbody:last-child').append(SubmithtmlPage);
                        // var fixedTable5 = fixTable(document.getElementById('fixed-table-container-5'));
                    }

                });
                //var fixedTable5 = fixTable(document.getElementById('fixed-table-container-5'));

            });
            $('#CancalShippto').click(function () {
                $('#codeShipping').val("");
                $('#CustomerShipping').val("");
                $('#NameShipping').val("");
                $('#AddressShipping').val("");

            });
            $('#clval').click(function () {

                $('#codeShipping').val("");
                $('#CustomerShipping').val("");
                $('#NameShipping').val("");
                $('#AddressShipping').val("");

            });


            //var fixedTable5 = fixTable(document.getElementById('fixed-table-container-5'));
            $("#shipping").on("click", "tr", function () {
                var cus = $(this).attr('cus');
                var code = $(this).attr('code');
                var name = $(this).attr('namecus');
                //var name = $(this).attr('name');
                var address = $(this).attr('address');
                var Address_2 = $(this).attr('Address_2');
                $('#CustomerShipping').val(cus);
                $('#codeShipping').val(code);
                $('#NameShipping').val(name);
                $('#AddressShipping').val(address + " " + Address_2);
                // $("#ModalShipping").modal('hide');

            });
            $("#myModalSucces").on("click", function () {
                location.reload();
            });
            $("#receclaim").on("click", "#btngetshowdata", function () {
                clearimage()
                var cusno = $("#_cusno").val();

                $("#_company").attr('disabled', 'disabled');
                $("#slmcod").attr('disabled', 'disabled');
                $("#requestby").attr('disabled', 'disabled');
                $("#requestdate").attr('disabled', 'disabled');
                $("#_cusno").attr('disabled', 'disabled');
                var comup = $(this).attr('comup');
                var clmnoup = $(this).attr('clmnoup');
                var clmno = $(this).attr('clmno');
                var itemup = $(this).attr('itemup');
                var invoicenoeup = $(this).attr('invoicenoeup');
                var proceedtoup = $(this).attr('proceedtoup');
                var statusclaimup = $(this).attr('statusclaimup');
                var worktimeup = $(this).attr('worktimeup');
                var claimqtyup = $(this).attr('claimqtyup');
                var causeclaimup = $(this).attr('causeclaimup'); //เหตุผลเคลม//

                var clmmachine = $(this).attr('clmmachine');
                var clmmodel = $(this).attr('clmmodel');
                var clmmodelyear = $(this).attr('clmmodelyear');
                var clmenginecode = $(this).attr('clmenginecode');
                var clmchassisno = $(this).attr('clmchassisno');
                var clminjecpump = $(this).attr('clminjecpump');
                var clmtypeproduct = $(this).attr('clmtypeproduct');

                var clmwarratyno = $(this).attr('clmwarratyno');
                var clmmilage = $(this).attr('clmmilage');
                var clmdatedamage = $(this).attr('clmdatedamage');
                var clmbatchcode = $(this).attr('clmbatchcode');
                var sp = worktimeup.split("/");

                var _spyear = sp[0];
                var _spmonth = sp[1];
                var _spday = sp[2];
                var _sphro = sp[3];
                var prodnam = $(this).attr('prodnam');
                var prode = $(this).attr('prode');
                var fax = $(this).attr('fax');
                var installdate = $(this).attr('installdate');
                var contact = $(this).attr('contact');
                var contacttel = $(this).attr('contacttel');


                var fax = $(this).attr('fax');
                if (fax == "1") {
                    $.ajax({
                        url: '@Url.Action("GetdataInvoicestatud", "GetdataCenter")',
                        data: {
                            _cusno: "",
                            _itemno: itemup,
                            _invoiceno: invoicenoeup,
                            _com: comup,
                            _statdate: "",
                            _enddate: ""
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data);

                            $("#_itemno").val(data.Getdata[0].val.STKCOD);
                            $("#_description").val(data.Getdata[0].val.STKDES);
                            $("#_itemnodes").val(data.Getdata[0].val.STKCOD);
                            $("#_descriptiondes").val(data.Getdata[0].val.STKDES);
                            $("#_uom").val(data.Getdata[0].val.Uom);
                            $("#_invoiceno").val(data.Getdata[0].val.DOCNUM);
                            $("#_invoicenodes").val(data.Getdata[0].val.DOCNUM);
                            $("#_psdate").val(data.Getdata[0].val.PSTDAT);
                            ////Get input display ///////
                            $("#_claimqty").val(claimqtyup);//Qty//

                            $("#causeclaim").val(causeclaimup);//เหตุผลเคลม//
                            $("#_proceedto").val(proceedtoup);//ดำเนินการ//
                            $("#_statusclaim").val(statusclaimup); //Status///
                            $("#_claimnosub").text(clmnoup);

                            $("#_workda").val(worktimeup);//ระยะใช้งาน//
                            $("#_vemac").val(clmmachine);
                            $("#_moty").val(clmmodel);
                            $("#_modyear").val(clmmodelyear);
                            $("#_encod").val(clmenginecode);
                            $("#_chno").val(clmchassisno);
                            $("#_pump").val(clminjecpump);
                            $("#_typpro").val(clmtypeproduct);
                            $("#_warcarno").val(clmwarratyno);
                            $("#_milage").val(clmmilage);
                            $("#_datofdam").val(clmdatedamage);
                            $("#_batcod").val(clmbatchcode);

                            $("#_installdate").val(installdate);
                            $("#_claimcontact").val(contact);
                            $("#_contact").val(contacttel);
                        }
                    });
                } else {
                    var cuscod = $(this).attr('cuscod');
                    var cusnam = $(this).attr('cusnam');
                    var slmcod = $(this).attr('slmcod');
                    var slmnam = $(this).attr('slmnam');
                    var stkdes = $(this).attr('stkdes');
                    var uomup = $(this).attr('uomup');
                    var invoicedete = $(this).attr('invoicedete');
                    $("#_invcustomer").val(cuscod + "|" + cusnam);
                    $("#_prd").val(prode + "/" + prodnam);
                    $("#_claimnosub").text(clmnoup);
                    $("#_company").val(comup);
                    $("#_cusno").val(cuscod);
                    $("#_cusname").val(cusnam);
                    $("#slmcod").val(slmcod);
                    $("#sslmnam").val(slmnam);
                    // $("#requestby").val();
                    $("#_itemno").val(itemup);
                    $("#_description").val(stkdes);
                    $("#_itemnodes").val(itemup);
                    $("#_descriptiondes").val(stkdes);

                    $("#_uom").val(uomup);
                    $("#_invoiceno").val(invoicenoeup);
                    $("#_invoicenodes").val(invoicenoeup);
                    $("#_psdate").val(invoicedete);
                    $("#_claimqty").val(claimqtyup);
                    //$("#_workda").val(worktimeup);
                    $("#causeclaim").val(causeclaimup);
                    $("#_statusclaim").val(statusclaimup);
                    $("#_proceedto").val(proceedtoup);

                    $("#_workda").val(_spyear); //ระยะใช้งาน//
                    $("#_workmonth").val(_spmonth); //ระยะใช้งาน//
                    $("#_workday").val(_spday);//ระยะใช้งาน//
                    $("#_worktime").val(_sphro);//ระยะใช้งาน//
                    //$("#_workda").val(worktimeup);//ระยะใช้งาน//
                    $("#_vemac").val(clmmachine);
                    $("#_moty").val(clmmodel);
                    $("#_modyear").val(clmmodelyear);
                    $("#_encod").val(clmenginecode);
                    $("#_chno").val(clmchassisno);
                    $("#_pump").val(clminjecpump);
                    $("#_typpro").val(clmtypeproduct);
                    $("#_warcarno").val(clmwarratyno);
                    $("#_milage").val(clmmilage);
                    $("#_datofdam").val(clmdatedamage);
                    $("#_batcod").val(clmbatchcode);

                    $("#_installdate").val(installdate);
                    $("#_claimcontact").val(contact);
                    $("#_contact").val(contacttel);
                    var nokey = $("#_claimno").val();
                    $.ajax({
                        url: '@Url.Action("GetfileVideo", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: clmnoup,
                            Im_No: ""
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            console.log(result.videolist)
                            if (result.videolist.length > 0) {
                                $(".pip").remove();
                                $("<span class=\"pip\">" +
                                "<video controls='controls' style='width: 600px; max-width: 100%;'>" +
                                "<source src=" + result.videolist[0].FilePath + ".mp4" + " type='video/mp4' videomode='720p' />" +
                                " </video>" +
                                 "<br/><span class=\"removevideo\"  remoimage=" + result.videolist[0].Name + " img=" + result.videolist[0].Name + " >Remove video</span>" +
                                 "</span>").insertAfter("##appvideo");

                                $(".removevideo").click(function () {
                                    $(this).parent(".pip").remove();
                                    $("#ststus").text("");

                                });
                            } else {
                                $(".pip").remove();
                                $("#ststus").text("");
                            }
                        },
                    });
                    //Getimage//
                    var nokey = $("#_claimno").val();
                    $.ajax({
                        url: '@Url.Action("GetPathImage", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: clmnoup
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            if (result.Getdata.length == 1) {
                                //alert("aaaa")
                                // alert(result.Getdata.length)
                                if (result.Getdata) {
                                    resultObj = eval(result.Getdata);
                                    var PATH1 = resultObj[0].val.PATH;
                                    if (PATH1 != '') {
                                        $(".pip1").remove();
                                        $("<span class=\"pip1\">" +
                                            "<img src=" + resultObj[0].val.PATH + "  id='imgLogo1' class='imageThumb'>" +
                                            "<br/><span class=\"name\" >" + resultObj[0].val.IMAGE_NAME + "</span>" +
                                            "<br/><span class=\"remove1\" remoimage=" + resultObj[0].val.IMAGE_ID + " img=" + resultObj[0].val.IMAGE_NAME + " >Remove image</span>" +
                                            "</span>").insertAfter("#FileUpload1");

                                        $(".remove1").click(function () {
                                            $(this).parent(".pip1").remove();
                                            $("#ststus1").text("");

                                        });
                                    } else {
                                        $(".pip1").remove();
                                        $("#ststus1").text("");
                                    }
                                }
                            } else if (result.Getdata.length == 2) {
                                //  alert("bbbb")
                                resultObj = eval(result.Getdata);
                                var PATH1 = resultObj[0].val.PATH;
                                var PATH2 = resultObj[1].val.PATH;

                                if (PATH1 != '') {
                                    $(".pip1").remove();
                                    $("<span class=\"pip1\">" +
                                        "<img src=" + resultObj[0].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[0].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove1\" remoimage=" + resultObj[0].val.IMAGE_ID + " img=" + resultObj[0].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload1");

                                    $(".remove1").click(function () {
                                        $(this).parent(".pip1").remove();
                                        $("#ststus1").text("");

                                    });

                                } else {
                                    $(".pip1").remove();
                                }
                                if (PATH2 != '') {
                                    $(".pip2").remove();
                                    $("<span class=\"pip2\">" +
                                         "<img src=" + resultObj[1].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\"  id=\"img2\">" + resultObj[1].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove2\" remoimage=" + resultObj[1].val.IMAGE_ID + " img=" + resultObj[1].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload2");
                                    $("#img2").val(resultObj[0].val.IMAGE_NAME);
                                    $(".remove2").click(function () {
                                        $(this).parent(".pip2").remove();
                                        $("#ststus2").text("");

                                    });

                                } else {
                                    $(".pip2").remove();
                                }

                            } else if (result.Getdata.length == 3) {
                                //alert("cccc")
                                // if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var PATH1 = resultObj[0].val.PATH;
                                var PATH2 = resultObj[1].val.PATH;
                                var PATH3 = resultObj[2].val.PATH;
                                if (PATH1 != '') {
                                    $(".pip1").remove();
                                    $("<span class=\"pip1\">" +
                                        "<img src=" + resultObj[0].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[0].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove1\" remoimage=" + resultObj[0].val.IMAGE_ID + " img=" + resultObj[1].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload1");
                                    $(".remove1").click(function () {
                                        $(this).parent(".pip1").remove();
                                    });
                                } else {
                                    $(".pip1").remove();
                                }
                                if (PATH2 != '') {
                                    $(".pip2").remove();
                                    $("<span class=\"pip2\">" +
                                         "<img src=" + resultObj[1].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[1].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove2\" remoimage=" + resultObj[1].val.IMAGE_ID + " img=" + resultObj[1].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload2");
                                    $(".remove2").click(function () {
                                        $(this).parent(".pip2").remove();
                                    });
                                } else {
                                    $(".pip2").remove();
                                }
                                if (PATH3 != '') {
                                    $(".pip3").remove();
                                    $("<span class=\"pip3\">" +
                                        "<img src=" + resultObj[2].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[2].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove3\" remoimage=" + resultObj[2].val.IMAGE_ID + " img=" + resultObj[1].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload3");
                                    $(".remove3").click(function () {
                                        $(this).parent(".pip3").remove();
                                    });
                                } else {
                                    $(".pip3").remove();
                                }
                                //}
                            }

                            else if (result.Getdata.length == 4) {
                                //   alert("dddd")
                                resultObj = eval(result.Getdata);
                                var PATH1 = resultObj[0].val.PATH;
                                var PATH2 = resultObj[1].val.PATH;
                                var PATH3 = resultObj[2].val.PATH;
                                var PATH4 = resultObj[3].val.PATH;
                                if (PATH1 != '') {
                                    $(".pip1").remove();
                                    $("<span class=\"pip1\">" +
                                        "<img src=" + resultObj[0].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[0].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove1\" remoimage=" + resultObj[0].val.IMAGE_ID + " img=" + resultObj[0].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload1");
                                    $(".remove1").click(function () {
                                        $(this).parent(".pip1").remove();
                                    });
                                } else {
                                    $(".pip1").remove();
                                }
                                if (PATH2 != '') {
                                    $(".pip2").remove();
                                    $("<span class=\"pip2\">" +
                                         "<img src=" + resultObj[1].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[1].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove2\" remoimage=" + resultObj[1].val.IMAGE_ID + " img=" + resultObj[1].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload2");
                                    $(".remove2").click(function () {
                                        $(this).parent(".pip2").remove();
                                    });
                                } else {
                                    $(".pip2").remove();
                                }
                                if (PATH3 != '') {
                                    $(".pip3").remove();
                                    $("<span class=\"pip3\">" +
                                        "<img src=" + resultObj[2].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[2].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove3\" remoimage=" + resultObj[2].val.IMAGE_ID + " img=" + resultObj[2].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload3");
                                    $(".remove3").click(function () {
                                        $(this).parent(".pip3").remove();
                                    });
                                } else {
                                    $(".pip3").remove();
                                }

                                if (PATH4 != '') {
                                    $(".pip4").remove();
                                    $("<span class=\"pip4\">" +
                                        "<img src=" + resultObj[3].val.PATH + "  class='imageThumb' >" +
                                        "<br/><span class=\"name\">" + resultObj[3].val.IMAGE_NAME + "</span>" +
                                        "<br/><span class=\"remove4\"remoimage=" + resultObj[3].val.IMAGE_ID + " img=" + resultObj[3].val.IMAGE_NAME + ">Remove image</span>" +
                                        "</span>").insertAfter("#FileUpload4");
                                    $(".remove4").click(function () {
                                        $(this).parent(".pip4").remove();
                                    });
                                } else {
                                    $(".pip4").remove();
                                }

                            } else if (result.Getdata.length == 0) {
                                $('#boximage').html("");
                                SubmithtmlPage = '<div class="col-sm-3" style="color: red;">';
                                SubmithtmlPage += 'ไม่มีภาพประกอบการเคลมสินค้า';
                                SubmithtmlPage += '</div>';
                                $('#boximage').append(SubmithtmlPage);
                            }
                        }
                    });
                }
            });
            var _cmno = $('#_cmno').val();
            if (_cmno != "") {

                $("#searchclaimno").val(_cmno);
                GetClimtemp(_cmno);
            }
            function GetClimtemp(claimnokey) {
                // var valclim = $("#searchclaimno").val();
                $("#_claimnosub").text("");
                var valclim = claimnokey
                $.ajax({
                    url: '@Url.Action("GetClimtemp", "Createclaim_Sc")',
                    data: {
                        inCLM_ID: valclim
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // var SubmithtmlPage = '';
                        $('#receclaim > tbody:last-child').html("");
                        if (data.Getdata.length > 0) {
                            $("#_cusno").attr('disabled', 'disabled');
                            $("#_company").attr('disabled', 'disabled');
                            $("#slmcod").attr('disabled', 'disabled');
                            var sta = data.Getdata[0].val.Status
                            if (sta != "1") {

                                $("#_claimno").val(data.Getdata[0].val.CLM_ID);
                                $("#_cusno").val(data.Getdata[0].val.CUSCOD);
                                $("#_cusname").val(data.Getdata[0].val.CUSNAM);
                                $("#slmcod").val(data.Getdata[0].val.SLMCOD);
                                $("#sslmnam").val(data.Getdata[0].val.SLMNAM);
                                $("#requestby").val(data.Getdata[0].val.CLM_RCVBY);
                                $("#requestdate").val(data.Getdata[0].val.CLM_RCVDATE);
                                $("#_company").val(data.Getdata[0].val.CLM_COMPANY);
                                $("#_invcustomer").val(data.Getdata[0].val.CUSCOD);
                                //GetShipto()

                                var SubmithtmlPage = '';
                                for (var i = 0; i < data.Getdata.length; i++) {
                                    SubmithtmlPage = '<tr  fax="2" cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" clmmachine="' + data.Getdata[i].val.CLM_Machine + '"  clmmodel="' + data.Getdata[i].val.CLM_Model + '"  clmmodelyear="' + data.Getdata[i].val.CLM_ModelYear + '"  clmenginecode="' + data.Getdata[i].val.CLM_EngineCode + '"  clmchassisno="' + data.Getdata[i].val.CLM_ChassisNo + '"  clminjecpump="' + data.Getdata[i].val.CLM_InjecPump + '"  clmtypeproduct="' + data.Getdata[i].val.CLM_TypeProduct + '"  clmwarratyno="' + data.Getdata[i].val.CLM_WarrantyNo + '"  clmmilage="' + data.Getdata[i].val.CLM_Milage + '"  clmdatedamage="' + data.Getdata[i].val.CLM_DateDamage + '"  clmbatchcode="' + data.Getdata[i].val.CLM_BatchCode + '" >';
                                    SubmithtmlPage += '<td><button type="reset" id="delclmtemp" style="min-width: 50px;"  clmID="' + data.Getdata[0].val.CLM_ID + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '">X</button></td>';
                                    SubmithtmlPage += '<td  id="btngetshowdata" style="cursor: pointer; color: darkorchid; text-decoration: underline; width: 110px;" installdate="' + data.Getdata[i].val.CLM_Installdate + '" contact="' + data.Getdata[i].val.CLM_Contact + '"  contacttel="' + data.Getdata[i].val.CLM_ContactTel + '" prodnam="' + data.Getdata[i].val.PRODNAM + '" prode="' + data.Getdata[i].val.PROD + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" clmmachine="' + data.Getdata[i].val.CLM_Machine + '"  clmmodel="' + data.Getdata[i].val.CLM_Model + '"  clmmodelyear="' + data.Getdata[i].val.CLM_ModelYear + '"  clmenginecode="' + data.Getdata[i].val.CLM_EngineCode + '"  clmchassisno="' + data.Getdata[i].val.CLM_ChassisNo + '"  clminjecpump="' + data.Getdata[i].val.CLM_InjecPump + '"  clmtypeproduct="' + data.Getdata[i].val.CLM_TypeProduct + '"  clmwarratyno="' + data.Getdata[i].val.CLM_WarrantyNo + '"  clmmilage="' + data.Getdata[i].val.CLM_Milage + '"  clmdatedamage="' + data.Getdata[i].val.CLM_DateDamage + '"  clmbatchcode="' + data.Getdata[i].val.CLM_BatchCode + '" >' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKDES + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_USEDAY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_INVNO + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_CAUSE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                                    // SubmithtmlPage += '<td><button type="button" class="btn btn-info" style="width:70%;" id="viewimg" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '" clmnoid="' + data.Getdata[0].val.CLM_ID + '">view</button></td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                    SubmithtmlPage += '</tr>';
                                    $('#receclaim > tbody:last-child').append(SubmithtmlPage);
                                  
                                }
                            } else {
                                //alert("เลขที่เคลม:"+valclim+" สถานะเคลมอยู่ระหว่างการตรวจสอบรับสินค้า");
                                $("#textAlertshow").empty();
                                $("#textAlertshow").text("เลขที่เคลม: " + valclim + " สถานะเคลมอยู่ระหว่างการตรวจสอบรับสินค้า");
                                $("#myModalShow").modal();
                            }
                        } else {
                            $("#_cusno").removeAttr('disabled');
                            clearval();
                            clearimage();
                            $("#_invcustomer").val("");
                            $("#slmcod").removeAttr('disabled');
                            //alert(" No Data.....");
                            //location.reload();
                            //var cvaluser = $("#_uderlogin").val()

                            //$("#requestby").val(cvaluser);
                            //var cval = $("#_tempreq").val();
                            //$("#requestdate").val(cval);
                        }
                        var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                    }
                });
            }
            $("#receclaim").on("click", "#delclmtemp", function () {
                var comid = $(this).attr('clmID');
                var clmnoup = $(this).attr('clmnoup');
                $.ajax({
                    url: '@Url.Action("DeleteClaimtemp", "Createclaim_Sc")',
                    data: {
                        comid: comid,
                        clmnoup: clmnoup
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if (data.message == "true") {
                            alert("ลบรายการเรียบร้อย");
                            GetClimtemp(comid)
                            $("#_claimno").val("");
                        } else {
                            alert(data.message);
                        }
                    }
                });
            });
            function FileDetails() {

                // GET THE FILE INPUT.
                var fi = document.getElementById('fileInput');

                // VALIDATE OR CHECK IF ANY FILE IS SELECTED.
                if (fi.files.length > 0) {

                    // THE TOTAL FILE COUNT.
                    document.getElementById('fp').innerHTML =
                        'Total Files: <b>' + fi.files.length + '</b></br >';

                    // RUN A LOOP TO CHECK EACH SELECTED FILE.
                    for (var i = 0; i <= fi.files.length - 1; i++) {

                        var fname = fi.files.item(i).name;      // THE NAME OF THE FILE.
                        var fsize = fi.files.item(i).size;      // THE SIZE OF THE FILE.

                        // SHOW THE EXTRACTED DETAILS OF THE FILE.
                        document.getElementById('fp').innerHTML =
                            document.getElementById('fp').innerHTML + '<br /> ' +
                                fname + ' (<b>' + fsize + '</b> bytes)';
                    }
                }
                else {
                    alert('Please select a file.')
                }
            }
            if (window.File && window.FileList && window.FileReader) {
                $("#fileupload").on("change", function (e) {
                    //FileDetails()

                    var fileList = this.files; /* now you can work with the file list */
                    $(".removevideo").click();

                    var name = $(this).val();

                    var a2 = $("#_itemno").val();
                    var _val = a2;
                    a2 = splitval(_val);
                    if (a2 == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณา ใส่เบอร์สินค้าที่ต้องการ Claim");
                        $("#myModalWarning").modal();
                        // return false;
                    }
                    var fileName = e.target.files[0].name;
                   
                    var files = e.target.files,
                        filesLength = files.length;

                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]

                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {

                            var file = e.target;
                         //   alert(e.target.result)
                            $("<span class=\"pip\">" +
                                 "<video  class=\"imageThumb\" controls='controls' style='width: 600px; max-width: 100%;'>" +
                                "<source src=" + e.target.result + " />" +
                                " </video>" +
                              "<br/><span class=\"name\">" + fileName + "</span>" +
                              "<br/><span class=\"removevideo\">Remove video</span>" +
                              "</span>").insertAfter("#appvideo");
                            $(".removevideo").click(function () {
                                $(this).parent(".pip").remove();
                            });
                        });

                        fileReader.readAsDataURL(f);
                    }
                });
                $("#FileUpload1").on("change", function (e) {
                    //FileDetails()

                    var fileList = this.files; /* now you can work with the file list */
                    $(".remove1").click();

                    var name = $(this).val();
                    var a2 = $("#_itemno").val();
                    var _val = a2;
                    a2 = splitval(_val);
                    if (a2 == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณา ใส่เบอร์สินค้าที่ต้องการ Claim");
                        $("#myModalWarning").modal();
                        // return false;
                    }
                    var fileName = e.target.files[0].name;

                    var files = e.target.files,
                        filesLength = files.length;

                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]

                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {

                            var file = e.target;

                            $("<span class=\"pip1\">" +
                              "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + fileName + "\"/>" +
                              "<br/><span class=\"name\">" + fileName + "</span>" +
                              "<br/><span class=\"remove1\">Remove image</span>" +
                              "</span>").insertAfter("#FileUpload1");
                            $(".remove1").click(function () {
                                $(this).parent(".pip1").remove();
                            });
                        });

                        fileReader.readAsDataURL(f);
                    }
                });

                $("#FileUpload2").on("change", function (e) {
                    //FileDetails()

                    var fileList = this.files; /* now you can work with the file list */
                    $(".remove2").click();

                    //var a1 =  $("#_claimno").val();
                    //if (a1 == "") {
                    //    $("#textAlertWarning").empty();
                    //    $("#textAlertWarning").text("กรุณา Create Document");
                    //    $("#myModalWarning").modal(); return false;
                    //}
                    var name = $(this).val();
                    var a2 = $("#_itemno").val();
                    var _val = a2;
                    a2 = splitval(_val);
                    if (a2 == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณา ใส่เบอร์สินค้าที่ต้องการ Claim");
                        $("#myModalWarning").modal();
                        // return false;
                    }
                    var fileName = e.target.files[0].name;

                    var files = e.target.files,
                        filesLength = files.length;

                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]
                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {

                            var file = e.target;

                            $("<span class=\"pip2\">" +
                              "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + fileName + "\"/>" +
                              "<br/><span class=\"name\">" + fileName + "</span>" +
                              "<br/><span class=\"remove2\">Remove image</span>" +
                              "</span>").insertAfter("#FileUpload2");
                            $(".remove2").click(function () {
                                $(this).parent(".pip2").remove();
                            });
                        });
                        fileReader.readAsDataURL(f);
                    }
                });

                $("#FileUpload3").on("change", function (e) {
                    //FileDetails()

                    var fileList = this.files; /* now you can work with the file list */
                    $(".remove3").click();

                    //var a1 =  $("#_claimno").val();
                    //if (a1 == "") {
                    //    $("#textAlertWarning").empty();
                    //    $("#textAlertWarning").text("กรุณา Create Document");
                    //    $("#myModalWarning").modal(); return false;
                    //}
                    var name = $(this).val();
                    var a2 = $("#_itemno").val();
                    var _val = a2;
                    a2 = splitval(_val);
                    if (a2 == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณา ใส่เบอร์สินค้าที่ต้องการ Claim");
                        $("#myModalWarning").modal();
                        // return false;
                    }
                    var fileName = e.target.files[0].name;

                    var files = e.target.files,
                        filesLength = files.length;

                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]
                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {

                            var file = e.target;

                            $("<span class=\"pip3\">" +
                              "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + fileName + "\"/>" +
                              "<br/><span class=\"name\">" + fileName + "</span>" +
                              "<br/><span class=\"remove3\">Remove image</span>" +
                              "</span>").insertAfter("#FileUpload3");
                            $(".remove3").click(function () {
                                $(this).parent(".pip3").remove();
                            });
                        });
                        fileReader.readAsDataURL(f);
                    }
                });

                $("#FileUpload4").on("change", function (e) {
                    //FileDetails()

                    var fileList = this.files; /* now you can work with the file list */
                    $(".remove4").click();

                    //var a1 =  $("#_claimno").val();
                    //if (a1 == "") {
                    //    $("#textAlertWarning").empty();
                    //    $("#textAlertWarning").text("กรุณา Create Document");
                    //    $("#myModalWarning").modal(); return false;
                    //}
                    var name = $(this).val();
                    var a2 = $("#_itemno").val();
                    var _val = a2;
                    a2 = splitval(_val);
                    if (a2 == "") {
                        $("#textAlertWarningmes").empty();
                        $("#textAlertWarningmes").text("กรุณา ใส่เบอร์สินค้าที่ต้องการ Claim");
                        $("#myModalWarning").modal();
                        // return false;
                    }
                    var fileName = e.target.files[0].name;

                    var files = e.target.files,
                        filesLength = files.length;

                    for (var i = 0; i < filesLength; i++) {
                        var f = files[i]
                        var fileReader = new FileReader();
                        fileReader.onload = (function (e) {

                            var file = e.target;

                            $("<span class=\"pip4\">" +
                              "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + fileName + "\"/>" +
                              "<br/><span class=\"name\">" + fileName + "</span>" +
                              "<br/><span class=\"remove4\">Remove image</span>" +
                              "</span>").insertAfter("#FileUpload4");
                            $(".remove4").click(function () {
                                $(this).parent(".pip4").remove();
                            });
                        });
                        fileReader.readAsDataURL(f);
                    }
                });
            } else {
                alert("Your browser doesn't support to File API")
            }
            $('#btnUpload').click(function () {

                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {
                    var a2 = $("#_itemno").val();
                    var _val = a2.replace(/ /g, '');;
                    a2 = splitval(_val);
                    var a1 = $("#_claimno").val();
                    var fileUpload = $("#fileupload").get(0);
                    var files = fileUpload.files;
                    console.log(files);


                    var inCim_NoSub = $("#_claimnosub").text();

                    // Create FormData object
                    var fileData = new FormData();
                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {

                        //fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "-01");
                        fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "-01");
                    }
                    // Adding one more key to FormData object
                    // fileData.append('username', 'gdb1100');

                    $.ajax({
                        url: '@Url.Action("UploadVideo", "Createclaim_Sc")',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        success: function (result) {
                            console.log(result)
                            if (result.message == "true") {
                                var Img = result.fileName;
                                if (Img != "") {
                                    $.ajax({
                                        url: '@Url.Action("Savefilevideo", "Createclaim_Sc")',
                                        data: {
                                            im_name: Img,
                                            aj_CLM_NO: a1,
                                            Im_No: "01",
                                            aj_CLM_NO_SUB: inCim_NoSub,
                                            Size: result.Size
                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {
                                            console.log(data);
                                            if (data.message == 'true') {
                                                alert("บันทึก VIDEO สำเร็จ")
                                                $('#ststus').text(data.message);

                                            }
                                        }
                                    });
                                }

                            }


                        },
                        error: function (err) {
                            alert(err.statusText + ":ความยาวเกินกว่ากำหนด Upload ใหม่");
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
            $('#btnUpload1').click(function () {

                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {
                    var a2 = $("#_itemno").val();
                    var _val = a2.replace(/ /g, '');;
                    a2 = splitval(_val);
                    var a1 = $("#_claimno").val();
                    var fileUpload = $("#FileUpload1").get(0);
                    var files = fileUpload.files;
                    console.log(files);
                    var inCim_NoSub = $("#_claimnosub").text();

                    // Create FormData object
                    var fileData = new FormData();
                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {

                        // fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "-01");
                        fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "CUS-01");
                    }
                    // Adding one more key to FormData object
                    // fileData.append('username', 'gdb1100');

                    $.ajax({
                        url: '@Url.Action("Upload", "Createclaim_Sc")',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        success: function (result) {
                            //alert(result);
                            if (result.message == "true") {
                                var Img = result.imgname;
                                $.ajax({
                                    url: '@Url.Action("SavePathImagetemp", "Createclaim_Sc")',
                                    data: {
                                        im_name: Img,
                                        Cim_No: a1,
                                        Im_No: "CUS01",
                                        inCim_NoSub: inCim_NoSub
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        console.log(data);
                                        if (data.message == 'true') {
                                            //alert(data.message)
                                            $('#ststus1').text(data.message);

                                        }
                                    }
                                });

                            }
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
            $('#btnUpload2').click(function () {
                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {
                    var a2 = $("#_itemno").val();
                    var _val = a2.replace(/ /g, '');;
                    a2 = splitval(_val);
                    var a1 = $("#_claimno").val();
                    var fileUpload = $("#FileUpload2").get(0);
                    var files = fileUpload.files;
                    console.log(files);

                    var inCim_NoSub = $("#_claimnosub").text();
                    // Create FormData object
                    var fileData = new FormData();
                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {

                        // fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "-02");
                        fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "CUS-02");
                    }
                    // Adding one more key to FormData object
                    // fileData.append('username', 'gdb1100');
                    $.ajax({
                        url: '@Url.Action("Upload", "Createclaim_Sc")',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        success: function (result) {
                            if (result.message == "true") {
                                var Img = result.imgname;
                                $.ajax({
                                    url: '@Url.Action("SavePathImagetemp", "Createclaim_Sc")',
                                    data: {
                                        im_name: Img,
                                        Cim_No: a1,
                                        Im_No: "CUS02",
                                        inCim_NoSub: inCim_NoSub
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        console.log(data);
                                        if (data.message == 'true') {
                                            $('#ststus2').text(data.message);
                                        }
                                    }
                                });
                            }
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
            $('#btnUpload3').click(function () {
                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {
                    var a2 = $("#_itemno").val();
                    var _val = a2.replace(/ /g, '');;
                    a2 = splitval(_val);
                    var a1 = $("#_claimno").val();
                    var fileUpload = $("#FileUpload3").get(0);
                    var files = fileUpload.files;
                    console.log(files);
                    // Create FormData object
                    var inCim_NoSub = $("#_claimnosub").text();
                    var fileData = new FormData();
                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {

                        // fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "-03");
                        fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "CUS-03");
                    }
                    // Adding one more key to FormData object
                    // fileData.append('username', 'gdb1100');
                    $.ajax({
                        url: '@Url.Action("Upload", "Createclaim_Sc")',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        success: function (result) {
                            if (result.message == "true") {
                                var Img = result.imgname;
                                $.ajax({
                                    url: '@Url.Action("SavePathImagetemp", "Createclaim_Sc")',
                                    data: {
                                        im_name: Img,
                                        Cim_No: a1,
                                        Im_No: "CUS03",
                                        inCim_NoSub: inCim_NoSub
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        console.log(data);
                                        if (data.message == 'true') {
                                            $('#ststus3').text(data.message);

                                        }
                                    }
                                });
                            }
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
            $('#btnUpload4').click(function () {
                // Checking whether FormData is available in browser
                if (window.FormData !== undefined) {
                    var a2 = $("#_itemno").val();
                    var _val = a2.replace(/ /g, '');;
                    a2 = splitval(_val);
                    var a1 = $("#_claimno").val();
                    var fileUpload = $("#FileUpload4").get(0);
                    var files = fileUpload.files;
                    console.log(files);
                    var inCim_NoSub = $("#_claimnosub").text();
                    // Create FormData object
                    var fileData = new FormData();
                    // Looping over all files and add it to FormData object
                    for (var i = 0; i < files.length; i++) {

                        //fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "-04");
                        fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "CUS-04");
                    }

                    $.ajax({
                        url: '@Url.Action("Upload", "Createclaim_Sc")',
                        type: "POST",
                        contentType: false, // Not to set any content header
                        processData: false, // Not to process data
                        data: fileData,
                        success: function (result) {
                            if (result.message == "true") {
                                var Img = result.imgname;
                                $.ajax({
                                    url: '@Url.Action("SavePathImagetemp", "Createclaim_Sc")',
                                    data: {
                                        im_name: Img,
                                        Cim_No: a1,
                                        Im_No: "CUS04",
                                        inCim_NoSub: inCim_NoSub
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        console.log(data);
                                        if (data.message == 'true') {
                                            $('#ststus4').text(data.message);

                                        }
                                    }
                                });

                            }
                        },
                        error: function (err) {
                            alert(err.statusText);
                        }
                    });
                } else {
                    alert("FormData is not supported.");
                }
            });
            $(document).on('click', '.removevideo', function () {
               
                var control = $("#fileupload");
                control.replaceWith(control.val('').clone(true));
                // Some bound handlers to preserve when cloning
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
              
                var clmno = $("#_claimno").val();
                var clmsub = $("#_claimnosub").text();
                // var phimage = $('.imageThumb img').attr('src');
                // var absPath = resultObj[0].val.IMAGE_NAME;
                var absPath = $(this).attr("video");
                
                var idimag = $(this).attr("remoimage");

                if (idimag != "") {
                    if (typeof idimag !== "undefined") {
                        $.ajax({
                            url: '@Url.Action("DeleteFileVideo", "Createclaim_Sc")',
                            data: {
                                comid: clmno,
                                clmnoup: clmsub,
                                clmidimg: idimag,
                                absPath: absPath + ".mp4",
                                Im_No: "01"
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                if (data.message == "true") {

                                    alert("ลบ VIDEOS รายการเรียบร้อย");

                                    var control = $("#fileupload");

                                    control.replaceWith(control.val('').clone(true));

                                    // Some bound handlers to preserve when cloning
                                    control.on({
                                        change: function () { console.log("Changed") },
                                        focus: function () { console.log("Focus") }
                                    });
                                } else {
                                    alert(data.message);
                                }
                            }
                        });
                    }
                }
            });
            $(document).on('click', '.remove1', function () {
                var control = $("#FileUpload1");
                control.replaceWith(control.val('').clone(true));
                // Some bound handlers to preserve when cloning
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var clmno = $("#_claimno").val();
                var clmsub = $("#_claimnosub").text();
                // var phimage = $('.imageThumb img').attr('src');
                // var absPath = resultObj[0].val.IMAGE_NAME;
                var absPath = $(this).attr("img");
                
                var idimag = $(this).attr("remoimage");
               
                if (idimag != "") {
                    if (typeof idimag !== "undefined") {
                        $.ajax({
                            url: '@Url.Action("Deleteimage", "Createclaim_Sc")',
                            data: {
                                comid: clmno,
                                clmnoup: clmsub,
                                clmidimg: idimag,
                                absPath: absPath
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                if (data.message == "true") {

                                    alert("ลบ image รายการเรียบร้อย");

                                    var control = $("#FileUpload1");

                                    control.replaceWith(control.val('').clone(true));

                                    // Some bound handlers to preserve when cloning
                                    control.on({
                                        change: function () { console.log("Changed") },
                                        focus: function () { console.log("Focus") }
                                    });
                                } else {
                                    alert(data.message);
                                }
                            }
                        });
                    }
                }
            });
            $(document).on('click', '.remove2', function () {

                var control = $("#FileUpload2");

                control.replaceWith(control.val('').clone(true));

                // Some bound handlers to preserve when cloning
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var clmno = $("#_claimno").val();
                var clmsub = $("#_claimnosub").text();

                var absPath = $(this).attr("img");

                var idimag = $(this).attr("remoimage");
                if (idimag != "") {
                    if (typeof idimag !== "undefined") {
                        $.ajax({
                            url: '@Url.Action("Deleteimage", "Createclaim_Sc")',
                            data: {
                                comid: clmno,
                                clmnoup: clmsub,
                                clmidimg: idimag,
                                absPath: absPath
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                if (data.message == "true") {

                                    alert("ลบ image รายการเรียบร้อย");

                                    var control = $("#FileUpload2");

                                    control.replaceWith(control.val('').clone(true));

                                    // Some bound handlers to preserve when cloning
                                    control.on({
                                        change: function () { console.log("Changed") },
                                        focus: function () { console.log("Focus") }
                                    });
                                } else {
                                    alert(data.message);
                                }
                            }
                        });
                    }
                }
            });

            $(document).on('click', '.remove3', function () {

                var control = $("#FileUpload3");

                control.replaceWith(control.val('').clone(true));

                // Some bound handlers to preserve when cloning
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var clmno = $("#_claimno").val();
                var clmsub = $("#_claimnosub").text();
                var absPath = $(this).attr("img");
                var idimag = $(this).attr("remoimage");
                if (idimag != "") {
                    if (typeof idimag !== "undefined") {
                        $.ajax({
                            url: '@Url.Action("Deleteimage", "Createclaim_Sc")',
                            data: {
                                comid: clmno,
                                clmnoup: clmsub,
                                clmidimg: idimag,
                                absPath: absPath
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                if (data.message == "true") {

                                    alert("ลบ image รายการเรียบร้อย");

                                    var control = $("#FileUpload3");

                                    control.replaceWith(control.val('').clone(true));

                                    // Some bound handlers to preserve when cloning
                                    control.on({
                                        change: function () { console.log("Changed") },
                                        focus: function () { console.log("Focus") }
                                    });
                                } else {
                                    alert(data.message);
                                }
                            }
                        });
                    }
                }
            });

            $(document).on('click', '.remove4', function () {

                var control = $("#FileUpload4");

                control.replaceWith(control.val('').clone(true));

                // Some bound handlers to preserve when cloning
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });

                var clmno = $("#_claimno").val();
                var clmsub = $("#_claimnosub").text();
                var absPath = $(this).attr("img");
                var idimag = $(this).attr("remoimage");
                if (idimag != "") {
                    if (typeof idimag !== "undefined") {
                        $.ajax({
                            url: '@Url.Action("Deleteimage", "Createclaim_Sc")',
                            data: {
                                comid: clmno,
                                clmnoup: clmsub,
                                clmidimg: idimag,
                                absPath: absPath
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                if (data.message == "true") {

                                    alert("ลบ image รายการเรียบร้อย");

                                    var control = $("#FileUpload4");

                                    control.replaceWith(control.val('').clone(true));

                                    // Some bound handlers to preserve when cloning
                                    control.on({
                                        change: function () { console.log("Changed") },
                                        focus: function () { console.log("Focus") }
                                    });
                                } else {
                                    alert(data.message);
                                }
                            }
                        });
                    }
                }
            });
            $("#_itemno").on("keyup", function () {

                if ($.trim($(this).val()) == '') {
                    $('#_description').val("");
                    $('#_uom').val("");
                    $('#_itemnodes').val("");
                    $('#_invoiceno').val("");
                    $('#_descriptiondes').val("");
                    $('#_invoicenodes').val("");
                    $('#_psdate').val("");
                    $('#_claimqty').val("");
                    $('#_prdy').val("");
                    $('#_typpro').val("");
                    $('#_prd').val("");
                    $('#_vemac').val("");
                    $('#_moty').val("");
                    $('#_focdis').val("");
                    $('#_proceedto').removeAttr('disabled');
                    clearimage()
                    clearval();
                }
            });
            $("#_invoiceno").on("keyup", function () {

                if ($.trim($(this).val()) == '') {
                    $('#_description').val("");
                    $('#_uom').val("");
                    $('#_itemnodes').val("");
                    $('#_invoiceno').val("");
                    $('#_descriptiondes').val("");
                    $('#_invoicenodes').val("");
                    $('#_psdate').val("");
                    $('#_claimqty').val("");
                    $('#_prdy').val("");
                    $('#_typpro').val("");
                    $('#_prd').val("");
                    $('#_vemac').val("");
                    $('#_moty').val("");
                    $('#_focdis').val("");
                    $('#_proceedto').removeAttr('disabled');
                    clearimage()
                    clearval();
                }
            });
            function clearimage() {
                
                var control = $("#fileupload");
                control.replaceWith(control.val('').clone(true));
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var control = $("#FileUpload1");
                control.replaceWith(control.val('').clone(true));
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var control = $("#FileUpload2");
                control.replaceWith(control.val('').clone(true));
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var control = $("#FileUpload3");
                control.replaceWith(control.val('').clone(true));
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                var control = $("#FileUpload4");
                control.replaceWith(control.val('').clone(true));
                control.on({
                    change: function () { console.log("Changed") },
                    focus: function () { console.log("Focus") }
                });
                $(".pip").remove();
                $(".pip1").remove();
                $(".pip2").remove();
                $(".pip3").remove();
                $(".pip4").remove();
                $("#ststus").text("");
                $("#ststus1").text("");
                $("#ststus2").text("");
                $("#ststus3").text("");
                $("#ststus4").text("");
            }
            function clearval() {
                $("#_claimnosub").text("");
                $("#_itemno").val("");
                $("#_partnocus").val("");
                $("#_description").val("");
                $("#_itemnodes").val("");
                $("#_descriptiondes").val("");
                $("#_prd").val("");
                $("#_uom").val("");
                $("#_invoiceno").val("");
                $("#_invoicenodes").val("");
                $("#_psdate").val("");
                $("#_claimqty").val("");


                $("#_vemac").val("");
                $("#_moty").val("");
                $("#_modyear").val("");
                $("#_encod").val("");
                $("#_chno").val("");
                $("#_pump").val("");
                $("#_typpro").val("");
                $("#_warcarno").val("");
                $("#_milage").val("");
                $("#_datofdam").val(y + "-" + mm + "-" + dd);
                $("#_batcod").val("");

                $("#causeclaim").val("");
                $("#_proceedto").val("0");
                $("#_statusclaim").val("2");
                $("#_workda").val("0"); //ระยะใช้งาน//
                $("#_workmonth").val("0"); //ระยะใช้งาน//
                $("#_workday").val("0");//ระยะใช้งาน//
                $("#_worktime").val("00:00");//ระยะใช้งาน//
                $("#_installdate").val(y + "-" + mm + "-" + dd);
                $("#_claimcontacte").val("");
                $("#_contacte").val("");
            }
            //ถ้าเงือนไขให่รถไปรับสินค้ามีมากกว่า1รายการ ให้set  _statusclaim=0//
        });
    </script>
</body>
</html>
